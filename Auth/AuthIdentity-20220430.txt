2022-04-30 16:22:55.209 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:22:55.605 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 16:22:55.620 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 16:22:55.627 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-30 16:22:55.634 +03:00 [INF] Initialization DB done
2022-04-30 16:22:55.695 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-30 16:22:55.843 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-30 16:22:55.867 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-30 16:22:55.880 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-30 16:22:56.168 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-30 16:22:56.169 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-30 16:22:56.171 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 16:22:56.172 +03:00 [INF] Hosting environment: Development
2022-04-30 16:22:56.174 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-30 16:23:17.138 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 16:23:17.238 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 16:23:17.308 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 174.0686ms
2022-04-30 16:23:17.338 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 16:23:17.348 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 16:23:17.423 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 84.6908ms
2022-04-30 16:23:18.408 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/authorize?response_type=code&state=gb6NIkjN1UAbpzaYxzkywQ&code_challenge=t5wXk_AI1ECt2gi5-d-smFcP1Fq2p1gE5oBaKUqF-ZI&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 16:23:18.466 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 16:23:18.567 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 16:23:18.575 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/authorize?response_type=code&state=gb6NIkjN1UAbpzaYxzkywQ&code_challenge=t5wXk_AI1ECt2gi5-d-smFcP1Fq2p1gE5oBaKUqF-ZI&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 166.9332ms
2022-04-30 16:23:18.588 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dgb6NIkjN1UAbpzaYxzkywQ%26code_challenge%3Dt5wXk_AI1ECt2gi5-d-smFcP1Fq2p1gE5oBaKUqF-ZI%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:23:18.596 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:23:18.627 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:23:18.660 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:23:18.770 +03:00 [INF] Executed ViewResult - view Login executed in 111.2093ms.
2022-04-30 16:23:18.775 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 141.7788ms
2022-04-30 16:23:18.778 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:23:18.781 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dgb6NIkjN1UAbpzaYxzkywQ%26code_challenge%3Dt5wXk_AI1ECt2gi5-d-smFcP1Fq2p1gE5oBaKUqF-ZI%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 193.0221ms
2022-04-30 16:23:26.591 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dgb6NIkjN1UAbpzaYxzkywQ%26code_challenge%3Dt5wXk_AI1ECt2gi5-d-smFcP1Fq2p1gE5oBaKUqF-ZI%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:23:26.595 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:23:26.597 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:23:26.603 +03:00 [INF] Executing ViewResult, running view Register.
2022-04-30 16:23:26.620 +03:00 [INF] Executed ViewResult - view Register executed in 17.1768ms.
2022-04-30 16:23:26.622 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 20.009ms
2022-04-30 16:23:26.623 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:23:26.625 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dgb6NIkjN1UAbpzaYxzkywQ%26code_challenge%3Dt5wXk_AI1ECt2gi5-d-smFcP1Fq2p1gE5oBaKUqF-ZI%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 33.3685ms
2022-04-30 16:23:28.676 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/Auth/Register application/x-www-form-urlencoded 589
2022-04-30 16:23:28.678 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:23:28.691 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Auth.Identity.ViewModel.RegisterViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:23:28.723 +03:00 [INF] Executing ViewResult, running view Register.
2022-04-30 16:23:28.728 +03:00 [INF] Executed ViewResult - view Register executed in 4.8721ms.
2022-04-30 16:23:28.730 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 31.402ms
2022-04-30 16:23:28.731 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:23:28.733 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/Auth/Register application/x-www-form-urlencoded 589 - 200 - text/html;+charset=utf-8 56.7162ms
2022-04-30 16:23:41.472 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/Auth/Login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dgb6NIkjN1UAbpzaYxzkywQ%26code_challenge%3Dt5wXk_AI1ECt2gi5-d-smFcP1Fq2p1gE5oBaKUqF-ZI%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:23:41.474 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:23:41.475 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:23:41.480 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:23:41.484 +03:00 [INF] Executed ViewResult - view Login executed in 4.3505ms.
2022-04-30 16:23:41.486 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 6.2634ms
2022-04-30 16:23:41.487 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:23:41.489 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/Auth/Login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dgb6NIkjN1UAbpzaYxzkywQ%26code_challenge%3Dt5wXk_AI1ECt2gi5-d-smFcP1Fq2p1gE5oBaKUqF-ZI%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 16.3559ms
2022-04-30 16:23:42.196 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 572
2022-04-30 16:23:42.198 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:23:42.201 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:23:42.209 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:23:42.212 +03:00 [INF] Executed ViewResult - view Login executed in 3.5945ms.
2022-04-30 16:23:42.214 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 9.2851ms
2022-04-30 16:23:42.217 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:23:42.218 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 572 - 200 - text/html;+charset=utf-8 21.5059ms
2022-04-30 16:23:43.893 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 572
2022-04-30 16:23:43.894 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:23:43.900 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:23:43.904 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:23:43.905 +03:00 [INF] Executed ViewResult - view Login executed in 1.6495ms.
2022-04-30 16:23:43.907 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 3.6468ms
2022-04-30 16:23:43.910 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:23:43.912 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 572 - 200 - text/html;+charset=utf-8 19.6060ms
2022-04-30 16:23:44.181 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 572
2022-04-30 16:23:44.182 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:23:44.184 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:23:44.189 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:23:44.191 +03:00 [INF] Executed ViewResult - view Login executed in 1.9978ms.
2022-04-30 16:23:44.193 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 4.2495ms
2022-04-30 16:23:44.195 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:23:44.197 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 572 - 200 - text/html;+charset=utf-8 16.2720ms
2022-04-30 16:23:53.123 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 16:23:53.125 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:23:53.126 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:23:53.136 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:23:53.504 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedUserName_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:23:53.514 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:23:53.516 +03:00 [INF] Executed ViewResult - view Login executed in 2.5466ms.
2022-04-30 16:23:53.519 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 389.2992ms
2022-04-30 16:23:53.520 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:23:53.523 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 200 - text/html;+charset=utf-8 399.3925ms
2022-04-30 16:24:34.320 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 16:24:34.322 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 16:24:34.326 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 5.9435ms
2022-04-30 16:24:34.359 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 16:24:34.362 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 16:24:34.365 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.6516ms
2022-04-30 16:24:35.322 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/authorize?response_type=code&state=9jY8cM0NQ2iNH-PH7yEFQQ&code_challenge=v48o8onXc96GaNE8vktspRbxnmiHH5OR9NLP3KuWDsc&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 16:24:35.327 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 16:24:35.335 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 16:24:35.336 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/authorize?response_type=code&state=9jY8cM0NQ2iNH-PH7yEFQQ&code_challenge=v48o8onXc96GaNE8vktspRbxnmiHH5OR9NLP3KuWDsc&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 14.0864ms
2022-04-30 16:24:35.361 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3D9jY8cM0NQ2iNH-PH7yEFQQ%26code_challenge%3Dv48o8onXc96GaNE8vktspRbxnmiHH5OR9NLP3KuWDsc%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:24:35.363 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:24:35.364 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:24:35.368 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:24:35.370 +03:00 [INF] Executed ViewResult - view Login executed in 2.3982ms.
2022-04-30 16:24:35.372 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 4.7247ms
2022-04-30 16:24:35.375 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:24:35.376 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3D9jY8cM0NQ2iNH-PH7yEFQQ%26code_challenge%3Dv48o8onXc96GaNE8vktspRbxnmiHH5OR9NLP3KuWDsc%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 15.5654ms
2022-04-30 16:24:41.781 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3D9jY8cM0NQ2iNH-PH7yEFQQ%26code_challenge%3Dv48o8onXc96GaNE8vktspRbxnmiHH5OR9NLP3KuWDsc%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:24:41.784 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:24:41.786 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:24:41.789 +03:00 [INF] Executing ViewResult, running view Register.
2022-04-30 16:24:41.791 +03:00 [INF] Executed ViewResult - view Register executed in 2.4012ms.
2022-04-30 16:24:41.793 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 4.2213ms
2022-04-30 16:24:41.797 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:24:41.798 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3D9jY8cM0NQ2iNH-PH7yEFQQ%26code_challenge%3Dv48o8onXc96GaNE8vktspRbxnmiHH5OR9NLP3KuWDsc%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 16.5879ms
2022-04-30 16:24:59.509 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 16:24:59.541 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 16:24:59.546 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 36.6084ms
2022-04-30 16:24:59.581 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 16:24:59.608 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 16:24:59.628 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 46.4645ms
2022-04-30 16:25:00.895 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/authorize?response_type=code&state=gSrIOkGyEE8w-xzOB60c_A&code_challenge=Cr3trPG0pa5hZQ2zDvzdoojD2WyTbFMhyagwBjyEcvM&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 16:25:00.906 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 16:25:00.908 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 16:25:00.919 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/authorize?response_type=code&state=gSrIOkGyEE8w-xzOB60c_A&code_challenge=Cr3trPG0pa5hZQ2zDvzdoojD2WyTbFMhyagwBjyEcvM&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 23.4528ms
2022-04-30 16:25:00.932 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DgSrIOkGyEE8w-xzOB60c_A%26code_challenge%3DCr3trPG0pa5hZQ2zDvzdoojD2WyTbFMhyagwBjyEcvM%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:25:00.935 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:25:00.937 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:25:00.943 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:25:00.946 +03:00 [INF] Executed ViewResult - view Login executed in 2.6415ms.
2022-04-30 16:25:00.949 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 5.8212ms
2022-04-30 16:25:00.952 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:25:00.955 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DgSrIOkGyEE8w-xzOB60c_A%26code_challenge%3DCr3trPG0pa5hZQ2zDvzdoojD2WyTbFMhyagwBjyEcvM%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 23.4290ms
2022-04-30 16:25:20.152 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 16:25:20.165 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 16:25:20.183 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 31.0855ms
2022-04-30 16:25:20.216 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 16:25:20.220 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 16:25:20.223 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 7.4565ms
2022-04-30 16:25:21.127 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/authorize?response_type=code&state=Bmb50W6Zn2zNVUqxkuzuTg&code_challenge=NH00_QqGfKgOx-5q1rXW32AL2nHjfAwx-svFi5--lXY&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 16:25:21.131 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 16:25:21.134 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 16:25:21.136 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/authorize?response_type=code&state=Bmb50W6Zn2zNVUqxkuzuTg&code_challenge=NH00_QqGfKgOx-5q1rXW32AL2nHjfAwx-svFi5--lXY&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 9.5772ms
2022-04-30 16:25:21.176 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DBmb50W6Zn2zNVUqxkuzuTg%26code_challenge%3DNH00_QqGfKgOx-5q1rXW32AL2nHjfAwx-svFi5--lXY%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:25:21.183 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:25:21.187 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:25:21.198 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:25:21.204 +03:00 [INF] Executed ViewResult - view Login executed in 5.7554ms.
2022-04-30 16:25:21.206 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 8.199ms
2022-04-30 16:25:21.209 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:25:21.214 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DBmb50W6Zn2zNVUqxkuzuTg%26code_challenge%3DNH00_QqGfKgOx-5q1rXW32AL2nHjfAwx-svFi5--lXY%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 38.4096ms
2022-04-30 16:26:53.515 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 16:26:53.750 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 16:26:53.780 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 268.3061ms
2022-04-30 16:26:53.850 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 16:26:53.855 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 16:26:53.866 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 15.5107ms
2022-04-30 16:26:54.911 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/authorize?response_type=code&state=VRbZWKvT5Ny9EsxVGUH2dQ&code_challenge=LqLWCCB5pvOE0pBWdHLqWGYFgesjTkc8EDHjalYfc3g&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 16:26:54.916 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 16:26:54.918 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 16:26:54.920 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/authorize?response_type=code&state=VRbZWKvT5Ny9EsxVGUH2dQ&code_challenge=LqLWCCB5pvOE0pBWdHLqWGYFgesjTkc8EDHjalYfc3g&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 9.4142ms
2022-04-30 16:26:54.933 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DVRbZWKvT5Ny9EsxVGUH2dQ%26code_challenge%3DLqLWCCB5pvOE0pBWdHLqWGYFgesjTkc8EDHjalYfc3g%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:26:54.941 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:26:54.943 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:26:54.955 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:26:54.957 +03:00 [INF] Executed ViewResult - view Login executed in 2.5417ms.
2022-04-30 16:26:54.959 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 5.0636ms
2022-04-30 16:26:54.962 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:26:54.966 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DVRbZWKvT5Ny9EsxVGUH2dQ%26code_challenge%3DLqLWCCB5pvOE0pBWdHLqWGYFgesjTkc8EDHjalYfc3g%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 33.3533ms
2022-04-30 16:26:57.344 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DVRbZWKvT5Ny9EsxVGUH2dQ%26code_challenge%3DLqLWCCB5pvOE0pBWdHLqWGYFgesjTkc8EDHjalYfc3g%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:26:57.346 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:26:57.348 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:26:57.351 +03:00 [INF] Executing ViewResult, running view Register.
2022-04-30 16:26:57.352 +03:00 [INF] Executed ViewResult - view Register executed in 1.5161ms.
2022-04-30 16:26:57.354 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 3.3997ms
2022-04-30 16:26:57.356 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:26:57.358 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DVRbZWKvT5Ny9EsxVGUH2dQ%26code_challenge%3DLqLWCCB5pvOE0pBWdHLqWGYFgesjTkc8EDHjalYfc3g%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 13.9117ms
2022-04-30 16:27:09.583 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 16:27:09.585 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 16:27:09.587 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.9341ms
2022-04-30 16:27:09.617 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 16:27:09.619 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 16:27:09.623 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.4284ms
2022-04-30 16:27:10.828 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/authorize?response_type=code&state=OrBctFXzJoSJ240518b1cw&code_challenge=9DoaBnuzs8Mj3DPoeCA1yPV5cmzOYE2COiTfXHoHlVU&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 16:27:10.831 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 16:27:10.833 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 16:27:10.834 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/authorize?response_type=code&state=OrBctFXzJoSJ240518b1cw&code_challenge=9DoaBnuzs8Mj3DPoeCA1yPV5cmzOYE2COiTfXHoHlVU&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 6.3106ms
2022-04-30 16:27:10.859 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DOrBctFXzJoSJ240518b1cw%26code_challenge%3D9DoaBnuzs8Mj3DPoeCA1yPV5cmzOYE2COiTfXHoHlVU%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:27:10.862 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:27:10.865 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:27:10.871 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:27:10.875 +03:00 [INF] Executed ViewResult - view Login executed in 3.976ms.
2022-04-30 16:27:10.877 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 6.3101ms
2022-04-30 16:27:10.879 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:27:10.882 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DOrBctFXzJoSJ240518b1cw%26code_challenge%3D9DoaBnuzs8Mj3DPoeCA1yPV5cmzOYE2COiTfXHoHlVU%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 22.6820ms
2022-04-30 16:27:12.895 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DOrBctFXzJoSJ240518b1cw%26code_challenge%3D9DoaBnuzs8Mj3DPoeCA1yPV5cmzOYE2COiTfXHoHlVU%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:27:12.897 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:27:12.898 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:27:12.901 +03:00 [INF] Executing ViewResult, running view Register.
2022-04-30 16:27:12.903 +03:00 [INF] Executed ViewResult - view Register executed in 1.5169ms.
2022-04-30 16:27:12.905 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 3.6192ms
2022-04-30 16:27:12.907 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:27:12.911 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DOrBctFXzJoSJ240518b1cw%26code_challenge%3D9DoaBnuzs8Mj3DPoeCA1yPV5cmzOYE2COiTfXHoHlVU%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 15.7787ms
2022-04-30 16:30:06.356 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 16:30:06.357 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 16:30:06.360 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.9768ms
2022-04-30 16:30:06.386 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 16:30:06.389 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 16:30:06.391 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.1563ms
2022-04-30 16:30:07.034 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/authorize?response_type=code&state=E8pC7pMhaT1ssYhr3iM3Sw&code_challenge=NryhfWbjzO-z29_vffeFemw_um6zKka3d4jcbFm2p4A&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 16:30:07.038 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 16:30:07.043 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 16:30:07.044 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/authorize?response_type=code&state=E8pC7pMhaT1ssYhr3iM3Sw&code_challenge=NryhfWbjzO-z29_vffeFemw_um6zKka3d4jcbFm2p4A&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 10.4871ms
2022-04-30 16:30:07.052 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DE8pC7pMhaT1ssYhr3iM3Sw%26code_challenge%3DNryhfWbjzO-z29_vffeFemw_um6zKka3d4jcbFm2p4A%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:30:07.055 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:30:07.056 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:30:07.060 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:30:07.063 +03:00 [INF] Executed ViewResult - view Login executed in 2.1975ms.
2022-04-30 16:30:07.068 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 8.4964ms
2022-04-30 16:30:07.072 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:30:07.074 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DE8pC7pMhaT1ssYhr3iM3Sw%26code_challenge%3DNryhfWbjzO-z29_vffeFemw_um6zKka3d4jcbFm2p4A%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 21.8178ms
2022-04-30 16:40:59.287 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:40:59.555 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 16:40:59.567 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 16:40:59.574 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-30 16:40:59.581 +03:00 [INF] Initialization DB done
2022-04-30 16:40:59.634 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-30 16:40:59.766 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-30 16:40:59.794 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-30 16:40:59.810 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-30 16:41:00.189 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-30 16:41:00.190 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-30 16:41:00.192 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 16:41:00.193 +03:00 [INF] Hosting environment: Development
2022-04-30 16:41:00.195 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-30 16:41:12.797 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 16:41:12.906 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 16:41:12.991 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 195.1207ms
2022-04-30 16:41:13.028 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 16:41:13.036 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 16:41:13.104 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 75.8557ms
2022-04-30 16:41:17.549 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=CPPv5IHgFADOov08r-IOSw&code_challenge=CiH3661E_4MxbH-UTaW5yPQRXi8uqi_h3Bgn2TBcnvg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 16:41:17.615 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 16:41:17.737 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 16:41:17.750 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=CPPv5IHgFADOov08r-IOSw&code_challenge=CiH3661E_4MxbH-UTaW5yPQRXi8uqi_h3Bgn2TBcnvg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 200.8083ms
2022-04-30 16:41:17.753 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DCPPv5IHgFADOov08r-IOSw%26code_challenge%3DCiH3661E_4MxbH-UTaW5yPQRXi8uqi_h3Bgn2TBcnvg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:41:17.765 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:41:17.790 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:41:17.827 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:41:17.927 +03:00 [INF] Executed ViewResult - view Login executed in 100.8362ms.
2022-04-30 16:41:17.930 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 136.0041ms
2022-04-30 16:41:17.932 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:41:17.937 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DCPPv5IHgFADOov08r-IOSw%26code_challenge%3DCiH3661E_4MxbH-UTaW5yPQRXi8uqi_h3Bgn2TBcnvg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 183.9499ms
2022-04-30 16:41:17.995 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 16:41:17.999 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 3.6138ms
2022-04-30 16:41:40.037 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 586
2022-04-30 16:41:40.046 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:41:40.047 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:41:40.060 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:41:40.156 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:41:40.703 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedUserName_0='?' (Size = 7)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:41:40.712 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:41:40.718 +03:00 [INF] Executed ViewResult - view Login executed in 6.0586ms.
2022-04-30 16:41:40.719 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 656.7281ms
2022-04-30 16:41:40.721 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:41:40.724 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 586 - 200 - text/html;+charset=utf-8 686.4267ms
2022-04-30 16:41:43.884 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DCPPv5IHgFADOov08r-IOSw%26code_challenge%3DCiH3661E_4MxbH-UTaW5yPQRXi8uqi_h3Bgn2TBcnvg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:41:43.890 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:41:43.892 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:41:43.908 +03:00 [INF] Executing ViewResult, running view Register.
2022-04-30 16:41:43.922 +03:00 [INF] Executed ViewResult - view Register executed in 13.9714ms.
2022-04-30 16:41:43.923 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 29.1319ms
2022-04-30 16:41:43.925 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:41:43.927 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DCPPv5IHgFADOov08r-IOSw%26code_challenge%3DCiH3661E_4MxbH-UTaW5yPQRXi8uqi_h3Bgn2TBcnvg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 42.8234ms
2022-04-30 16:42:02.679 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Register application/x-www-form-urlencoded 616
2022-04-30 16:42:02.681 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:42:02.683 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:42:02.687 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Auth.Identity.ViewModel.RegisterViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:42:12.073 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:42:12.079 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:42:12.087 +03:00 [WRN] User validation failed: InvalidEmail.
2022-04-30 16:42:12.864 +03:00 [INF] Executing ViewResult, running view Register.
2022-04-30 16:42:12.873 +03:00 [INF] Executed ViewResult - view Register executed in 8.84ms.
2022-04-30 16:42:12.875 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 10185.5474ms
2022-04-30 16:42:12.880 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:42:12.882 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Register application/x-www-form-urlencoded 616 - 200 - text/html;+charset=utf-8 10203.4931ms
2022-04-30 16:42:36.792 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DCPPv5IHgFADOov08r-IOSw%26code_challenge%3DCiH3661E_4MxbH-UTaW5yPQRXi8uqi_h3Bgn2TBcnvg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:42:36.799 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:36.801 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:42:36.807 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:42:36.812 +03:00 [INF] Executed ViewResult - view Login executed in 4.9312ms.
2022-04-30 16:42:36.813 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 7.3155ms
2022-04-30 16:42:36.815 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:36.818 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DCPPv5IHgFADOov08r-IOSw%26code_challenge%3DCiH3661E_4MxbH-UTaW5yPQRXi8uqi_h3Bgn2TBcnvg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 25.7391ms
2022-04-30 16:42:39.165 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 16:42:39.170 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:42:39.171 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:39.173 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:42:39.177 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:42:39.180 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:42:39.186 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:42:39.187 +03:00 [INF] Executed ViewResult - view Login executed in 1.743ms.
2022-04-30 16:42:39.189 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 12.7004ms
2022-04-30 16:42:39.190 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:39.191 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 200 - text/html;+charset=utf-8 26.1555ms
2022-04-30 16:42:41.555 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 16:42:41.558 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:42:41.560 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:41.561 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:42:41.564 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:42:41.569 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:42:41.572 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:42:41.574 +03:00 [INF] Executed ViewResult - view Login executed in 1.5911ms.
2022-04-30 16:42:41.575 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 11.7395ms
2022-04-30 16:42:41.577 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:41.578 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 200 - text/html;+charset=utf-8 23.9549ms
2022-04-30 16:42:43.005 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 16:42:43.007 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:42:43.008 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:43.009 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:42:43.016 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:42:43.020 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:42:43.023 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:42:43.025 +03:00 [INF] Executed ViewResult - view Login executed in 1.6099ms.
2022-04-30 16:42:43.028 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 13.6247ms
2022-04-30 16:42:43.031 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:43.034 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 200 - text/html;+charset=utf-8 28.8516ms
2022-04-30 16:42:43.971 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 16:42:43.974 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:42:43.975 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:43.977 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:42:43.980 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:42:43.983 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:42:43.991 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:42:43.993 +03:00 [INF] Executed ViewResult - view Login executed in 1.9382ms.
2022-04-30 16:42:43.995 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 15.4423ms
2022-04-30 16:42:43.997 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:44.000 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 200 - text/html;+charset=utf-8 28.1663ms
2022-04-30 16:42:44.967 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 16:42:44.970 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:42:44.972 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:44.974 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:42:44.980 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:42:44.983 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:42:44.989 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:42:44.990 +03:00 [INF] Executed ViewResult - view Login executed in 1.5591ms.
2022-04-30 16:42:44.992 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 13.0949ms
2022-04-30 16:42:44.993 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:44.995 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 200 - text/html;+charset=utf-8 27.7349ms
2022-04-30 16:42:47.297 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 16:42:47.299 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:42:47.301 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:47.302 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:42:47.305 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:42:47.307 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:42:47.310 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:42:47.311 +03:00 [INF] Executed ViewResult - view Login executed in 1.7936ms.
2022-04-30 16:42:47.316 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 11.0691ms
2022-04-30 16:42:47.322 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:47.323 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 200 - text/html;+charset=utf-8 26.6231ms
2022-04-30 16:42:48.860 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 16:42:48.862 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:42:48.865 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:48.868 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:42:48.870 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:42:48.873 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:42:48.875 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:42:48.877 +03:00 [INF] Executed ViewResult - view Login executed in 1.4817ms.
2022-04-30 16:42:48.879 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 9.1319ms
2022-04-30 16:42:48.882 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:48.884 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 200 - text/html;+charset=utf-8 23.9925ms
2022-04-30 16:42:49.922 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 16:42:49.924 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:42:49.925 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:49.927 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:42:49.933 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:42:49.937 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:42:49.941 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:42:49.945 +03:00 [INF] Executed ViewResult - view Login executed in 3.4166ms.
2022-04-30 16:42:49.947 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 14.3893ms
2022-04-30 16:42:49.949 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:49.952 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 200 - text/html;+charset=utf-8 29.5114ms
2022-04-30 16:42:51.135 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 16:42:51.137 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:42:51.139 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:51.140 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:42:51.142 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:42:51.145 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:42:51.152 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:42:51.154 +03:00 [INF] Executed ViewResult - view Login executed in 2.9331ms.
2022-04-30 16:42:51.156 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 14.5642ms
2022-04-30 16:42:51.159 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:42:51.161 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 200 - text/html;+charset=utf-8 25.5432ms
2022-04-30 16:43:39.333 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 16:43:39.347 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:43:39.349 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:43:39.355 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:43:39.360 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:43:39.363 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:43:39.370 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:43:39.372 +03:00 [INF] Executed ViewResult - view Login executed in 1.674ms.
2022-04-30 16:43:39.373 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 14.0509ms
2022-04-30 16:43:39.375 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:43:39.377 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 200 - text/html;+charset=utf-8 44.2014ms
2022-04-30 16:44:15.964 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 595
2022-04-30 16:44:15.970 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:44:15.971 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:44:15.972 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:44:17.652 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:44:17.659 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 11)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:44:18.111 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:44:18.113 +03:00 [INF] Executed ViewResult - view Login executed in 2.5506ms.
2022-04-30 16:44:18.115 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 2139.1352ms
2022-04-30 16:44:18.117 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:44:18.123 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 595 - 200 - text/html;+charset=utf-8 2159.9629ms
2022-04-30 16:44:26.162 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 16:44:26.165 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:44:26.167 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:44:26.168 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:44:27.526 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:44:27.532 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:44:28.022 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:44:28.024 +03:00 [INF] Executed ViewResult - view Login executed in 2.5601ms.
2022-04-30 16:44:28.028 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 1853.6435ms
2022-04-30 16:44:28.031 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:44:28.033 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 200 - text/html;+charset=utf-8 1871.0320ms
2022-04-30 16:44:37.071 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 16:44:37.074 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:44:37.075 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:44:37.077 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:44:45.810 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:44:45.815 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:44:51.212 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:44:51.215 +03:00 [INF] Executed ViewResult - view Login executed in 3.7521ms.
2022-04-30 16:44:51.217 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 14138.1107ms
2022-04-30 16:44:51.219 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:44:51.222 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 200 - text/html;+charset=utf-8 14151.1941ms
2022-04-30 16:44:53.969 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DCPPv5IHgFADOov08r-IOSw%26code_challenge%3DCiH3661E_4MxbH-UTaW5yPQRXi8uqi_h3Bgn2TBcnvg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:44:53.972 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:44:53.974 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:44:53.977 +03:00 [INF] Executing ViewResult, running view Register.
2022-04-30 16:44:53.980 +03:00 [INF] Executed ViewResult - view Register executed in 2.1743ms.
2022-04-30 16:44:53.982 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 4.7966ms
2022-04-30 16:44:53.987 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:44:53.989 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DCPPv5IHgFADOov08r-IOSw%26code_challenge%3DCiH3661E_4MxbH-UTaW5yPQRXi8uqi_h3Bgn2TBcnvg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 19.8982ms
2022-04-30 16:44:57.322 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Register application/x-www-form-urlencoded 609
2022-04-30 16:44:57.323 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:44:57.325 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:44:57.326 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Auth.Identity.ViewModel.RegisterViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:44:57.329 +03:00 [INF] Executing ViewResult, running view Register.
2022-04-30 16:44:57.334 +03:00 [INF] Executed ViewResult - view Register executed in 4.9226ms.
2022-04-30 16:44:57.336 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 7.7665ms
2022-04-30 16:44:57.339 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:44:57.341 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Register application/x-www-form-urlencoded 609 - 200 - text/html;+charset=utf-8 19.9420ms
2022-04-30 16:45:04.596 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Register application/x-www-form-urlencoded 616
2022-04-30 16:45:04.600 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:45:04.602 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:45:04.603 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Auth.Identity.ViewModel.RegisterViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:45:14.624 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:45:14.628 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:45:14.632 +03:00 [WRN] User validation failed: InvalidEmail.
2022-04-30 16:45:18.781 +03:00 [INF] Executing ViewResult, running view Register.
2022-04-30 16:45:18.783 +03:00 [INF] Executed ViewResult - view Register executed in 2.1987ms.
2022-04-30 16:45:18.785 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 14176.2646ms
2022-04-30 16:45:18.787 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:45:18.790 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Register application/x-www-form-urlencoded 616 - 200 - text/html;+charset=utf-8 14194.5791ms
2022-04-30 16:45:32.099 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Register application/x-www-form-urlencoded 616
2022-04-30 16:45:32.103 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:45:32.105 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:45:32.107 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Auth.Identity.ViewModel.RegisterViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:45:34.509 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:45:34.513 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:45:34.516 +03:00 [WRN] User validation failed: InvalidEmail.
2022-04-30 16:48:39.232 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:48:39.442 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 16:48:39.453 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 16:48:39.459 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-30 16:48:39.464 +03:00 [INF] Initialization DB done
2022-04-30 16:48:39.505 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-30 16:48:39.585 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-30 16:48:39.603 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-30 16:48:39.613 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-30 16:48:39.817 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-30 16:48:39.818 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-30 16:48:39.820 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 16:48:39.821 +03:00 [INF] Hosting environment: Development
2022-04-30 16:48:39.822 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-30 16:49:04.304 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 16:49:04.403 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 16:49:04.467 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 165.3678ms
2022-04-30 16:49:04.495 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 16:49:04.507 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 16:49:04.543 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 47.9971ms
2022-04-30 16:49:05.566 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=jwDB9_a0ccrwmQrTfYZ3-g&code_challenge=TRKO2Cr4tBXAEQFPtWr56wze5m4-e4ffy0hh3yyk-5g&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 16:49:05.595 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 16:49:05.676 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 16:49:05.688 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=jwDB9_a0ccrwmQrTfYZ3-g&code_challenge=TRKO2Cr4tBXAEQFPtWr56wze5m4-e4ffy0hh3yyk-5g&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 121.6968ms
2022-04-30 16:49:05.690 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DjwDB9_a0ccrwmQrTfYZ3-g%26code_challenge%3DTRKO2Cr4tBXAEQFPtWr56wze5m4-e4ffy0hh3yyk-5g%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:49:05.700 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:49:05.725 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:49:05.758 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:49:05.844 +03:00 [INF] Executed ViewResult - view Login executed in 85.409ms.
2022-04-30 16:49:05.847 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 118.9574ms
2022-04-30 16:49:05.849 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:49:05.854 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DjwDB9_a0ccrwmQrTfYZ3-g%26code_challenge%3DTRKO2Cr4tBXAEQFPtWr56wze5m4-e4ffy0hh3yyk-5g%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 163.6572ms
2022-04-30 16:49:05.905 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 16:49:05.908 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 3.5205ms
2022-04-30 16:49:12.021 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DjwDB9_a0ccrwmQrTfYZ3-g%26code_challenge%3DTRKO2Cr4tBXAEQFPtWr56wze5m4-e4ffy0hh3yyk-5g%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:49:12.024 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:49:12.027 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:49:12.036 +03:00 [INF] Executing ViewResult, running view Register.
2022-04-30 16:49:12.053 +03:00 [INF] Executed ViewResult - view Register executed in 17.3254ms.
2022-04-30 16:49:12.055 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 22.1643ms
2022-04-30 16:49:12.057 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:49:12.065 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DjwDB9_a0ccrwmQrTfYZ3-g%26code_challenge%3DTRKO2Cr4tBXAEQFPtWr56wze5m4-e4ffy0hh3yyk-5g%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 43.7081ms
2022-04-30 16:49:27.981 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Register application/x-www-form-urlencoded 644
2022-04-30 16:49:27.988 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:49:27.989 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:49:28.002 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Auth.Identity.ViewModel.RegisterViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:49:36.191 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:49:36.525 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:49:36.541 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 19)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2022-04-30 16:49:36.831 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (DbType = Int32), @p2='?' (Size = 36), @p3='?' (Size = 19), @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 19), @p10='?' (Size = 9), @p11='?' (Size = 84), @p12='?', @p13='?' (DbType = Boolean), @p14='?' (Size = 32), @p15='?' (DbType = Boolean), @p16='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "AccessFailedCount", "ConcurrencyStamp", "Email", "EmailConfirmed", "FirstName", "LastName", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "PhoneNumber", "PhoneNumberConfirmed", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2022-04-30 16:49:40.979 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 16:49:41.006 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 16:49:41.018 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 16:49:41.021 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=jwDB9_a0ccrwmQrTfYZ3-g&code_challenge=TRKO2Cr4tBXAEQFPtWr56wze5m4-e4ffy0hh3yyk-5g&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 16:49:41.022 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 13017.2648ms
2022-04-30 16:49:41.023 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-30 16:49:41.025 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Register application/x-www-form-urlencoded 644 - 302 0 - 13044.9334ms
2022-04-30 16:49:41.028 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=jwDB9_a0ccrwmQrTfYZ3-g&code_challenge=TRKO2Cr4tBXAEQFPtWr56wze5m4-e4ffy0hh3yyk-5g&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 16:49:41.035 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 16:49:41.173 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 16:49:41.177 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=jwDB9_a0ccrwmQrTfYZ3-g&code_challenge=TRKO2Cr4tBXAEQFPtWr56wze5m4-e4ffy0hh3yyk-5g&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 148.9358ms
2022-04-30 16:49:41.225 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 16:49:41.227 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 16:49:41.230 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.5846ms
2022-04-30 16:49:41.232 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 16:49:41.234 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 16:49:41.236 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.8180ms
2022-04-30 16:49:41.258 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 16:49:41.261 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 16:49:41.311 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****C333","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"5F326215C886AB7CF0421BAD45BDE98B38EB49AE5AA82E99381106E44FAAC333","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"w1y5yC56mU1P-l2w0zM2arhOHWwFUzmtN9EobeMe1_k","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 16:49:41.392 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:49:41.405 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 16:49:41.522 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 264.0104ms
2022-04-30 16:49:41.548 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 16:49:41.550 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 16:49:41.552 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.3488ms
2022-04-30 16:49:41.553 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 16:49:41.555 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 16:49:41.557 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.2812ms
2022-04-30 16:49:41.568 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 16:49:41.570 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 16:49:41.627 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:49:41.634 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 16:49:41.642 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 16:49:41.644 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 75.9510ms
2022-04-30 16:52:14.657 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 16:52:14.699 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 16:52:14.729 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 71.0091ms
2022-04-30 16:52:14.792 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 16:52:14.813 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 16:52:14.829 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 35.8663ms
2022-04-30 16:52:16.732 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=YGW3Fw2zS_oXGFXvXgaIDw&code_challenge=eOIqImpr_6Ht8FcOMnR2DzPh4M20LDmFaw-C_vQ2buY&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 16:52:16.759 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 16:52:16.769 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 16:52:16.778 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=YGW3Fw2zS_oXGFXvXgaIDw&code_challenge=eOIqImpr_6Ht8FcOMnR2DzPh4M20LDmFaw-C_vQ2buY&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 45.5790ms
2022-04-30 16:52:16.788 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DYGW3Fw2zS_oXGFXvXgaIDw%26code_challenge%3DeOIqImpr_6Ht8FcOMnR2DzPh4M20LDmFaw-C_vQ2buY%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 16:52:16.795 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:52:16.797 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:52:16.825 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 16:52:16.830 +03:00 [INF] Executed ViewResult - view Login executed in 5.523ms.
2022-04-30 16:52:16.853 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 29.2378ms
2022-04-30 16:52:16.856 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:52:16.858 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DYGW3Fw2zS_oXGFXvXgaIDw%26code_challenge%3DeOIqImpr_6Ht8FcOMnR2DzPh4M20LDmFaw-C_vQ2buY%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 69.7093ms
2022-04-30 16:52:17.161 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 16:52:17.163 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 1.5840ms
2022-04-30 16:52:30.881 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 16:52:30.884 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 16:52:30.886 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:52:30.892 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 16:52:32.994 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:52:32.998 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:52:34.552 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 16:52:34.578 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 16:52:34.584 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 16:52:34.587 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 16:52:34.588 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=YGW3Fw2zS_oXGFXvXgaIDw&code_challenge=eOIqImpr_6Ht8FcOMnR2DzPh4M20LDmFaw-C_vQ2buY&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 16:52:34.593 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 3698.0194ms
2022-04-30 16:52:34.595 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 16:52:34.596 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 3715.2168ms
2022-04-30 16:52:34.599 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=YGW3Fw2zS_oXGFXvXgaIDw&code_challenge=eOIqImpr_6Ht8FcOMnR2DzPh4M20LDmFaw-C_vQ2buY&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 16:52:34.602 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 16:52:34.611 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 16:52:34.613 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=YGW3Fw2zS_oXGFXvXgaIDw&code_challenge=eOIqImpr_6Ht8FcOMnR2DzPh4M20LDmFaw-C_vQ2buY&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 14.6392ms
2022-04-30 16:52:34.656 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 16:52:34.657 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 16:52:34.659 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.1521ms
2022-04-30 16:52:34.660 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 16:52:34.662 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 16:52:34.663 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.7802ms
2022-04-30 16:52:34.682 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 16:52:34.684 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 16:52:34.686 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****C2C3","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"5A279D50D8AF774A5806D752C1EAE9A0EA1FCAA671CA49CFDA113469EF94C2C3","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"QQH3sU4GmK_bToDXJ5jCkSPYduNlH49WJtfGIQjFMwg","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 16:52:34.703 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:52:34.706 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 16:52:34.712 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 29.5616ms
2022-04-30 16:52:34.735 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 16:52:34.736 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 16:52:34.738 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 2.6198ms
2022-04-30 16:52:34.739 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 16:52:34.740 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 16:52:34.742 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.6037ms
2022-04-30 16:52:34.754 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 16:52:34.756 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 16:52:34.758 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 16:52:34.764 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 16:52:34.769 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 16:52:34.770 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 15.6561ms
2022-04-30 17:12:00.155 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:12:00.561 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 17:12:00.579 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 17:12:00.587 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-30 17:12:00.594 +03:00 [INF] Initialization DB done
2022-04-30 17:12:00.673 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-30 17:12:01.051 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-30 17:12:01.119 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-30 17:12:01.143 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-30 17:12:01.787 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-30 17:12:01.791 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-30 17:12:01.792 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 17:12:01.794 +03:00 [INF] Hosting environment: Development
2022-04-30 17:12:01.795 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-30 17:12:02.366 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:12:02.484 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:12:02.557 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 197.9497ms
2022-04-30 17:12:02.581 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:12:02.589 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:12:02.642 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 61.1914ms
2022-04-30 17:12:04.368 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=4bUapICRH2MG8b_GYQBJtg&code_challenge=gShX4Lrmuyda2GKAF5SSvwcmkU2AhJ3azjjVtko8urg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:12:04.547 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 17:12:04.747 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 17:12:04.758 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=4bUapICRH2MG8b_GYQBJtg&code_challenge=gShX4Lrmuyda2GKAF5SSvwcmkU2AhJ3azjjVtko8urg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 389.6179ms
2022-04-30 17:12:04.761 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3D4bUapICRH2MG8b_GYQBJtg%26code_challenge%3DgShX4Lrmuyda2GKAF5SSvwcmkU2AhJ3azjjVtko8urg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 17:12:04.768 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:12:04.793 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:12:04.843 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 17:12:04.933 +03:00 [INF] Executed ViewResult - view Login executed in 90.2164ms.
2022-04-30 17:12:04.950 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 152.504ms
2022-04-30 17:12:04.953 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:12:04.956 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3D4bUapICRH2MG8b_GYQBJtg%26code_challenge%3DgShX4Lrmuyda2GKAF5SSvwcmkU2AhJ3azjjVtko8urg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 195.0059ms
2022-04-30 17:12:05.007 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 17:12:05.013 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 6.5409ms
2022-04-30 17:12:08.919 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 17:12:08.931 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:12:08.934 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:12:08.948 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:12:13.444 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:12:13.766 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:12:13.842 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:12:13.919 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 17:12:13.948 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 17:12:13.964 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:12:13.966 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=4bUapICRH2MG8b_GYQBJtg&code_challenge=gShX4Lrmuyda2GKAF5SSvwcmkU2AhJ3azjjVtko8urg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 17:12:13.969 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 5017.5662ms
2022-04-30 17:12:13.970 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:12:13.974 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 5055.3688ms
2022-04-30 17:12:13.977 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=4bUapICRH2MG8b_GYQBJtg&code_challenge=gShX4Lrmuyda2GKAF5SSvwcmkU2AhJ3azjjVtko8urg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:12:13.982 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 17:12:14.080 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:12:14.084 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=4bUapICRH2MG8b_GYQBJtg&code_challenge=gShX4Lrmuyda2GKAF5SSvwcmkU2AhJ3azjjVtko8urg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 107.3672ms
2022-04-30 17:12:14.143 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:12:14.145 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:12:14.149 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 5.1671ms
2022-04-30 17:12:14.150 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:12:14.152 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:12:14.153 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.9936ms
2022-04-30 17:12:14.176 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 17:12:14.179 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:12:14.237 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****8BB1","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"F5E57C44448E7D335D11E5CE630E161512E33331B82ADBB489DED2B1F1FF8BB1","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"_GfuYeubTocK3g80EpnqtYuDkGVYL1ZKTp2DfmuQohE","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:12:14.317 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:12:14.331 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:12:14.413 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 236.9393ms
2022-04-30 17:12:14.439 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:12:14.454 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:12:14.456 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 16.5439ms
2022-04-30 17:12:14.458 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:12:14.461 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:12:14.463 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.3668ms
2022-04-30 17:12:14.471 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 17:12:14.473 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 17:12:14.533 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:12:14.537 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:12:14.541 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 17:12:14.543 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 71.1908ms
2022-04-30 17:12:34.066 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:12:34.068 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:12:34.071 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 5.7123ms
2022-04-30 17:12:34.102 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:12:34.104 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:12:34.106 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.9648ms
2022-04-30 17:12:35.665 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=W_mhJBKyhhzMuKhV1dtiRw&code_challenge=bfmHnRcN2pmjiyil-wsbCbh1TPmCe2SF6jbj-L4kF0g&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:12:35.670 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 17:12:35.672 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 17:12:35.673 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=W_mhJBKyhhzMuKhV1dtiRw&code_challenge=bfmHnRcN2pmjiyil-wsbCbh1TPmCe2SF6jbj-L4kF0g&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 8.2010ms
2022-04-30 17:12:35.677 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DW_mhJBKyhhzMuKhV1dtiRw%26code_challenge%3DbfmHnRcN2pmjiyil-wsbCbh1TPmCe2SF6jbj-L4kF0g%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 17:12:35.682 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:12:35.684 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:12:35.690 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 17:12:35.698 +03:00 [INF] Executed ViewResult - view Login executed in 7.8981ms.
2022-04-30 17:12:35.700 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 13.059ms
2022-04-30 17:12:35.707 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:12:35.715 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DW_mhJBKyhhzMuKhV1dtiRw%26code_challenge%3DbfmHnRcN2pmjiyil-wsbCbh1TPmCe2SF6jbj-L4kF0g%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 38.0319ms
2022-04-30 17:12:35.770 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 17:12:35.773 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 4.2152ms
2022-04-30 17:12:39.150 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 17:12:39.152 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:12:39.153 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:12:39.155 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:12:39.158 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:12:39.164 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:12:39.169 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:12:39.182 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 17:12:39.187 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 17:12:39.190 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:12:39.192 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=W_mhJBKyhhzMuKhV1dtiRw&code_challenge=bfmHnRcN2pmjiyil-wsbCbh1TPmCe2SF6jbj-L4kF0g&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 17:12:39.194 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 37.0519ms
2022-04-30 17:12:39.196 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:12:39.197 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 47.1470ms
2022-04-30 17:12:39.199 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=W_mhJBKyhhzMuKhV1dtiRw&code_challenge=bfmHnRcN2pmjiyil-wsbCbh1TPmCe2SF6jbj-L4kF0g&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:12:39.201 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 17:12:39.203 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:12:39.205 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=W_mhJBKyhhzMuKhV1dtiRw&code_challenge=bfmHnRcN2pmjiyil-wsbCbh1TPmCe2SF6jbj-L4kF0g&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 5.7623ms
2022-04-30 17:12:39.291 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:12:39.296 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:12:39.299 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 8.4164ms
2022-04-30 17:12:39.306 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:12:39.310 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:12:39.313 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 6.6569ms
2022-04-30 17:12:39.337 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 17:12:39.340 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:12:39.342 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****8E12","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"89C5DB1D7FEFB138599CA04554A873B73F8AE0E43DFC41EF8822BE0E04008E12","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"ogHKvpCvbfSj82oAQT4OB68UaPj7DkAI3Wg9jtfMFvw","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:12:39.360 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:12:39.363 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:12:39.370 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 33.0840ms
2022-04-30 17:12:39.396 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:12:39.398 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:12:39.401 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.3123ms
2022-04-30 17:12:39.402 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:12:39.404 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:12:39.407 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.2667ms
2022-04-30 17:12:39.423 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 17:12:39.424 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 17:12:39.427 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:12:39.430 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:12:39.434 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 17:12:39.437 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 13.3218ms
2022-04-30 17:13:07.449 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:13:07.619 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 17:13:07.630 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 17:13:07.636 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-30 17:13:07.641 +03:00 [INF] Initialization DB done
2022-04-30 17:13:07.683 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-30 17:13:07.757 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-30 17:13:07.770 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-30 17:13:07.782 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-30 17:13:07.991 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-30 17:13:07.992 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-30 17:13:07.993 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 17:13:07.995 +03:00 [INF] Hosting environment: Development
2022-04-30 17:13:07.996 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-30 17:13:16.484 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:13:16.640 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:13:16.743 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 266.9866ms
2022-04-30 17:13:16.771 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:13:16.780 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:13:16.830 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 58.6255ms
2022-04-30 17:13:18.026 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=5yPCmm1sZ8nxNtvPYMiZYQ&code_challenge=o3MSXBXFULpW_6MI3HFZvSHWmWAS7Ien7pL1TVySjlI&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:13:18.101 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 17:13:18.189 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 17:13:18.202 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=5yPCmm1sZ8nxNtvPYMiZYQ&code_challenge=o3MSXBXFULpW_6MI3HFZvSHWmWAS7Ien7pL1TVySjlI&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 175.4662ms
2022-04-30 17:13:18.205 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3D5yPCmm1sZ8nxNtvPYMiZYQ%26code_challenge%3Do3MSXBXFULpW_6MI3HFZvSHWmWAS7Ien7pL1TVySjlI%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 17:13:18.212 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:13:18.230 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:13:18.250 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 17:13:18.346 +03:00 [INF] Executed ViewResult - view Login executed in 93.4962ms.
2022-04-30 17:13:18.353 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 120.3885ms
2022-04-30 17:13:18.355 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:13:18.360 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3D5yPCmm1sZ8nxNtvPYMiZYQ%26code_challenge%3Do3MSXBXFULpW_6MI3HFZvSHWmWAS7Ien7pL1TVySjlI%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 155.3682ms
2022-04-30 17:13:18.414 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 17:13:18.418 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 3.6406ms
2022-04-30 17:13:22.936 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 17:13:22.945 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:13:22.947 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:13:22.958 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:13:22.975 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:13:23.229 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:13:23.297 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:13:23.365 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 17:13:23.386 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 17:13:23.399 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:13:23.401 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=5yPCmm1sZ8nxNtvPYMiZYQ&code_challenge=o3MSXBXFULpW_6MI3HFZvSHWmWAS7Ien7pL1TVySjlI&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 17:13:23.402 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 440.9004ms
2022-04-30 17:13:23.404 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:13:23.407 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 470.8645ms
2022-04-30 17:13:23.409 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=5yPCmm1sZ8nxNtvPYMiZYQ&code_challenge=o3MSXBXFULpW_6MI3HFZvSHWmWAS7Ien7pL1TVySjlI&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:13:23.415 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 17:13:23.482 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:13:23.486 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=5yPCmm1sZ8nxNtvPYMiZYQ&code_challenge=o3MSXBXFULpW_6MI3HFZvSHWmWAS7Ien7pL1TVySjlI&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 77.3894ms
2022-04-30 17:13:23.572 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:13:23.574 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:13:23.576 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.3205ms
2022-04-30 17:13:23.581 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:13:23.584 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:13:23.586 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.8491ms
2022-04-30 17:13:23.606 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 17:13:23.609 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:13:23.654 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****707F","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"EC0A267E339F5313AAA409F33FFA006C5F7356BB28658B2B397FAF4A4AD9707F","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"ZS0Gs0NKWXQzfWTDBrhtD2RemPbEnmUM2nGTwx6ByPs","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:13:23.737 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:13:23.751 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:13:23.818 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 211.8425ms
2022-04-30 17:13:23.843 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:13:23.854 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:13:23.858 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 14.7274ms
2022-04-30 17:13:23.859 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:13:23.861 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:13:23.863 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.7893ms
2022-04-30 17:13:23.871 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 17:13:23.872 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 17:13:23.918 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:13:23.923 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:13:23.926 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 17:13:23.928 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 57.6960ms
2022-04-30 17:13:33.999 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:13:34.001 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:13:34.004 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.9978ms
2022-04-30 17:13:34.039 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:13:34.041 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:13:34.043 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.6672ms
2022-04-30 17:13:35.373 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=8GYTDXMRxJX6AfTTOMHe2g&code_challenge=GnRGfK7mS_VHKIPj1vZ6yh1ydsf_o06Jb3Uty1Q4ric&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:13:35.376 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 17:13:35.379 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 17:13:35.380 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=8GYTDXMRxJX6AfTTOMHe2g&code_challenge=GnRGfK7mS_VHKIPj1vZ6yh1ydsf_o06Jb3Uty1Q4ric&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 7.5621ms
2022-04-30 17:13:35.384 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3D8GYTDXMRxJX6AfTTOMHe2g%26code_challenge%3DGnRGfK7mS_VHKIPj1vZ6yh1ydsf_o06Jb3Uty1Q4ric%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 17:13:35.387 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:13:35.389 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:13:35.397 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 17:13:35.402 +03:00 [INF] Executed ViewResult - view Login executed in 5.4508ms.
2022-04-30 17:13:35.404 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 12.2694ms
2022-04-30 17:13:35.407 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:13:35.416 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3D8GYTDXMRxJX6AfTTOMHe2g%26code_challenge%3DGnRGfK7mS_VHKIPj1vZ6yh1ydsf_o06Jb3Uty1Q4ric%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 31.6245ms
2022-04-30 17:13:35.495 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 17:13:35.497 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 2.9449ms
2022-04-30 17:13:38.049 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 17:13:38.051 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:13:38.053 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:13:38.054 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:13:38.057 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:13:38.061 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:13:38.067 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:13:38.079 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 17:13:38.086 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 17:13:38.090 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:13:38.091 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=8GYTDXMRxJX6AfTTOMHe2g&code_challenge=GnRGfK7mS_VHKIPj1vZ6yh1ydsf_o06Jb3Uty1Q4ric&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 17:13:38.093 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 36.0747ms
2022-04-30 17:13:38.096 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:13:38.098 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 49.6846ms
2022-04-30 17:13:38.101 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=8GYTDXMRxJX6AfTTOMHe2g&code_challenge=GnRGfK7mS_VHKIPj1vZ6yh1ydsf_o06Jb3Uty1Q4ric&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:13:38.104 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 17:13:38.106 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:13:38.107 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=8GYTDXMRxJX6AfTTOMHe2g&code_challenge=GnRGfK7mS_VHKIPj1vZ6yh1ydsf_o06Jb3Uty1Q4ric&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 6.7193ms
2022-04-30 17:13:38.205 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:13:38.207 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:13:38.211 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 6.6526ms
2022-04-30 17:13:38.213 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:13:38.214 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:13:38.216 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.1308ms
2022-04-30 17:13:38.238 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 17:13:38.240 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:13:38.241 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****1F40","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"42EFA6B275C727F18CC0CF705702CBC977E88E1B3EDE843634D6A600365F1F40","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"Jp4OpfZOVX3B9D8j-RPllvL3GNBPav6-AbvOi4NTzZc","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:13:38.255 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:13:38.258 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:13:38.264 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 26.3401ms
2022-04-30 17:13:38.288 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:13:38.289 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:13:38.290 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 2.5467ms
2022-04-30 17:13:38.292 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:13:38.292 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:13:38.294 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.2270ms
2022-04-30 17:13:38.303 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 17:13:38.304 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 17:13:38.306 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:13:38.309 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:13:38.312 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 17:13:38.313 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 9.6223ms
2022-04-30 17:16:24.023 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:16:24.288 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 17:16:24.304 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 17:16:24.312 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-30 17:16:24.319 +03:00 [INF] Initialization DB done
2022-04-30 17:16:24.387 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-30 17:16:24.484 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-30 17:16:24.507 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-30 17:16:24.533 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-30 17:16:25.172 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-30 17:16:25.174 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-30 17:16:25.176 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 17:16:25.181 +03:00 [INF] Hosting environment: Development
2022-04-30 17:16:25.182 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-30 17:16:27.018 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:16:27.091 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:16:27.152 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 138.9583ms
2022-04-30 17:16:27.174 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:16:27.176 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:16:27.214 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 39.6553ms
2022-04-30 17:16:29.097 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=bNC-HxdV6LEJ-5mJHLi6fA&code_challenge=1A66DZnI1GDjImsBIYkdBgqxnnvv-lUMFWcMU7qF5cg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:16:29.127 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 17:16:29.204 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 17:16:29.213 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=bNC-HxdV6LEJ-5mJHLi6fA&code_challenge=1A66DZnI1GDjImsBIYkdBgqxnnvv-lUMFWcMU7qF5cg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 116.5737ms
2022-04-30 17:16:29.216 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DbNC-HxdV6LEJ-5mJHLi6fA%26code_challenge%3D1A66DZnI1GDjImsBIYkdBgqxnnvv-lUMFWcMU7qF5cg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 17:16:29.223 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:16:29.242 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:16:29.263 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 17:16:29.332 +03:00 [INF] Executed ViewResult - view Login executed in 66.1585ms.
2022-04-30 17:16:29.336 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 90.2053ms
2022-04-30 17:16:29.339 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:16:29.344 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DbNC-HxdV6LEJ-5mJHLi6fA%26code_challenge%3D1A66DZnI1GDjImsBIYkdBgqxnnvv-lUMFWcMU7qF5cg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 128.5372ms
2022-04-30 17:16:29.393 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 17:16:29.397 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 3.6526ms
2022-04-30 17:16:35.345 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 17:16:35.351 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:16:35.354 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:16:35.369 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:16:35.388 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:16:35.647 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:16:35.720 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:16:35.781 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 17:16:35.805 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 17:16:35.818 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:16:35.820 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=bNC-HxdV6LEJ-5mJHLi6fA&code_challenge=1A66DZnI1GDjImsBIYkdBgqxnnvv-lUMFWcMU7qF5cg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 17:16:35.822 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 448.4311ms
2022-04-30 17:16:35.824 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:16:35.828 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 483.6296ms
2022-04-30 17:16:35.830 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=bNC-HxdV6LEJ-5mJHLi6fA&code_challenge=1A66DZnI1GDjImsBIYkdBgqxnnvv-lUMFWcMU7qF5cg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:16:35.835 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 17:16:35.902 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:16:35.905 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=bNC-HxdV6LEJ-5mJHLi6fA&code_challenge=1A66DZnI1GDjImsBIYkdBgqxnnvv-lUMFWcMU7qF5cg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 75.5573ms
2022-04-30 17:16:36.016 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:16:36.018 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:16:36.020 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.1248ms
2022-04-30 17:16:36.021 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:16:36.026 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:16:36.027 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.6356ms
2022-04-30 17:16:36.050 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 17:16:36.053 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:16:36.112 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****82F1","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"CF4CD36145B089C9CD0A91E397CB2B3B70039408699FEA2F68E0FB3CB78282F1","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"qd2HvQHCt3V7z1BtunL40SrG1SXkj5QXTM-Gd_4QvmU","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:16:36.195 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:16:36.205 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:16:36.320 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 270.0425ms
2022-04-30 17:16:36.352 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:16:36.362 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:16:36.365 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 12.7437ms
2022-04-30 17:16:36.366 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:16:36.368 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:16:36.369 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.2383ms
2022-04-30 17:16:36.377 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 17:16:36.379 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 17:16:36.426 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:16:36.429 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:16:36.432 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 17:16:36.434 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 56.4155ms
2022-04-30 17:16:43.532 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:16:43.536 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:16:43.547 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 15.1194ms
2022-04-30 17:16:43.667 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:16:43.763 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:16:43.788 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 121.4837ms
2022-04-30 17:16:45.330 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=xR4mCCVnb_QO-MbkI_EfUw&code_challenge=FQ3u8Zl5IWvqcBwEUOGQ1NL74NCd3-JyWaYx6JYHf6U&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:16:45.336 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 17:16:45.339 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 17:16:45.341 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=xR4mCCVnb_QO-MbkI_EfUw&code_challenge=FQ3u8Zl5IWvqcBwEUOGQ1NL74NCd3-JyWaYx6JYHf6U&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 10.2606ms
2022-04-30 17:16:45.354 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DxR4mCCVnb_QO-MbkI_EfUw%26code_challenge%3DFQ3u8Zl5IWvqcBwEUOGQ1NL74NCd3-JyWaYx6JYHf6U%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 17:16:45.357 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:16:45.358 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:16:45.367 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 17:16:45.371 +03:00 [INF] Executed ViewResult - view Login executed in 4.8433ms.
2022-04-30 17:16:45.373 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 8.9118ms
2022-04-30 17:16:45.375 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:16:45.382 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DxR4mCCVnb_QO-MbkI_EfUw%26code_challenge%3DFQ3u8Zl5IWvqcBwEUOGQ1NL74NCd3-JyWaYx6JYHf6U%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 27.7672ms
2022-04-30 17:16:45.438 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 17:16:45.440 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 1.4300ms
2022-04-30 17:37:19.693 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:37:19.927 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 17:37:19.938 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 17:37:19.955 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-30 17:37:19.960 +03:00 [INF] Initialization DB done
2022-04-30 17:37:20.011 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-30 17:37:20.159 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-30 17:37:20.180 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-30 17:37:20.190 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-30 17:37:20.486 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-30 17:37:20.487 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-30 17:37:20.489 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 17:37:20.490 +03:00 [INF] Hosting environment: Development
2022-04-30 17:37:20.492 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-30 17:37:26.102 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:37:26.247 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:37:26.368 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 271.9872ms
2022-04-30 17:37:26.403 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:37:26.407 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:37:26.468 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 65.0339ms
2022-04-30 17:37:28.568 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=IEWwHOQnIb-BETR9vKj_KA&code_challenge=oPzlnj4TkEoElNtiCpFMTe_Dpxd5__ypyManQBoXQ6U&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:37:28.710 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 17:37:28.793 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 17:37:28.806 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=IEWwHOQnIb-BETR9vKj_KA&code_challenge=oPzlnj4TkEoElNtiCpFMTe_Dpxd5__ypyManQBoXQ6U&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 237.8979ms
2022-04-30 17:37:28.808 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DIEWwHOQnIb-BETR9vKj_KA%26code_challenge%3DoPzlnj4TkEoElNtiCpFMTe_Dpxd5__ypyManQBoXQ6U%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 17:37:28.814 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:37:28.838 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:37:28.868 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 17:37:28.947 +03:00 [INF] Executed ViewResult - view Login executed in 78.6066ms.
2022-04-30 17:37:28.950 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 108.2699ms
2022-04-30 17:37:28.953 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:37:28.957 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DIEWwHOQnIb-BETR9vKj_KA%26code_challenge%3DoPzlnj4TkEoElNtiCpFMTe_Dpxd5__ypyManQBoXQ6U%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 148.5525ms
2022-04-30 17:37:29.015 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 17:37:29.022 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 6.8435ms
2022-04-30 17:37:34.788 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 17:37:34.794 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:37:34.796 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:37:34.809 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:37:34.856 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:37:35.247 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:37:35.324 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:37:35.396 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 17:37:35.429 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 17:37:35.440 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:37:35.443 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=IEWwHOQnIb-BETR9vKj_KA&code_challenge=oPzlnj4TkEoElNtiCpFMTe_Dpxd5__ypyManQBoXQ6U&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 17:37:35.444 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 631.1782ms
2022-04-30 17:37:35.446 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:37:35.449 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 661.1743ms
2022-04-30 17:37:35.451 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=IEWwHOQnIb-BETR9vKj_KA&code_challenge=oPzlnj4TkEoElNtiCpFMTe_Dpxd5__ypyManQBoXQ6U&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:37:35.456 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 17:37:35.599 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:37:35.603 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=IEWwHOQnIb-BETR9vKj_KA&code_challenge=oPzlnj4TkEoElNtiCpFMTe_Dpxd5__ypyManQBoXQ6U&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 152.0213ms
2022-04-30 17:37:35.723 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:37:35.725 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:37:35.727 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.6071ms
2022-04-30 17:37:35.729 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:37:35.730 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:37:35.732 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.2603ms
2022-04-30 17:37:35.752 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 17:37:35.755 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:37:35.806 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****544B","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"378684B78C24FFE19B735EEEB62F00600B75EC140D006B941121DF75E2D3544B","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"jFPMEMP9c1cvNXVje5IdXX4uEz9QcENWQbqEV84J2xI","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:37:35.880 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:37:35.891 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:37:36.008 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 255.9208ms
2022-04-30 17:37:36.036 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:37:36.047 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:37:36.050 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 13.7368ms
2022-04-30 17:37:36.051 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:37:36.053 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:37:36.054 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.2274ms
2022-04-30 17:37:36.062 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 17:37:36.064 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 17:37:36.161 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:37:36.166 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:37:36.169 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 17:37:36.171 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 108.3207ms
2022-04-30 17:37:43.738 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 190
2022-04-30 17:37:43.745 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:37:43.758 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"****4CFA","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","refresh_token":"***REDACTED***","scope":"openid profile PollSystemAPI PollSystem.SignalR offline_access","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:37:43.777 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:37:43.781 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:37:43.785 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 190 - 200 - application/json;+charset=UTF-8 47.3809ms
2022-04-30 17:38:18.606 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:38:18.609 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:38:18.611 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.8697ms
2022-04-30 17:38:18.643 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:38:18.646 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:38:18.649 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.5597ms
2022-04-30 17:38:20.029 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=5PdSCaFdChOrVUrpt8PKPw&code_challenge=NCpdk2lsaZHEU7AhI0ACBZlUIBe02eusNLZJcxuBUTM&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:38:20.033 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 17:38:20.035 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 17:38:20.037 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=5PdSCaFdChOrVUrpt8PKPw&code_challenge=NCpdk2lsaZHEU7AhI0ACBZlUIBe02eusNLZJcxuBUTM&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 8.2915ms
2022-04-30 17:38:20.063 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3D5PdSCaFdChOrVUrpt8PKPw%26code_challenge%3DNCpdk2lsaZHEU7AhI0ACBZlUIBe02eusNLZJcxuBUTM%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 17:38:20.065 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:38:20.066 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:38:20.070 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 17:38:20.076 +03:00 [INF] Executed ViewResult - view Login executed in 6.0973ms.
2022-04-30 17:38:20.078 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 10.005ms
2022-04-30 17:38:20.080 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:38:20.082 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3D5PdSCaFdChOrVUrpt8PKPw%26code_challenge%3DNCpdk2lsaZHEU7AhI0ACBZlUIBe02eusNLZJcxuBUTM%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 19.9691ms
2022-04-30 17:38:20.230 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 17:38:20.233 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 14.4613ms
2022-04-30 17:38:22.720 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 17:38:22.722 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:38:22.724 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:38:22.725 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:38:22.730 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:38:22.734 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:38:22.741 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:38:22.751 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 17:38:22.756 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 17:38:22.763 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:38:22.764 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=5PdSCaFdChOrVUrpt8PKPw&code_challenge=NCpdk2lsaZHEU7AhI0ACBZlUIBe02eusNLZJcxuBUTM&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 17:38:22.768 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 40.1569ms
2022-04-30 17:38:22.771 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:38:22.773 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 52.2787ms
2022-04-30 17:38:22.775 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=5PdSCaFdChOrVUrpt8PKPw&code_challenge=NCpdk2lsaZHEU7AhI0ACBZlUIBe02eusNLZJcxuBUTM&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:38:22.777 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 17:38:22.779 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:38:22.781 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=5PdSCaFdChOrVUrpt8PKPw&code_challenge=NCpdk2lsaZHEU7AhI0ACBZlUIBe02eusNLZJcxuBUTM&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 5.8744ms
2022-04-30 17:38:22.875 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:38:22.877 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:38:22.882 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 6.9252ms
2022-04-30 17:38:22.887 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:38:22.888 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:38:22.890 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.7853ms
2022-04-30 17:38:22.914 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 17:38:22.923 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:38:22.925 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****C6AB","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"37EDD42F70BE20B2FFFCD3069D735228B0CFC9ECEE3E37864BDA85EE22CFC6AB","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"X_4P-BukfexqSREaPMsm5jPf-Ylp8STanZiCKFKsIUw","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:38:22.936 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:38:22.939 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:38:22.944 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 29.8172ms
2022-04-30 17:38:22.972 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:38:22.973 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:38:22.975 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 2.7683ms
2022-04-30 17:38:22.976 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:38:22.977 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:38:22.978 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.3473ms
2022-04-30 17:38:22.987 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 17:38:22.988 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 17:38:22.990 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:38:22.993 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:38:22.995 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 17:38:22.996 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 9.1962ms
2022-04-30 17:38:35.543 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 190
2022-04-30 17:38:35.555 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:38:35.558 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"****B499","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","refresh_token":"***REDACTED***","scope":"openid profile PollSystemAPI PollSystem.SignalR offline_access","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:38:35.574 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:38:35.577 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:38:35.583 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 190 - 200 - application/json;+charset=UTF-8 39.3311ms
2022-04-30 17:39:42.701 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:39:42.703 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:39:42.705 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.3346ms
2022-04-30 17:39:42.742 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:39:42.749 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:39:42.751 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 8.9001ms
2022-04-30 17:39:45.081 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=oCfWjxjc4gsUCuxIEbHXPw&code_challenge=h5qm4PcE0dfvMQD0ywcRyHjuc2pmZqiLru_V-_4Arck&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:39:45.088 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 17:39:45.090 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 17:39:45.091 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=oCfWjxjc4gsUCuxIEbHXPw&code_challenge=h5qm4PcE0dfvMQD0ywcRyHjuc2pmZqiLru_V-_4Arck&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 10.2479ms
2022-04-30 17:39:45.095 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DoCfWjxjc4gsUCuxIEbHXPw%26code_challenge%3Dh5qm4PcE0dfvMQD0ywcRyHjuc2pmZqiLru_V-_4Arck%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 17:39:45.097 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:39:45.099 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:39:45.102 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 17:39:45.106 +03:00 [INF] Executed ViewResult - view Login executed in 4.0391ms.
2022-04-30 17:39:45.107 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 6.0143ms
2022-04-30 17:39:45.109 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:39:45.113 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DoCfWjxjc4gsUCuxIEbHXPw%26code_challenge%3Dh5qm4PcE0dfvMQD0ywcRyHjuc2pmZqiLru_V-_4Arck%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 17.8708ms
2022-04-30 17:39:45.298 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 17:39:45.300 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 1.9604ms
2022-04-30 17:39:48.385 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 17:39:48.388 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:39:48.389 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:39:48.390 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:39:48.393 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:39:48.396 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:39:48.401 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:39:48.409 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 17:39:48.414 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 17:39:48.417 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:39:48.418 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=oCfWjxjc4gsUCuxIEbHXPw&code_challenge=h5qm4PcE0dfvMQD0ywcRyHjuc2pmZqiLru_V-_4Arck&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 17:39:48.419 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 27.7904ms
2022-04-30 17:39:48.421 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:39:48.422 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 37.0438ms
2022-04-30 17:39:48.424 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=oCfWjxjc4gsUCuxIEbHXPw&code_challenge=h5qm4PcE0dfvMQD0ywcRyHjuc2pmZqiLru_V-_4Arck&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:39:48.431 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 17:39:48.434 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:39:48.436 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=oCfWjxjc4gsUCuxIEbHXPw&code_challenge=h5qm4PcE0dfvMQD0ywcRyHjuc2pmZqiLru_V-_4Arck&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 11.3283ms
2022-04-30 17:39:48.618 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:39:48.624 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:39:48.626 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 8.6724ms
2022-04-30 17:39:48.628 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:39:48.632 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:39:48.634 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 6.6853ms
2022-04-30 17:39:48.652 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 17:39:48.653 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:39:48.655 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****D957","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"132E9C778059B025A79AF825D0EA070CB3DC082ED087EA74E996033F2821D957","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"eGDvT6GybT0AxjbfNBlw-YnkPXPB3BZ902BNChQxJk0","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:39:48.669 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:39:48.672 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:39:48.677 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 24.8865ms
2022-04-30 17:39:48.709 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:39:48.710 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:39:48.712 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.5120ms
2022-04-30 17:39:48.714 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:39:48.715 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:39:48.716 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.2789ms
2022-04-30 17:39:48.727 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 17:39:48.730 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 17:39:48.732 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:39:48.735 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:39:48.738 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 17:39:48.739 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 11.9096ms
2022-04-30 17:40:00.079 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 190
2022-04-30 17:40:00.081 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:40:00.082 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"****028F","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","refresh_token":"***REDACTED***","scope":"openid profile PollSystemAPI PollSystem.SignalR offline_access","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:40:00.097 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:40:00.101 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:40:00.107 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 190 - 200 - application/json;+charset=UTF-8 27.8273ms
2022-04-30 17:41:32.952 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:41:32.956 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:41:32.970 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 18.0374ms
2022-04-30 17:41:33.028 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:41:33.033 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:41:33.040 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 12.2997ms
2022-04-30 17:41:34.628 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=Le0pvzq3Ya785gDEX4Pofg&code_challenge=zmq8iCNjkpo-JRiGERC23JI6-uM9LFbI25ABOx50Iz4&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:41:34.633 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 17:41:34.635 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 17:41:34.636 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=Le0pvzq3Ya785gDEX4Pofg&code_challenge=zmq8iCNjkpo-JRiGERC23JI6-uM9LFbI25ABOx50Iz4&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 8.0976ms
2022-04-30 17:41:34.639 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DLe0pvzq3Ya785gDEX4Pofg%26code_challenge%3Dzmq8iCNjkpo-JRiGERC23JI6-uM9LFbI25ABOx50Iz4%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 17:41:34.650 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:41:34.651 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:41:34.664 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 17:41:34.669 +03:00 [INF] Executed ViewResult - view Login executed in 5.6366ms.
2022-04-30 17:41:34.678 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 14.8201ms
2022-04-30 17:41:34.686 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:41:34.697 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DLe0pvzq3Ya785gDEX4Pofg%26code_challenge%3Dzmq8iCNjkpo-JRiGERC23JI6-uM9LFbI25ABOx50Iz4%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 57.5566ms
2022-04-30 17:41:34.741 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 17:41:34.765 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 24.4255ms
2022-04-30 17:44:15.018 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:44:15.028 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:44:15.032 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 14.2216ms
2022-04-30 17:44:15.067 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:44:15.169 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:44:15.184 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 117.5171ms
2022-04-30 17:44:16.862 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=I_1twULWGgajamOads117g&code_challenge=irKlWjpBDrVcLdKBAphEWVT96EspPc5kWVsfpyVyxDo&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:44:16.900 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 17:44:16.909 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 17:44:16.914 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=I_1twULWGgajamOads117g&code_challenge=irKlWjpBDrVcLdKBAphEWVT96EspPc5kWVsfpyVyxDo&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 52.6696ms
2022-04-30 17:44:16.920 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DI_1twULWGgajamOads117g%26code_challenge%3DirKlWjpBDrVcLdKBAphEWVT96EspPc5kWVsfpyVyxDo%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 17:44:16.927 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:44:16.929 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:44:16.939 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 17:44:16.943 +03:00 [INF] Executed ViewResult - view Login executed in 3.8937ms.
2022-04-30 17:44:16.946 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 7.3311ms
2022-04-30 17:44:16.952 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:44:16.958 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DI_1twULWGgajamOads117g%26code_challenge%3DirKlWjpBDrVcLdKBAphEWVT96EspPc5kWVsfpyVyxDo%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 38.3317ms
2022-04-30 17:44:17.017 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 17:44:17.019 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 2.0115ms
2022-04-30 17:44:22.877 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 731
2022-04-30 17:44:22.880 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:44:22.881 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:44:22.882 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:44:22.885 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:44:22.888 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:44:22.892 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:44:22.908 +03:00 [WRN] Invalid password for user.
2022-04-30 17:44:22.912 +03:00 [WRN] User failed to provide the correct password.
2022-04-30 17:44:22.913 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 17:44:22.915 +03:00 [INF] Executed ViewResult - view Login executed in 1.8767ms.
2022-04-30 17:44:22.916 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 31.6459ms
2022-04-30 17:44:22.919 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:44:22.920 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 731 - 200 - text/html;+charset=utf-8 43.3809ms
2022-04-30 17:44:29.068 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 17:44:29.071 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:44:29.072 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:44:29.074 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:44:29.079 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:44:29.081 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:44:29.084 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:44:29.096 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 17:44:29.100 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 17:44:29.103 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:44:29.104 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=I_1twULWGgajamOads117g&code_challenge=irKlWjpBDrVcLdKBAphEWVT96EspPc5kWVsfpyVyxDo&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 17:44:29.105 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 27.1709ms
2022-04-30 17:44:29.110 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:44:29.112 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 44.0900ms
2022-04-30 17:44:29.114 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=I_1twULWGgajamOads117g&code_challenge=irKlWjpBDrVcLdKBAphEWVT96EspPc5kWVsfpyVyxDo&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:44:29.117 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 17:44:29.119 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:44:29.120 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=I_1twULWGgajamOads117g&code_challenge=irKlWjpBDrVcLdKBAphEWVT96EspPc5kWVsfpyVyxDo&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 5.8818ms
2022-04-30 17:44:29.202 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:44:29.204 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:44:29.206 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.5442ms
2022-04-30 17:44:29.208 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:44:29.209 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:44:29.215 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 7.2055ms
2022-04-30 17:44:29.241 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 17:44:29.243 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:44:29.246 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****4DD6","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"B78B5CC4FEDD73D431EE0C5B898F197128503D4C72BA510E91D2A07FAA4E4DD6","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"A9Pfpc9_o9bnTh-p9gPr1HXPD4O0iuUKUJ-ESmWtXwE","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:44:29.265 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:44:29.267 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:44:29.272 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 31.2171ms
2022-04-30 17:44:29.301 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:44:29.302 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:44:29.304 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.5705ms
2022-04-30 17:44:29.306 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:44:29.308 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:44:29.312 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.6405ms
2022-04-30 17:44:29.319 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 17:44:29.320 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 17:44:29.322 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:44:29.328 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:44:29.332 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 17:44:29.333 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 13.8761ms
2022-04-30 17:45:12.685 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 190
2022-04-30 17:45:12.692 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:45:12.698 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"****3181","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","refresh_token":"***REDACTED***","scope":"openid profile PollSystemAPI PollSystem.SignalR offline_access","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:45:12.755 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:45:12.762 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:45:12.770 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 190 - 200 - application/json;+charset=UTF-8 84.9996ms
2022-04-30 17:46:00.304 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:46:00.504 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 17:46:00.514 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 17:46:00.519 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-30 17:46:00.525 +03:00 [INF] Initialization DB done
2022-04-30 17:46:00.577 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-30 17:46:00.662 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-30 17:46:00.676 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-30 17:46:00.685 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-30 17:46:00.940 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-30 17:46:00.949 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-30 17:46:00.950 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 17:46:00.951 +03:00 [INF] Hosting environment: Development
2022-04-30 17:46:00.952 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-30 17:46:07.700 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 190
2022-04-30 17:46:07.845 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:46:07.968 +03:00 [WRN] Invalid refresh token
2022-04-30 17:46:07.985 +03:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","refresh_token":"***REDACTED***","scope":"openid profile PollSystemAPI PollSystem.SignalR offline_access","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:46:08.057 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 190 - 400 - application/json;+charset=UTF-8 366.9395ms
2022-04-30 17:46:42.075 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:46:42.117 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:46:42.159 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 84.4229ms
2022-04-30 17:46:42.193 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:46:42.208 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:46:42.240 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 46.7649ms
2022-04-30 17:46:44.000 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=AISV-VAX2qKWXKKDe5BUTg&code_challenge=iR3JMgrUySeu1uLjx3NtC-ozzA_BSgZdorvX1SsaELE&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:46:44.145 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 17:46:44.216 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 17:46:44.244 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=AISV-VAX2qKWXKKDe5BUTg&code_challenge=iR3JMgrUySeu1uLjx3NtC-ozzA_BSgZdorvX1SsaELE&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 244.5736ms
2022-04-30 17:46:44.247 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DAISV-VAX2qKWXKKDe5BUTg%26code_challenge%3DiR3JMgrUySeu1uLjx3NtC-ozzA_BSgZdorvX1SsaELE%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 17:46:44.272 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:46:44.314 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:46:44.363 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 17:46:44.530 +03:00 [INF] Executed ViewResult - view Login executed in 167.9518ms.
2022-04-30 17:46:44.544 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 224.361ms
2022-04-30 17:46:44.546 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:46:44.551 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DAISV-VAX2qKWXKKDe5BUTg%26code_challenge%3DiR3JMgrUySeu1uLjx3NtC-ozzA_BSgZdorvX1SsaELE%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 303.6721ms
2022-04-30 17:46:44.614 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 17:46:44.619 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 6.1405ms
2022-04-30 17:46:47.788 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 17:46:47.795 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:46:47.797 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:46:47.810 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:46:47.843 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:46:48.215 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:46:48.306 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:46:48.408 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 17:46:48.436 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 17:46:48.449 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:46:48.451 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=AISV-VAX2qKWXKKDe5BUTg&code_challenge=iR3JMgrUySeu1uLjx3NtC-ozzA_BSgZdorvX1SsaELE&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 17:46:48.453 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 640.1883ms
2022-04-30 17:46:48.456 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:46:48.460 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 671.7690ms
2022-04-30 17:46:48.461 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=AISV-VAX2qKWXKKDe5BUTg&code_challenge=iR3JMgrUySeu1uLjx3NtC-ozzA_BSgZdorvX1SsaELE&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:46:48.468 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 17:46:48.540 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:46:48.544 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=AISV-VAX2qKWXKKDe5BUTg&code_challenge=iR3JMgrUySeu1uLjx3NtC-ozzA_BSgZdorvX1SsaELE&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 82.9211ms
2022-04-30 17:46:48.626 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:46:48.628 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:46:48.631 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.6672ms
2022-04-30 17:46:48.634 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:46:48.639 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:46:48.643 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 9.0178ms
2022-04-30 17:46:48.669 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 17:46:48.671 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:46:48.703 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****E38D","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"D3EFB29F0AA5C099A094B0018C518C19C0A8D2E01788A157ADBF221B6A21E38D","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"iL6TDH9Vq5BjNpTOqP9PQGscdQ0_OGpRIizWuGYoQ8c","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:46:48.783 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:46:48.795 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:46:48.886 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 216.6016ms
2022-04-30 17:46:48.915 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:46:48.927 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:46:48.929 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 14.1933ms
2022-04-30 17:46:48.931 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:46:48.934 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:46:48.935 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.0887ms
2022-04-30 17:46:48.949 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 17:46:48.950 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 17:46:49.004 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:46:49.011 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:46:49.019 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 17:46:49.022 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 72.7539ms
2022-04-30 17:47:12.492 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:47:12.496 +03:00 [WRN] CorsPolicyService did not allow origin: https://jwt.io
2022-04-30 17:47:12.498 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:47:12.502 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:47:12.505 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 12.7087ms
2022-04-30 17:47:51.076 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 190
2022-04-30 17:47:51.091 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:47:51.116 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"****9AF4","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","refresh_token":"***REDACTED***","scope":"openid profile PollSystemAPI PollSystem.SignalR offline_access","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:47:51.506 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:47:51.518 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:47:51.575 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 190 - 200 - application/json;+charset=UTF-8 499.4750ms
2022-04-30 17:48:17.767 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:48:17.773 +03:00 [WRN] CorsPolicyService did not allow origin: https://jwt.io
2022-04-30 17:48:17.774 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:48:17.776 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:48:17.781 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 13.8371ms
2022-04-30 17:51:29.098 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:51:29.105 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:51:29.111 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 12.8317ms
2022-04-30 17:51:29.140 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:51:29.180 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:51:29.196 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 55.3676ms
2022-04-30 17:51:30.947 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=VOWW9d92MkVdRpSC0aZAIw&code_challenge=t6rRH2w_8p5raJ7q5IxvhmxefqTjS6i1VRM0-aN8jo8&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:51:30.955 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 17:51:30.958 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 17:51:30.961 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=VOWW9d92MkVdRpSC0aZAIw&code_challenge=t6rRH2w_8p5raJ7q5IxvhmxefqTjS6i1VRM0-aN8jo8&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 14.7141ms
2022-04-30 17:51:30.969 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DVOWW9d92MkVdRpSC0aZAIw%26code_challenge%3Dt6rRH2w_8p5raJ7q5IxvhmxefqTjS6i1VRM0-aN8jo8%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 17:51:30.976 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:51:30.979 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:51:30.996 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 17:51:31.007 +03:00 [INF] Executed ViewResult - view Login executed in 11.04ms.
2022-04-30 17:51:31.010 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 18.296ms
2022-04-30 17:51:31.021 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:51:31.026 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DVOWW9d92MkVdRpSC0aZAIw%26code_challenge%3Dt6rRH2w_8p5raJ7q5IxvhmxefqTjS6i1VRM0-aN8jo8%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 57.1675ms
2022-04-30 17:51:31.137 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 17:51:31.148 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 10.9093ms
2022-04-30 17:51:34.299 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 17:51:34.302 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:51:34.303 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:51:34.306 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:51:34.310 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:51:34.317 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:51:34.337 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:51:34.359 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 17:51:34.370 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 17:51:34.377 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:51:34.378 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=VOWW9d92MkVdRpSC0aZAIw&code_challenge=t6rRH2w_8p5raJ7q5IxvhmxefqTjS6i1VRM0-aN8jo8&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 17:51:34.381 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 71.5935ms
2022-04-30 17:51:34.382 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:51:34.383 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 84.3199ms
2022-04-30 17:51:34.386 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=VOWW9d92MkVdRpSC0aZAIw&code_challenge=t6rRH2w_8p5raJ7q5IxvhmxefqTjS6i1VRM0-aN8jo8&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:51:34.390 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 17:51:34.394 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:51:34.396 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=VOWW9d92MkVdRpSC0aZAIw&code_challenge=t6rRH2w_8p5raJ7q5IxvhmxefqTjS6i1VRM0-aN8jo8&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 9.5472ms
2022-04-30 17:51:34.468 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:51:34.471 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:51:34.475 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 6.8187ms
2022-04-30 17:51:34.479 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:51:34.482 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:51:34.484 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.7907ms
2022-04-30 17:51:34.507 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 17:51:34.510 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:51:34.513 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****56FF","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"7D7BB96A229B494C3E24FD1D6D9AEFF46C9BF3B0AFDDF5B8B00DA185D74656FF","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"R2a-pvN4JzqL9YPR8cK16Xwf-n2BKjwLuh-WOADOm1M","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:51:34.530 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:51:34.534 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:51:34.539 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 32.3748ms
2022-04-30 17:51:34.563 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:51:34.564 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:51:34.565 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 2.7166ms
2022-04-30 17:51:34.567 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:51:34.568 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:51:34.569 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.6333ms
2022-04-30 17:51:34.582 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 17:51:34.583 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 17:51:34.585 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:51:34.590 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:51:34.593 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 17:51:34.595 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 12.4723ms
2022-04-30 17:51:40.766 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:51:40.768 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:51:40.770 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.1764ms
2022-04-30 17:51:40.774 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:51:40.775 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:51:40.777 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.4946ms
2022-04-30 17:51:40.789 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 121
2022-04-30 17:51:40.791 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:51:40.794 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"****0A13","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","refresh_token":"***REDACTED***","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:51:40.808 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:51:40.812 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:51:40.815 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 121 - 200 - application/json;+charset=UTF-8 25.6266ms
2022-04-30 17:52:47.848 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:52:47.851 +03:00 [WRN] CorsPolicyService did not allow origin: https://jwt.io
2022-04-30 17:52:47.854 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:52:47.856 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:52:47.858 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 11.8960ms
2022-04-30 17:53:25.405 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:53:25.406 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:53:25.412 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.3232ms
2022-04-30 17:53:25.445 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:53:25.483 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:53:25.488 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 42.2010ms
2022-04-30 17:53:26.516 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 121
2022-04-30 17:53:26.524 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:53:26.529 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"****4E53","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","refresh_token":"***REDACTED***","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:53:26.548 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:53:26.553 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:53:26.560 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 121 - 200 - application/json;+charset=UTF-8 43.6777ms
2022-04-30 17:53:40.949 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:53:40.950 +03:00 [WRN] CorsPolicyService did not allow origin: https://jwt.io
2022-04-30 17:53:40.952 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:53:40.953 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:53:40.955 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 5.6621ms
2022-04-30 17:57:11.319 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:57:11.630 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 17:57:11.645 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 17:57:11.654 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-30 17:57:11.662 +03:00 [INF] Initialization DB done
2022-04-30 17:57:11.723 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-30 17:57:11.839 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-30 17:57:11.858 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-30 17:57:11.877 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-30 17:57:12.260 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-30 17:57:12.262 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-30 17:57:12.263 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 17:57:12.264 +03:00 [INF] Hosting environment: Development
2022-04-30 17:57:12.266 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-30 17:57:28.155 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:57:28.449 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:57:28.666 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 517.5811ms
2022-04-30 17:57:28.725 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:57:28.779 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:57:28.820 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 94.9188ms
2022-04-30 17:57:30.051 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=TBJ3cvRrT3v_9JPhl6PHDg&code_challenge=02vNB1YYk7FnIvqlSIF0ooWzQE05dIiu1Uo6BkLfBQ0&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:57:30.120 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 17:57:30.234 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 17:57:30.250 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=TBJ3cvRrT3v_9JPhl6PHDg&code_challenge=02vNB1YYk7FnIvqlSIF0ooWzQE05dIiu1Uo6BkLfBQ0&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 199.3667ms
2022-04-30 17:57:30.254 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DTBJ3cvRrT3v_9JPhl6PHDg%26code_challenge%3D02vNB1YYk7FnIvqlSIF0ooWzQE05dIiu1Uo6BkLfBQ0%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 17:57:30.270 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:57:30.306 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:57:30.362 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 17:57:30.539 +03:00 [INF] Executed ViewResult - view Login executed in 167.0881ms.
2022-04-30 17:57:30.543 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 230.4503ms
2022-04-30 17:57:30.546 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:57:30.553 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DTBJ3cvRrT3v_9JPhl6PHDg%26code_challenge%3D02vNB1YYk7FnIvqlSIF0ooWzQE05dIiu1Uo6BkLfBQ0%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 299.4240ms
2022-04-30 17:57:30.613 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 17:57:30.624 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 10.8878ms
2022-04-30 17:57:35.081 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 17:57:35.089 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 17:57:35.090 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:57:35.103 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:57:35.121 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:57:35.381 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:57:35.450 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 17:57:35.515 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 17:57:35.542 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 17:57:35.553 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:57:35.557 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=TBJ3cvRrT3v_9JPhl6PHDg&code_challenge=02vNB1YYk7FnIvqlSIF0ooWzQE05dIiu1Uo6BkLfBQ0&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 17:57:35.559 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 451.0069ms
2022-04-30 17:57:35.560 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:57:35.562 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 481.4959ms
2022-04-30 17:57:35.566 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=TBJ3cvRrT3v_9JPhl6PHDg&code_challenge=02vNB1YYk7FnIvqlSIF0ooWzQE05dIiu1Uo6BkLfBQ0&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:57:35.572 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 17:57:35.639 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 17:57:35.642 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=TBJ3cvRrT3v_9JPhl6PHDg&code_challenge=02vNB1YYk7FnIvqlSIF0ooWzQE05dIiu1Uo6BkLfBQ0&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 76.5584ms
2022-04-30 17:57:35.720 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:57:35.722 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:57:35.726 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 6.3985ms
2022-04-30 17:57:35.731 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:57:35.735 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:57:35.739 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 8.0991ms
2022-04-30 17:57:35.762 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 17:57:35.765 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:57:35.814 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****7301","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"15B8F017B666E10582E2B315809C13507BBB0CFAD8E2A7644D8A9F2B3FC17301","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"nTqtv5xZCnHWwwhESUAewSpcmQcZnZlvo0jjNxisn7c","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:57:35.899 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:57:35.912 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:57:36.012 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 249.5905ms
2022-04-30 17:57:36.039 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:57:36.050 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:57:36.055 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 15.7139ms
2022-04-30 17:57:36.056 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:57:36.059 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:57:36.061 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.7990ms
2022-04-30 17:57:36.070 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 17:57:36.072 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 17:57:36.125 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 17:57:36.130 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 17:57:36.135 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 17:57:36.137 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 67.7088ms
2022-04-30 17:58:39.935 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:58:39.993 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:58:39.996 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 61.2686ms
2022-04-30 17:58:40.026 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:58:40.030 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:58:40.089 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 62.9409ms
2022-04-30 17:58:41.767 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=b4I4J3fiWbNIqURzj6HRfw&code_challenge=V6fivKl3aw3Sd8Od23o3aDJAUQkVCUkE5rkwsGgED44&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 17:58:41.772 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 17:58:41.781 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 17:58:41.794 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=b4I4J3fiWbNIqURzj6HRfw&code_challenge=V6fivKl3aw3Sd8Od23o3aDJAUQkVCUkE5rkwsGgED44&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 26.9725ms
2022-04-30 17:58:41.819 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Db4I4J3fiWbNIqURzj6HRfw%26code_challenge%3DV6fivKl3aw3Sd8Od23o3aDJAUQkVCUkE5rkwsGgED44%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 17:58:41.828 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:58:41.832 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 17:58:41.859 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 17:58:41.870 +03:00 [INF] Executed ViewResult - view Login executed in 11.6132ms.
2022-04-30 17:58:41.872 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 22.415ms
2022-04-30 17:58:41.889 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 17:58:41.894 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Db4I4J3fiWbNIqURzj6HRfw%26code_challenge%3DV6fivKl3aw3Sd8Od23o3aDJAUQkVCUkE5rkwsGgED44%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 74.7617ms
2022-04-30 17:58:41.988 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 17:58:42.008 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 20.2817ms
2022-04-30 17:58:44.523 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 17:58:44.525 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 17:58:44.527 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.1693ms
2022-04-30 17:58:44.529 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 17:58:44.531 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 17:58:44.534 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.2755ms
2022-04-30 17:58:44.546 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 121
2022-04-30 17:58:44.549 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 17:58:44.558 +03:00 [WRN] Refresh token has expired.
2022-04-30 17:58:44.560 +03:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"refresh_token","Scopes":null,"AuthorizationCode":"********","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"refresh_token","refresh_token":"***REDACTED***","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 17:58:44.574 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 121 - 400 - application/json;+charset=UTF-8 27.6035ms
2022-04-30 18:01:22.532 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:01:22.534 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:01:22.537 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 5.4844ms
2022-04-30 18:01:22.561 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:01:22.564 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:01:22.567 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.3919ms
2022-04-30 18:01:24.520 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=y3GT2-upUhqfXYKfLUUM9Q&code_challenge=Wd7g4U5XnPpmLl68wPOt_fVbhMVYvkZXBpgXaCY-Mks&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:01:24.550 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 18:01:24.552 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 18:01:24.555 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=y3GT2-upUhqfXYKfLUUM9Q&code_challenge=Wd7g4U5XnPpmLl68wPOt_fVbhMVYvkZXBpgXaCY-Mks&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 35.1060ms
2022-04-30 18:01:24.564 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dy3GT2-upUhqfXYKfLUUM9Q%26code_challenge%3DWd7g4U5XnPpmLl68wPOt_fVbhMVYvkZXBpgXaCY-Mks%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 18:01:24.572 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:01:24.575 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:01:24.586 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 18:01:24.594 +03:00 [INF] Executed ViewResult - view Login executed in 8.1155ms.
2022-04-30 18:01:24.603 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 19.5954ms
2022-04-30 18:01:24.606 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:01:24.609 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dy3GT2-upUhqfXYKfLUUM9Q%26code_challenge%3DWd7g4U5XnPpmLl68wPOt_fVbhMVYvkZXBpgXaCY-Mks%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 44.3008ms
2022-04-30 18:01:24.720 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 18:01:24.726 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 5.7867ms
2022-04-30 18:01:28.783 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 18:01:28.785 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:01:28.787 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:01:28.789 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:01:28.794 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:01:28.798 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:01:28.801 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:01:28.815 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 18:01:28.819 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 18:01:28.823 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:01:28.824 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=y3GT2-upUhqfXYKfLUUM9Q&code_challenge=Wd7g4U5XnPpmLl68wPOt_fVbhMVYvkZXBpgXaCY-Mks&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 18:01:28.826 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 32.4312ms
2022-04-30 18:01:28.827 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:01:28.828 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 45.9256ms
2022-04-30 18:01:28.831 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=y3GT2-upUhqfXYKfLUUM9Q&code_challenge=Wd7g4U5XnPpmLl68wPOt_fVbhMVYvkZXBpgXaCY-Mks&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:01:28.834 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 18:01:28.838 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:01:28.840 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=y3GT2-upUhqfXYKfLUUM9Q&code_challenge=Wd7g4U5XnPpmLl68wPOt_fVbhMVYvkZXBpgXaCY-Mks&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 9.2423ms
2022-04-30 18:01:28.933 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:01:28.935 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:01:28.939 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 6.4450ms
2022-04-30 18:01:28.942 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:01:28.943 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:01:28.945 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.7971ms
2022-04-30 18:01:28.971 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 18:01:28.978 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 18:01:28.981 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****49E8","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"E5F708E9084C71AEA5EF20EDF76CA58ADB8433C398DC8C9FA50B797C050C49E8","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"_j1ZYFk6nbJuGFCbYIKG0iDuRcpbMHWk64Y_wPbTo6E","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 18:01:28.995 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:01:28.998 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:01:29.003 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 31.5470ms
2022-04-30 18:01:29.030 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:01:29.031 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:01:29.033 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.7459ms
2022-04-30 18:01:29.035 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:01:29.036 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:01:29.039 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.2002ms
2022-04-30 18:01:29.053 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 18:01:29.055 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 18:01:29.058 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:01:29.061 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:01:29.064 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 18:01:29.066 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 13.0528ms
2022-04-30 18:01:29.084 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:01:29.085 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:01:29.086 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 2.9701ms
2022-04-30 18:01:29.088 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:01:29.088 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:01:29.090 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.1976ms
2022-04-30 18:01:29.306 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/endsession - -
2022-04-30 18:01:29.309 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2022-04-30 18:01:29.318 +03:00 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"1793bc6b-f4e4-494a-9bf4-d5920bfc695a","PostLogOutUri":null,"State":null,"Raw":{},"$type":"EndSessionRequestValidationLog"}
2022-04-30 18:01:29.338 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/endsession - - - 302 0 - 32.1117ms
2022-04-30 18:01:29.344 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Logout?logoutId=CfDJ8KgbXPqOffFBh3v38e5V22Wn9dfaHC9tNRmjoV92oponJHkZILpVaTHjXkrhDExZTYJ5W7MijQJjvxmOnm5G9rG-Y_f0JoP6YOmFcwW7-i7cJWvw0MIm2QoZTJdiCZleEUzayDicjssPWifmfbpaINnOwhURnG7MJJXHgUSIJHhPzxWV8NYfyA-i2csAbslUDKb4ByqJ3YqIo9V5ysPXAZEcorwuClx5qgkx8UjBa-3FxPq7N3wRu1h6Zb5JSBgrP3smx1b6g6MXGiXCUa5piJOl1kO0aBrgCsWfUGUtMvKzbrdZt2MJjfXTkxDPOk98ZIe9Dwfjl2DZmtpwP9GAbnK-kDWZOoGoYTZ-w8y23i55 - -
2022-04-30 18:01:29.351 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Logout (Auth.Identity)'
2022-04-30 18:01:29.357 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:01:29.372 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2022-04-30 18:01:29.376 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2022-04-30 18:01:29.378 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2022-04-30 18:01:29.583 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Logout (Auth.Identity) in 219.4321ms
2022-04-30 18:01:29.586 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Logout (Auth.Identity)'
2022-04-30 18:01:29.589 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Value cannot be null or empty. (Parameter 'url')
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at Auth.Identity.Controllers.AuthController.Logout(String logoutId) in D:\src\PollSystem\Auth\Controllers\AuthController.cs:line 120
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-04-30 18:01:30.140 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Logout?logoutId=CfDJ8KgbXPqOffFBh3v38e5V22Wn9dfaHC9tNRmjoV92oponJHkZILpVaTHjXkrhDExZTYJ5W7MijQJjvxmOnm5G9rG-Y_f0JoP6YOmFcwW7-i7cJWvw0MIm2QoZTJdiCZleEUzayDicjssPWifmfbpaINnOwhURnG7MJJXHgUSIJHhPzxWV8NYfyA-i2csAbslUDKb4ByqJ3YqIo9V5ysPXAZEcorwuClx5qgkx8UjBa-3FxPq7N3wRu1h6Zb5JSBgrP3smx1b6g6MXGiXCUa5piJOl1kO0aBrgCsWfUGUtMvKzbrdZt2MJjfXTkxDPOk98ZIe9Dwfjl2DZmtpwP9GAbnK-kDWZOoGoYTZ-w8y23i55 - - - 500 - text/html;+charset=utf-8 796.1556ms
2022-04-30 18:02:10.675 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:02:10.678 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:02:10.682 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 6.7970ms
2022-04-30 18:02:10.711 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:02:10.715 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:02:10.718 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 6.4299ms
2022-04-30 18:02:12.032 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=k5-M6uqFOtDNInsVkQTKZQ&code_challenge=o18SK-J_atoQpDdwirtfH4EH5DKYa5lbo0ceHshHuDY&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:02:12.037 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 18:02:12.041 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 18:02:12.044 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=k5-M6uqFOtDNInsVkQTKZQ&code_challenge=o18SK-J_atoQpDdwirtfH4EH5DKYa5lbo0ceHshHuDY&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 12.0070ms
2022-04-30 18:02:12.048 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dk5-M6uqFOtDNInsVkQTKZQ%26code_challenge%3Do18SK-J_atoQpDdwirtfH4EH5DKYa5lbo0ceHshHuDY%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 18:02:12.052 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:02:12.054 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:02:12.064 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 18:02:12.076 +03:00 [INF] Executed ViewResult - view Login executed in 12.0502ms.
2022-04-30 18:02:12.079 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 17.788ms
2022-04-30 18:02:12.083 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:02:12.090 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dk5-M6uqFOtDNInsVkQTKZQ%26code_challenge%3Do18SK-J_atoQpDdwirtfH4EH5DKYa5lbo0ceHshHuDY%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 41.6978ms
2022-04-30 18:02:12.188 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 18:02:12.190 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 1.8588ms
2022-04-30 18:02:15.799 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 18:02:15.801 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:02:15.803 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:02:15.806 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:02:15.809 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:02:15.814 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:02:15.823 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:02:15.834 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 18:02:15.838 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 18:02:15.842 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:02:15.843 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=k5-M6uqFOtDNInsVkQTKZQ&code_challenge=o18SK-J_atoQpDdwirtfH4EH5DKYa5lbo0ceHshHuDY&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 18:02:15.845 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 36.9518ms
2022-04-30 18:02:15.847 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:02:15.849 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 50.1388ms
2022-04-30 18:02:15.856 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=k5-M6uqFOtDNInsVkQTKZQ&code_challenge=o18SK-J_atoQpDdwirtfH4EH5DKYa5lbo0ceHshHuDY&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:02:15.862 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 18:02:15.866 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:02:15.868 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=k5-M6uqFOtDNInsVkQTKZQ&code_challenge=o18SK-J_atoQpDdwirtfH4EH5DKYa5lbo0ceHshHuDY&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 12.8822ms
2022-04-30 18:02:15.957 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:02:15.959 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:02:15.965 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 8.6999ms
2022-04-30 18:02:15.966 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:02:15.967 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:02:15.968 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.2011ms
2022-04-30 18:02:15.986 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 18:02:15.987 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 18:02:15.989 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****E4D9","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"1DD51F5D1DC0381B2CB0814F9FCF653A9D0567088503BB3CE177FFF640AAE4D9","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"aY_a2ly9qGwO7L6Je-NBbB5skuw8cEw9FyBpr7IT85M","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 18:02:16.003 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:02:16.008 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:02:16.013 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 27.1666ms
2022-04-30 18:02:16.042 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:02:16.043 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:02:16.045 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.4702ms
2022-04-30 18:02:16.047 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:02:16.048 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:02:16.050 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.6427ms
2022-04-30 18:02:16.061 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 18:02:16.064 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 18:02:16.068 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:02:16.073 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:02:16.076 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 18:02:16.078 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 16.8409ms
2022-04-30 18:02:28.375 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:02:28.380 +03:00 [WRN] CorsPolicyService did not allow origin: https://jwt.io
2022-04-30 18:02:28.382 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:02:28.385 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:02:28.390 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 15.0406ms
2022-04-30 18:02:31.632 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:02:31.634 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:02:31.637 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 5.1010ms
2022-04-30 18:02:31.638 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:02:31.640 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:02:31.641 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.7371ms
2022-04-30 18:02:31.831 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/endsession - -
2022-04-30 18:02:31.836 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2022-04-30 18:02:31.840 +03:00 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"1793bc6b-f4e4-494a-9bf4-d5920bfc695a","PostLogOutUri":null,"State":null,"Raw":{},"$type":"EndSessionRequestValidationLog"}
2022-04-30 18:02:31.854 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/endsession - - - 302 0 - 23.2276ms
2022-04-30 18:02:31.857 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Logout?logoutId=CfDJ8KgbXPqOffFBh3v38e5V22WfK_PpmpFELB-jG7k00ELZdRAp6qxoYJdn_9bLUvafCjpOgD2XRAeVrKIg8ATYob6Cfbp5xUHcFRcE5_A425Ee1Yc4P-gBNdmpmQe_h8VdCXkk4tygaLuBm54cdUo1L6txoD2We-AsxNtSN2XKg6PZ6ENijIsdxgRI0Pts1m6tv4oqr1PKWMImVOzJyVrleTaWhMoLrU6oaiwJC0IzD5N5f4ohFv7UE50wB12f6-lenVvph5ut4wsnZKy8xUTGC6PYpycJU-q1GHCEFtzyOKnLrEqVBcVwE4owIwtJnqTFzjy1-fOFTGsmyt5oZISOFN22p9EPb9p9Vfa0x7TUpD3I - -
2022-04-30 18:02:31.865 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Logout (Auth.Identity)'
2022-04-30 18:02:31.869 +03:00 [INF] Route matched with {action = "Logout", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Logout(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:02:31.871 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2022-04-30 18:02:31.873 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2022-04-30 18:02:31.874 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2022-04-30 18:02:31.953 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Logout (Auth.Identity) in 82.1647ms
2022-04-30 18:02:31.955 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Logout (Auth.Identity)'
2022-04-30 18:02:31.957 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Value cannot be null or empty. (Parameter 'url')
   at Microsoft.AspNetCore.Mvc.ControllerBase.Redirect(String url)
   at Auth.Identity.Controllers.AuthController.Logout(String logoutId) in D:\src\PollSystem\Auth\Controllers\AuthController.cs:line 120
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-04-30 18:02:31.991 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Logout?logoutId=CfDJ8KgbXPqOffFBh3v38e5V22WfK_PpmpFELB-jG7k00ELZdRAp6qxoYJdn_9bLUvafCjpOgD2XRAeVrKIg8ATYob6Cfbp5xUHcFRcE5_A425Ee1Yc4P-gBNdmpmQe_h8VdCXkk4tygaLuBm54cdUo1L6txoD2We-AsxNtSN2XKg6PZ6ENijIsdxgRI0Pts1m6tv4oqr1PKWMImVOzJyVrleTaWhMoLrU6oaiwJC0IzD5N5f4ohFv7UE50wB12f6-lenVvph5ut4wsnZKy8xUTGC6PYpycJU-q1GHCEFtzyOKnLrEqVBcVwE4owIwtJnqTFzjy1-fOFTGsmyt5oZISOFN22p9EPb9p9Vfa0x7TUpD3I - - - 500 - text/html;+charset=utf-8 134.3526ms
2022-04-30 18:02:36.979 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:02:36.981 +03:00 [WRN] CorsPolicyService did not allow origin: https://jwt.io
2022-04-30 18:02:36.982 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:02:36.983 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:02:36.985 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 5.2222ms
2022-04-30 18:08:11.995 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:08:12.256 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 18:08:12.268 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 18:08:12.277 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-30 18:08:12.283 +03:00 [INF] Initialization DB done
2022-04-30 18:08:12.328 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-30 18:08:12.409 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-30 18:08:12.424 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-30 18:08:12.434 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-30 18:08:12.769 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-30 18:08:12.771 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-30 18:08:12.773 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 18:08:12.774 +03:00 [INF] Hosting environment: Development
2022-04-30 18:08:12.776 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-30 18:08:37.420 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:08:37.532 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:08:37.595 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 176.5435ms
2022-04-30 18:08:37.619 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:08:37.633 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:08:37.697 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 78.4262ms
2022-04-30 18:08:40.233 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=qQUcOhK4NGBz1UcgyXcIbw&code_challenge=li-GXx7nX2oXhlqr8DLhebFov38xIvcv3vzZo-gnrSg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:08:40.423 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 18:08:40.513 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 18:08:40.530 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=qQUcOhK4NGBz1UcgyXcIbw&code_challenge=li-GXx7nX2oXhlqr8DLhebFov38xIvcv3vzZo-gnrSg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 297.2704ms
2022-04-30 18:08:40.535 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DqQUcOhK4NGBz1UcgyXcIbw%26code_challenge%3Dli-GXx7nX2oXhlqr8DLhebFov38xIvcv3vzZo-gnrSg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 18:08:40.547 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:08:40.571 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:08:40.605 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 18:08:40.696 +03:00 [INF] Executed ViewResult - view Login executed in 91.8458ms.
2022-04-30 18:08:40.700 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 122.5814ms
2022-04-30 18:08:40.702 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:08:40.707 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DqQUcOhK4NGBz1UcgyXcIbw%26code_challenge%3Dli-GXx7nX2oXhlqr8DLhebFov38xIvcv3vzZo-gnrSg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 171.9382ms
2022-04-30 18:08:40.766 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 18:08:40.770 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 3.1473ms
2022-04-30 18:08:50.409 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 18:08:50.417 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:08:50.418 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:08:50.430 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:08:50.549 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:08:51.251 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:08:51.350 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:08:51.430 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 18:08:51.475 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 18:08:51.486 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:08:51.489 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=qQUcOhK4NGBz1UcgyXcIbw&code_challenge=li-GXx7nX2oXhlqr8DLhebFov38xIvcv3vzZo-gnrSg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 18:08:51.491 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 1056.3608ms
2022-04-30 18:08:51.493 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:08:51.496 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 1087.4233ms
2022-04-30 18:08:51.498 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=qQUcOhK4NGBz1UcgyXcIbw&code_challenge=li-GXx7nX2oXhlqr8DLhebFov38xIvcv3vzZo-gnrSg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:08:51.505 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 18:08:51.630 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:08:51.632 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=qQUcOhK4NGBz1UcgyXcIbw&code_challenge=li-GXx7nX2oXhlqr8DLhebFov38xIvcv3vzZo-gnrSg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 133.8319ms
2022-04-30 18:08:51.731 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:08:51.734 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:08:51.739 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 8.3195ms
2022-04-30 18:08:51.743 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:08:51.745 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:08:51.747 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.1571ms
2022-04-30 18:08:51.771 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 18:08:51.775 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 18:08:51.826 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****76A3","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"83CFE62185F40DA506A85516278C1A63508528465433DC8F49F3D78B2CC176A3","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"9BWFm6BXgCYGBF8-UuUZs51YvohIFETZ20vCYUyXZgs","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 18:08:51.905 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:08:51.925 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:08:52.042 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 270.0694ms
2022-04-30 18:08:52.066 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:08:52.078 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:08:52.080 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 14.5727ms
2022-04-30 18:08:52.082 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:08:52.084 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:08:52.087 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.8395ms
2022-04-30 18:08:52.096 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 18:08:52.098 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 18:08:52.162 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:08:52.166 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:08:52.170 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 18:08:52.172 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 76.1934ms
2022-04-30 18:08:57.312 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:08:57.315 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:08:57.319 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 7.2685ms
2022-04-30 18:08:57.325 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:08:57.329 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:08:57.334 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 9.0098ms
2022-04-30 18:08:57.701 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/endsession - -
2022-04-30 18:08:57.714 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2022-04-30 18:08:57.724 +03:00 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"1793bc6b-f4e4-494a-9bf4-d5920bfc695a","PostLogOutUri":null,"State":null,"Raw":{},"$type":"EndSessionRequestValidationLog"}
2022-04-30 18:08:57.742 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/endsession - - - 302 0 - 41.8069ms
2022-04-30 18:09:59.077 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:09:59.078 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:09:59.081 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.2721ms
2022-04-30 18:09:59.116 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:09:59.118 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:09:59.120 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.4181ms
2022-04-30 18:10:01.234 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=Ibl8jjw4g5aiWqJVv93LjQ&code_challenge=_Tk8FiCIe0tOyGg-fQJYQtQF3IFIaNY-DD0kh3tBfFU&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:10:01.239 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 18:10:01.242 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 18:10:01.244 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=Ibl8jjw4g5aiWqJVv93LjQ&code_challenge=_Tk8FiCIe0tOyGg-fQJYQtQF3IFIaNY-DD0kh3tBfFU&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 9.1126ms
2022-04-30 18:10:01.247 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DIbl8jjw4g5aiWqJVv93LjQ%26code_challenge%3D_Tk8FiCIe0tOyGg-fQJYQtQF3IFIaNY-DD0kh3tBfFU%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 18:10:01.253 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:10:01.255 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:10:01.262 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 18:10:01.267 +03:00 [INF] Executed ViewResult - view Login executed in 5.8344ms.
2022-04-30 18:10:01.269 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 11.2526ms
2022-04-30 18:10:01.277 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:10:01.279 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DIbl8jjw4g5aiWqJVv93LjQ%26code_challenge%3D_Tk8FiCIe0tOyGg-fQJYQtQF3IFIaNY-DD0kh3tBfFU%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 32.4377ms
2022-04-30 18:10:01.536 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 18:10:01.537 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 1.8769ms
2022-04-30 18:10:07.467 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 18:10:07.470 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:10:07.471 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:10:07.472 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:10:07.477 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:10:07.482 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:10:07.485 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:10:07.495 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 18:10:07.500 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 18:10:07.503 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:10:07.504 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=Ibl8jjw4g5aiWqJVv93LjQ&code_challenge=_Tk8FiCIe0tOyGg-fQJYQtQF3IFIaNY-DD0kh3tBfFU&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 18:10:07.507 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 31.0523ms
2022-04-30 18:10:07.512 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:10:07.514 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 47.1808ms
2022-04-30 18:10:07.516 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=Ibl8jjw4g5aiWqJVv93LjQ&code_challenge=_Tk8FiCIe0tOyGg-fQJYQtQF3IFIaNY-DD0kh3tBfFU&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:10:07.519 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 18:10:07.521 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:10:07.522 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=Ibl8jjw4g5aiWqJVv93LjQ&code_challenge=_Tk8FiCIe0tOyGg-fQJYQtQF3IFIaNY-DD0kh3tBfFU&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 6.0473ms
2022-04-30 18:10:07.623 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:10:07.624 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:10:07.630 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 7.1835ms
2022-04-30 18:10:07.637 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:10:07.639 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:10:07.641 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.7722ms
2022-04-30 18:10:07.667 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 18:10:07.669 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 18:10:07.674 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****8F80","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"1A4CC04FE56150BEB8A2C894A17369E7E727F101F753384AE59845DC7CA68F80","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"E9Ngg_PgwEqZzLSK9n118vQEM5cnysNITeF1kpq1gEk","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 18:10:07.703 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:10:07.706 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:10:07.713 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 46.2882ms
2022-04-30 18:10:07.740 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:10:07.742 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:10:07.744 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.2687ms
2022-04-30 18:10:07.745 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:10:07.746 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:10:07.748 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.6124ms
2022-04-30 18:10:07.758 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 18:10:07.764 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 18:10:07.781 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:10:07.785 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:10:07.790 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 18:10:07.792 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 33.0144ms
2022-04-30 18:11:59.291 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:11:59.295 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:11:59.304 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 12.6600ms
2022-04-30 18:11:59.336 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:11:59.338 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:11:59.347 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 10.9624ms
2022-04-30 18:12:00.813 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=mM99C1O7o1V4DZK-hG9Rcw&code_challenge=kqe5wifVTQz4S01gsGAidTPh0KEqhZTd959EQdPnWyg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:12:00.825 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 18:12:00.827 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 18:12:00.828 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=mM99C1O7o1V4DZK-hG9Rcw&code_challenge=kqe5wifVTQz4S01gsGAidTPh0KEqhZTd959EQdPnWyg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 15.0953ms
2022-04-30 18:12:00.840 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DmM99C1O7o1V4DZK-hG9Rcw%26code_challenge%3Dkqe5wifVTQz4S01gsGAidTPh0KEqhZTd959EQdPnWyg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 18:12:00.850 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:12:00.851 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:12:00.861 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 18:12:00.869 +03:00 [INF] Executed ViewResult - view Login executed in 7.3337ms.
2022-04-30 18:12:00.870 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 9.5564ms
2022-04-30 18:12:00.873 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:12:00.878 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DmM99C1O7o1V4DZK-hG9Rcw%26code_challenge%3Dkqe5wifVTQz4S01gsGAidTPh0KEqhZTd959EQdPnWyg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 38.3634ms
2022-04-30 18:12:00.936 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 18:12:00.941 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 5.3543ms
2022-04-30 18:12:04.254 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 18:12:04.256 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:12:04.258 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:12:04.259 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:12:04.268 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:12:04.272 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:12:04.279 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:12:04.289 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 18:12:04.296 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 18:12:04.299 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:12:04.300 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=mM99C1O7o1V4DZK-hG9Rcw&code_challenge=kqe5wifVTQz4S01gsGAidTPh0KEqhZTd959EQdPnWyg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 18:12:04.302 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 36.006ms
2022-04-30 18:12:04.304 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:12:04.309 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 54.8611ms
2022-04-30 18:12:04.312 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=mM99C1O7o1V4DZK-hG9Rcw&code_challenge=kqe5wifVTQz4S01gsGAidTPh0KEqhZTd959EQdPnWyg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:12:04.319 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 18:12:04.327 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:12:04.330 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=mM99C1O7o1V4DZK-hG9Rcw&code_challenge=kqe5wifVTQz4S01gsGAidTPh0KEqhZTd959EQdPnWyg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 18.3660ms
2022-04-30 18:12:04.449 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:12:04.450 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:12:04.453 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.7482ms
2022-04-30 18:12:04.459 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:12:04.462 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:12:04.466 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 6.8709ms
2022-04-30 18:12:04.484 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 18:12:04.494 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 18:12:04.496 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****89F9","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"C78C010AAC07B3581849180FAC1C2BE8BF59EE01447139771D1A04054F1E89F9","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"AP1anpAbgljybHivqwkEKQMwljbsxlSSzCOrGvBvIE4","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 18:12:04.512 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:12:04.515 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:12:04.522 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 37.6728ms
2022-04-30 18:12:04.553 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:12:04.555 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:12:04.557 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.4229ms
2022-04-30 18:12:04.558 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:12:04.559 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:12:04.561 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.0759ms
2022-04-30 18:12:04.568 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 18:12:04.572 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 18:12:04.574 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:12:04.577 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:12:04.580 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 18:12:04.581 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 12.5321ms
2022-04-30 18:22:50.370 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:22:50.380 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:22:50.386 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 15.5794ms
2022-04-30 18:22:50.423 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:22:50.426 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:22:50.435 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 12.2167ms
2022-04-30 18:22:51.899 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=DdBPQ_ZZEbUC5ZVFBsibQg&code_challenge=YBeqxkAWUIleCoHRx2X6xuZVFuhkaiiQsyMo4Xu9D_Q&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:22:51.902 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 18:22:51.904 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 18:22:51.905 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=DdBPQ_ZZEbUC5ZVFBsibQg&code_challenge=YBeqxkAWUIleCoHRx2X6xuZVFuhkaiiQsyMo4Xu9D_Q&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 6.5053ms
2022-04-30 18:22:51.909 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DDdBPQ_ZZEbUC5ZVFBsibQg%26code_challenge%3DYBeqxkAWUIleCoHRx2X6xuZVFuhkaiiQsyMo4Xu9D_Q%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 18:22:51.912 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:22:51.914 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:22:51.918 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 18:22:51.921 +03:00 [INF] Executed ViewResult - view Login executed in 3.4204ms.
2022-04-30 18:22:51.925 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 8.1902ms
2022-04-30 18:22:51.931 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:22:51.933 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DDdBPQ_ZZEbUC5ZVFBsibQg%26code_challenge%3DYBeqxkAWUIleCoHRx2X6xuZVFuhkaiiQsyMo4Xu9D_Q%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 23.4468ms
2022-04-30 18:22:52.004 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 18:22:52.008 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 4.4782ms
2022-04-30 18:23:02.355 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 18:23:02.358 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:23:02.359 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:23:02.362 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:23:02.371 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:23:02.381 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:23:02.388 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:23:02.399 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 18:23:02.403 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 18:23:02.406 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:23:02.408 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=DdBPQ_ZZEbUC5ZVFBsibQg&code_challenge=YBeqxkAWUIleCoHRx2X6xuZVFuhkaiiQsyMo4Xu9D_Q&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 18:23:02.412 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 41.8091ms
2022-04-30 18:23:02.413 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:23:02.415 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 59.6673ms
2022-04-30 18:23:02.417 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=DdBPQ_ZZEbUC5ZVFBsibQg&code_challenge=YBeqxkAWUIleCoHRx2X6xuZVFuhkaiiQsyMo4Xu9D_Q&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:23:02.420 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 18:23:02.421 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:23:02.422 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=DdBPQ_ZZEbUC5ZVFBsibQg&code_challenge=YBeqxkAWUIleCoHRx2X6xuZVFuhkaiiQsyMo4Xu9D_Q&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 5.1908ms
2022-04-30 18:23:02.504 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:23:02.506 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:23:02.511 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 7.8693ms
2022-04-30 18:23:02.513 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:23:02.514 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:23:02.518 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.2458ms
2022-04-30 18:23:02.540 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 18:23:02.542 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 18:23:02.543 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****44AF","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"158CCEE2E0705D190A3ADC6E7AA547839D5FF34B3CA9B4AD70FDB1EB924C44AF","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"2qygxEVpZW8cJQKCFpfScihOV_S3q1lDZPjGvrN1zRk","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 18:23:02.571 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:23:02.574 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:23:02.581 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 40.9705ms
2022-04-30 18:23:02.609 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:23:02.611 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:23:02.613 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.7007ms
2022-04-30 18:23:02.615 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:23:02.616 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:23:02.617 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.6014ms
2022-04-30 18:23:02.630 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 18:23:02.631 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 18:23:02.634 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:23:02.638 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:23:02.645 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 18:23:02.647 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 17.1864ms
2022-04-30 18:23:03.184 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:23:03.186 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:23:03.188 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.7262ms
2022-04-30 18:23:03.415 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:23:03.416 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:23:03.418 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.1626ms
2022-04-30 18:24:08.527 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:24:08.529 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:24:08.531 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.6204ms
2022-04-30 18:24:08.552 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:24:08.553 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:24:08.557 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.5740ms
2022-04-30 18:24:09.969 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=w22o_GflUT7qOou1e_BdQw&code_challenge=90BS0zNCBqPk40nyZ3cRbPz7IWkWb8NuLphwtRCFTmc&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:24:09.982 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 18:24:09.987 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 18:24:09.989 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=w22o_GflUT7qOou1e_BdQw&code_challenge=90BS0zNCBqPk40nyZ3cRbPz7IWkWb8NuLphwtRCFTmc&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 20.4504ms
2022-04-30 18:24:09.993 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dw22o_GflUT7qOou1e_BdQw%26code_challenge%3D90BS0zNCBqPk40nyZ3cRbPz7IWkWb8NuLphwtRCFTmc%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 18:24:10.004 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:24:10.005 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:24:10.009 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 18:24:10.013 +03:00 [INF] Executed ViewResult - view Login executed in 4.7344ms.
2022-04-30 18:24:10.020 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 12.3342ms
2022-04-30 18:24:10.024 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:24:10.028 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dw22o_GflUT7qOou1e_BdQw%26code_challenge%3D90BS0zNCBqPk40nyZ3cRbPz7IWkWb8NuLphwtRCFTmc%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 33.9539ms
2022-04-30 18:24:10.069 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 18:24:10.078 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 8.4631ms
2022-04-30 18:24:15.022 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 18:24:15.024 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:24:15.026 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:24:15.028 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:24:15.031 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:24:15.041 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:24:15.045 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:24:15.057 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 18:24:15.070 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 18:24:15.074 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:24:15.075 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=w22o_GflUT7qOou1e_BdQw&code_challenge=90BS0zNCBqPk40nyZ3cRbPz7IWkWb8NuLphwtRCFTmc&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 18:24:15.077 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 46.6584ms
2022-04-30 18:24:15.078 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:24:15.082 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 59.5668ms
2022-04-30 18:24:15.084 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=w22o_GflUT7qOou1e_BdQw&code_challenge=90BS0zNCBqPk40nyZ3cRbPz7IWkWb8NuLphwtRCFTmc&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:24:15.087 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 18:24:15.089 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:24:15.090 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=w22o_GflUT7qOou1e_BdQw&code_challenge=90BS0zNCBqPk40nyZ3cRbPz7IWkWb8NuLphwtRCFTmc&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 6.3659ms
2022-04-30 18:24:15.172 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:24:15.175 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:24:15.184 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 12.0581ms
2022-04-30 18:24:15.189 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:24:15.190 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:24:15.192 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.6650ms
2022-04-30 18:24:15.209 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 18:24:15.211 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 18:24:15.213 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****9122","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"AA3C7D6AD91638F291A80B546D75DB01B23DFF37F457ED46A1EE8658AA409122","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"pT2wXmItaHgLUuOmc5yIw62YC-pqtg456zVaBdmGAnw","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 18:24:15.229 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:24:15.231 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:24:15.239 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 29.9191ms
2022-04-30 18:24:15.268 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:24:15.270 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:24:15.273 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.5444ms
2022-04-30 18:24:15.274 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:24:15.277 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:24:15.280 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.1830ms
2022-04-30 18:24:15.290 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 18:24:15.292 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 18:24:15.296 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:24:15.299 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:24:15.302 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 18:24:15.303 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 13.1941ms
2022-04-30 18:25:36.555 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:25:36.613 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:25:36.683 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 127.6808ms
2022-04-30 18:25:36.803 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:25:36.806 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:25:36.810 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 7.4628ms
2022-04-30 18:25:38.220 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=YOJMwNO3JtuzyvVPRqmHTg&code_challenge=LABcr31GQ1Ov4Zawm2oe9thr62SGty_MxwqRvXJHsEI&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:25:38.237 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 18:25:38.245 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 18:25:38.248 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=YOJMwNO3JtuzyvVPRqmHTg&code_challenge=LABcr31GQ1Ov4Zawm2oe9thr62SGty_MxwqRvXJHsEI&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 27.9274ms
2022-04-30 18:25:38.257 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DYOJMwNO3JtuzyvVPRqmHTg%26code_challenge%3DLABcr31GQ1Ov4Zawm2oe9thr62SGty_MxwqRvXJHsEI%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 18:25:38.268 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:25:38.270 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:25:38.275 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 18:25:38.278 +03:00 [INF] Executed ViewResult - view Login executed in 2.8427ms.
2022-04-30 18:25:38.281 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 6.6547ms
2022-04-30 18:25:38.287 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:25:38.292 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DYOJMwNO3JtuzyvVPRqmHTg%26code_challenge%3DLABcr31GQ1Ov4Zawm2oe9thr62SGty_MxwqRvXJHsEI%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 35.2464ms
2022-04-30 18:25:38.340 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 18:25:38.342 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 2.4217ms
2022-04-30 18:25:42.700 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 18:25:42.701 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:25:42.703 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:25:42.704 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:25:42.707 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:25:42.710 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:25:42.715 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:25:42.725 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 18:25:42.730 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 18:25:42.733 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:25:42.735 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=YOJMwNO3JtuzyvVPRqmHTg&code_challenge=LABcr31GQ1Ov4Zawm2oe9thr62SGty_MxwqRvXJHsEI&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 18:25:42.736 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 30.3399ms
2022-04-30 18:25:42.738 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:25:42.743 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 43.3665ms
2022-04-30 18:25:42.750 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=YOJMwNO3JtuzyvVPRqmHTg&code_challenge=LABcr31GQ1Ov4Zawm2oe9thr62SGty_MxwqRvXJHsEI&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:25:42.757 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 18:25:42.760 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:25:42.761 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=YOJMwNO3JtuzyvVPRqmHTg&code_challenge=LABcr31GQ1Ov4Zawm2oe9thr62SGty_MxwqRvXJHsEI&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 11.6406ms
2022-04-30 18:25:42.855 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:25:42.857 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:25:42.860 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 5.0177ms
2022-04-30 18:25:42.866 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:25:42.869 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:25:42.871 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.9891ms
2022-04-30 18:25:42.889 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 18:25:42.890 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 18:25:42.892 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****5D50","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"62D808482EC337BF524171D69A788869B0893D5C044B9B4304003CF2FADA5D50","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"PXxk7Dum-aU69E-_3DmPXAOpcCujLyUolOzc_F5AaFw","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 18:25:42.905 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:25:42.908 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:25:42.914 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 25.3340ms
2022-04-30 18:25:42.940 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:25:42.941 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:25:42.943 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 2.6960ms
2022-04-30 18:25:42.944 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:25:42.945 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:25:42.947 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.4656ms
2022-04-30 18:25:42.956 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 18:25:42.958 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 18:25:42.960 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:25:42.964 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:25:42.969 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 18:25:42.971 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 14.7473ms
2022-04-30 18:31:07.187 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:31:07.232 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:31:07.237 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 49.6096ms
2022-04-30 18:31:07.304 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:31:07.342 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:31:07.371 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 66.5791ms
2022-04-30 18:31:21.707 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:31:21.938 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 18:31:21.951 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 18:31:21.956 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-30 18:31:21.963 +03:00 [INF] Initialization DB done
2022-04-30 18:31:22.008 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-30 18:31:22.082 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-30 18:31:22.096 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-30 18:31:22.108 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-30 18:31:22.477 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-30 18:31:22.486 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-30 18:31:22.492 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 18:31:22.496 +03:00 [INF] Hosting environment: Development
2022-04-30 18:31:22.500 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-30 18:31:32.042 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:31:32.169 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:31:32.269 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 234.2269ms
2022-04-30 18:31:32.309 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:31:32.313 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:31:32.365 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 56.2804ms
2022-04-30 18:31:33.896 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=nj9HMpq0Dy32WkovnogGCg&code_challenge=nMNYZKFwfD0lmF_BGsF5Sy_6S59abBe2seICbtXQlW4&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:31:33.962 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 18:31:34.093 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 18:31:34.107 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=nj9HMpq0Dy32WkovnogGCg&code_challenge=nMNYZKFwfD0lmF_BGsF5Sy_6S59abBe2seICbtXQlW4&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 211.8812ms
2022-04-30 18:31:34.111 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dnj9HMpq0Dy32WkovnogGCg%26code_challenge%3DnMNYZKFwfD0lmF_BGsF5Sy_6S59abBe2seICbtXQlW4%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 18:31:34.119 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:31:34.157 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:31:34.190 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 18:31:34.311 +03:00 [INF] Executed ViewResult - view Login executed in 118.1199ms.
2022-04-30 18:31:34.325 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 163.6422ms
2022-04-30 18:31:34.327 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:31:34.332 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dnj9HMpq0Dy32WkovnogGCg%26code_challenge%3DnMNYZKFwfD0lmF_BGsF5Sy_6S59abBe2seICbtXQlW4%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 220.5549ms
2022-04-30 18:31:34.419 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 18:31:34.425 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 6.1314ms
2022-04-30 18:31:39.441 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 18:31:39.451 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:31:39.455 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:31:39.470 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:31:39.487 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:31:39.769 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:31:39.842 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:31:39.906 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 18:31:39.928 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 18:31:39.940 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:31:39.942 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=nj9HMpq0Dy32WkovnogGCg&code_challenge=nMNYZKFwfD0lmF_BGsF5Sy_6S59abBe2seICbtXQlW4&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 18:31:39.944 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 471.0495ms
2022-04-30 18:31:39.945 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:31:39.948 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 506.7475ms
2022-04-30 18:31:39.950 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=nj9HMpq0Dy32WkovnogGCg&code_challenge=nMNYZKFwfD0lmF_BGsF5Sy_6S59abBe2seICbtXQlW4&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:31:39.955 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 18:31:40.028 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:31:40.031 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=nj9HMpq0Dy32WkovnogGCg&code_challenge=nMNYZKFwfD0lmF_BGsF5Sy_6S59abBe2seICbtXQlW4&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 81.4461ms
2022-04-30 18:31:40.114 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:31:40.119 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:31:40.123 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 8.8993ms
2022-04-30 18:31:40.126 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:31:40.128 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:31:40.130 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.7858ms
2022-04-30 18:31:40.155 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 18:31:40.159 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 18:31:40.219 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****9D84","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"6414409151C3F55A8ECD026DDE2BAAC103B9FB392907236ED576F65AC6999D84","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"q3Teuu4NtTbhT-Cx24ULxT_h8C5sWi0wp9rjKeXD3tk","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 18:31:40.300 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:31:40.311 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:31:40.421 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 265.7213ms
2022-04-30 18:31:40.448 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:31:40.458 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:31:40.460 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 12.3165ms
2022-04-30 18:31:40.462 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:31:40.464 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:31:40.465 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.6327ms
2022-04-30 18:31:40.476 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 18:31:40.478 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 18:31:40.528 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:31:40.532 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:31:40.535 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 18:31:40.537 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 61.2910ms
2022-04-30 18:32:21.641 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:32:21.646 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:32:21.649 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 7.1030ms
2022-04-30 18:32:21.704 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:32:21.711 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:32:21.718 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 13.3010ms
2022-04-30 18:32:23.522 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=LLfjwvAR1OyFjMRz9yWQ9Q&code_challenge=gpXp8CIZd-Gv8kZiXJEuB_-IbseGTxCsEbHcxDaWD1M&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:32:23.529 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 18:32:23.539 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 18:32:23.548 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=LLfjwvAR1OyFjMRz9yWQ9Q&code_challenge=gpXp8CIZd-Gv8kZiXJEuB_-IbseGTxCsEbHcxDaWD1M&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 26.1698ms
2022-04-30 18:32:23.552 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DLLfjwvAR1OyFjMRz9yWQ9Q%26code_challenge%3DgpXp8CIZd-Gv8kZiXJEuB_-IbseGTxCsEbHcxDaWD1M%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 18:32:23.557 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:32:23.564 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:32:23.589 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 18:32:23.630 +03:00 [INF] Executed ViewResult - view Login executed in 42.465ms.
2022-04-30 18:32:23.634 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 51.5395ms
2022-04-30 18:32:23.640 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:32:23.643 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DLLfjwvAR1OyFjMRz9yWQ9Q%26code_challenge%3DgpXp8CIZd-Gv8kZiXJEuB_-IbseGTxCsEbHcxDaWD1M%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 90.6398ms
2022-04-30 18:32:23.701 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 18:32:23.702 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 1.8974ms
2022-04-30 18:32:27.558 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 18:32:27.560 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:32:27.562 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:32:27.563 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:32:27.566 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:32:27.570 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:32:27.574 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:32:27.587 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 18:32:27.592 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 18:32:27.595 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:32:27.596 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=LLfjwvAR1OyFjMRz9yWQ9Q&code_challenge=gpXp8CIZd-Gv8kZiXJEuB_-IbseGTxCsEbHcxDaWD1M&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 18:32:27.603 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 37.4492ms
2022-04-30 18:32:27.605 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:32:27.606 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 48.4579ms
2022-04-30 18:32:27.608 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=LLfjwvAR1OyFjMRz9yWQ9Q&code_challenge=gpXp8CIZd-Gv8kZiXJEuB_-IbseGTxCsEbHcxDaWD1M&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:32:27.612 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 18:32:27.614 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:32:27.615 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=LLfjwvAR1OyFjMRz9yWQ9Q&code_challenge=gpXp8CIZd-Gv8kZiXJEuB_-IbseGTxCsEbHcxDaWD1M&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 6.9967ms
2022-04-30 18:32:27.697 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:32:27.700 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:32:27.704 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 7.6239ms
2022-04-30 18:32:27.707 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:32:27.712 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:32:27.717 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 9.7770ms
2022-04-30 18:32:27.742 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 18:32:27.744 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 18:32:27.746 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****CD5E","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"5A709D5FF8221C785710C875D5562808DDE45A51FC43EE46B4E7AC8E967DCD5E","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"Um3GRkrmbTeH0Q2q8u7Cjc-7mGFLhRbnvAYhoaPqK2Q","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 18:32:27.758 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:32:27.761 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:32:27.766 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 24.6489ms
2022-04-30 18:32:27.792 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:32:27.793 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:32:27.795 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 2.9294ms
2022-04-30 18:32:27.797 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:32:27.798 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:32:27.800 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.7043ms
2022-04-30 18:32:27.813 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 18:32:27.821 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 18:32:27.823 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:32:27.828 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:32:27.831 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 18:32:27.832 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 19.7141ms
2022-04-30 18:33:24.953 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:33:24.963 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:33:24.969 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 16.4415ms
2022-04-30 18:33:25.030 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:33:25.177 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:33:25.261 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 231.0126ms
2022-04-30 18:33:26.985 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=57u1Yk1uUayUflp4mgcDig&code_challenge=XY5NYUiV6cgmTgxb-dJRFY7HAgBybXT11PyKl9mzqP0&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:33:26.993 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 18:33:26.995 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 18:33:26.997 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=57u1Yk1uUayUflp4mgcDig&code_challenge=XY5NYUiV6cgmTgxb-dJRFY7HAgBybXT11PyKl9mzqP0&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 12.2392ms
2022-04-30 18:33:27.097 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3D57u1Yk1uUayUflp4mgcDig%26code_challenge%3DXY5NYUiV6cgmTgxb-dJRFY7HAgBybXT11PyKl9mzqP0%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 18:33:27.113 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:33:27.114 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:33:27.118 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 18:33:27.121 +03:00 [INF] Executed ViewResult - view Login executed in 3.4888ms.
2022-04-30 18:33:27.123 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 5.8708ms
2022-04-30 18:33:27.125 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:33:27.127 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3D57u1Yk1uUayUflp4mgcDig%26code_challenge%3DXY5NYUiV6cgmTgxb-dJRFY7HAgBybXT11PyKl9mzqP0%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 30.7828ms
2022-04-30 18:33:27.200 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 18:33:27.201 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 1.5455ms
2022-04-30 18:36:42.548 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 18:36:42.551 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:36:42.553 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:36:42.555 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:36:42.559 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:36:42.562 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:36:42.565 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:36:42.574 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 18:36:42.590 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 18:36:42.598 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:36:42.599 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=57u1Yk1uUayUflp4mgcDig&code_challenge=XY5NYUiV6cgmTgxb-dJRFY7HAgBybXT11PyKl9mzqP0&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 18:36:42.601 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 42.7987ms
2022-04-30 18:36:42.602 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:36:42.604 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 55.6624ms
2022-04-30 18:36:42.606 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=57u1Yk1uUayUflp4mgcDig&code_challenge=XY5NYUiV6cgmTgxb-dJRFY7HAgBybXT11PyKl9mzqP0&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:36:42.615 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 18:36:42.618 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:36:42.619 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=57u1Yk1uUayUflp4mgcDig&code_challenge=XY5NYUiV6cgmTgxb-dJRFY7HAgBybXT11PyKl9mzqP0&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 13.4924ms
2022-04-30 18:36:42.794 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:36:42.798 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:36:42.801 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 6.6216ms
2022-04-30 18:36:42.802 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:36:42.803 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:36:42.804 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.3267ms
2022-04-30 18:36:42.825 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 18:36:42.831 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 18:36:42.833 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****1B79","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"A56A2595060FD2746EAB91E196BB6514188AEC79DDD0B8E2300652A6A9D31B79","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"GwAZTLYcSRu-GM_o6-vfpVOF24EyoILDxAdARr3sa7I","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 18:36:42.847 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:36:42.850 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:36:42.857 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 32.2575ms
2022-04-30 18:36:42.881 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:36:42.882 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:36:42.884 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 2.9547ms
2022-04-30 18:36:42.885 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:36:42.886 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:36:42.887 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.2604ms
2022-04-30 18:36:42.894 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 18:36:42.897 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 18:36:42.899 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:36:42.903 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:36:42.905 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 18:36:42.907 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 12.4426ms
2022-04-30 18:36:43.789 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:36:43.792 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:36:43.794 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.9731ms
2022-04-30 18:36:43.982 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:36:43.984 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:36:43.986 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.1524ms
2022-04-30 18:54:06.713 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:54:06.715 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:54:06.717 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.6794ms
2022-04-30 18:54:06.741 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:54:06.742 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:54:06.744 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.5593ms
2022-04-30 18:54:09.729 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=mlOFDBKxMXu00a5hrvykVg&code_challenge=6fMzmAaqvXhCiO57tBkra7iPdptUgBIKABFXxDC8zMw&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:54:09.733 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 18:54:09.735 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 18:54:09.736 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=mlOFDBKxMXu00a5hrvykVg&code_challenge=6fMzmAaqvXhCiO57tBkra7iPdptUgBIKABFXxDC8zMw&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 6.9931ms
2022-04-30 18:54:09.740 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DmlOFDBKxMXu00a5hrvykVg%26code_challenge%3D6fMzmAaqvXhCiO57tBkra7iPdptUgBIKABFXxDC8zMw%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 18:54:09.742 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:54:09.744 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:54:09.749 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 18:54:09.752 +03:00 [INF] Executed ViewResult - view Login executed in 4.4689ms.
2022-04-30 18:54:09.754 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 7.2645ms
2022-04-30 18:54:09.756 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:54:09.759 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DmlOFDBKxMXu00a5hrvykVg%26code_challenge%3D6fMzmAaqvXhCiO57tBkra7iPdptUgBIKABFXxDC8zMw%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 19.4795ms
2022-04-30 18:54:09.818 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 18:54:09.819 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 2.0147ms
2022-04-30 18:54:13.885 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 18:54:13.888 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:54:13.890 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:54:13.891 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:54:13.895 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:54:13.912 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:54:13.920 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:54:13.930 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 18:54:13.935 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 18:54:13.938 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:54:13.939 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=mlOFDBKxMXu00a5hrvykVg&code_challenge=6fMzmAaqvXhCiO57tBkra7iPdptUgBIKABFXxDC8zMw&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 18:54:13.941 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 47.9533ms
2022-04-30 18:54:13.943 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:54:13.944 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 60.1245ms
2022-04-30 18:54:13.947 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=mlOFDBKxMXu00a5hrvykVg&code_challenge=6fMzmAaqvXhCiO57tBkra7iPdptUgBIKABFXxDC8zMw&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:54:13.952 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 18:54:13.954 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:54:13.956 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=mlOFDBKxMXu00a5hrvykVg&code_challenge=6fMzmAaqvXhCiO57tBkra7iPdptUgBIKABFXxDC8zMw&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 8.6126ms
2022-04-30 18:54:14.076 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:54:14.079 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:54:14.086 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 10.2414ms
2022-04-30 18:54:14.088 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:54:14.089 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:54:14.091 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.0193ms
2022-04-30 18:54:14.113 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 18:54:14.116 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 18:54:14.119 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****39D6","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"5F5A9A4289BE15C4E50F4BE234E0D8A08F5069715CAC4F104B29F9CFCE8E39D6","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"JqMCyN3YL-HjtCjxjvxVocAn5An1hHybd2bFU32PZVk","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 18:54:14.138 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:54:14.140 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:54:14.147 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 33.5173ms
2022-04-30 18:54:14.181 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:54:14.183 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:54:14.185 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.4614ms
2022-04-30 18:54:14.186 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:54:14.187 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:54:14.189 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.5760ms
2022-04-30 18:54:14.203 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 18:54:14.204 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 18:54:14.207 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:54:14.211 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:54:14.214 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 18:54:14.215 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 12.2536ms
2022-04-30 18:54:33.796 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:54:33.797 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:54:33.800 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.8023ms
2022-04-30 18:54:33.824 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:54:33.825 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:54:33.827 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.1065ms
2022-04-30 18:54:35.559 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=z0fFIQkf3Wlmdyzde3Hs9A&code_challenge=2SlCEB6mZEen0HVqgjtbMxR9O4Nh9tkvYrzWgaR-4-Q&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:54:35.564 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 18:54:35.566 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 18:54:35.568 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=z0fFIQkf3Wlmdyzde3Hs9A&code_challenge=2SlCEB6mZEen0HVqgjtbMxR9O4Nh9tkvYrzWgaR-4-Q&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 8.3110ms
2022-04-30 18:54:35.572 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dz0fFIQkf3Wlmdyzde3Hs9A%26code_challenge%3D2SlCEB6mZEen0HVqgjtbMxR9O4Nh9tkvYrzWgaR-4-Q%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 18:54:35.576 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:54:35.577 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:54:35.580 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 18:54:35.584 +03:00 [INF] Executed ViewResult - view Login executed in 4.1326ms.
2022-04-30 18:54:35.587 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 8.0139ms
2022-04-30 18:54:35.597 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:54:35.601 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dz0fFIQkf3Wlmdyzde3Hs9A%26code_challenge%3D2SlCEB6mZEen0HVqgjtbMxR9O4Nh9tkvYrzWgaR-4-Q%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 28.6581ms
2022-04-30 18:54:35.697 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 18:54:35.699 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 2.1018ms
2022-04-30 18:54:42.454 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 18:54:42.457 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:54:42.459 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:54:42.461 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:54:42.466 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:54:42.468 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:54:42.471 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:54:42.481 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 18:54:42.487 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 18:54:42.490 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:54:42.491 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=z0fFIQkf3Wlmdyzde3Hs9A&code_challenge=2SlCEB6mZEen0HVqgjtbMxR9O4Nh9tkvYrzWgaR-4-Q&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 18:54:42.493 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 27.8634ms
2022-04-30 18:54:42.498 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:54:42.500 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 46.7187ms
2022-04-30 18:54:42.503 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=z0fFIQkf3Wlmdyzde3Hs9A&code_challenge=2SlCEB6mZEen0HVqgjtbMxR9O4Nh9tkvYrzWgaR-4-Q&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:54:42.506 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 18:54:42.511 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:54:42.516 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=z0fFIQkf3Wlmdyzde3Hs9A&code_challenge=2SlCEB6mZEen0HVqgjtbMxR9O4Nh9tkvYrzWgaR-4-Q&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 12.5047ms
2022-04-30 18:54:42.624 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:54:42.626 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:54:42.631 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 6.7725ms
2022-04-30 18:54:42.638 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:54:42.641 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:54:42.644 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 6.0636ms
2022-04-30 18:54:42.670 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 18:54:42.671 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 18:54:42.673 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****1136","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"866C4C9736C538F9D3AFC14E8DE4E9A49B6D1356B37637829CB7F35E86D91136","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"H07ZMveWhuVv_e66pjF0pjOtu0RlXOBUZ2x36r4fleo","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 18:54:42.688 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:54:42.691 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:54:42.697 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 27.2026ms
2022-04-30 18:54:42.727 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:54:42.728 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:54:42.731 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.3606ms
2022-04-30 18:54:42.733 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:54:42.734 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:54:42.736 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.8721ms
2022-04-30 18:54:42.744 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 18:54:42.745 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 18:54:42.747 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:54:42.750 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:54:42.753 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 18:54:42.755 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 11.1880ms
2022-04-30 18:55:11.711 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:55:12.871 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 18:55:12.930 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 18:55:12.939 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-30 18:55:12.946 +03:00 [INF] Initialization DB done
2022-04-30 18:55:13.007 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-30 18:55:13.381 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-30 18:55:13.586 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-30 18:55:13.622 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-30 18:55:14.811 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-30 18:55:14.821 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-30 18:55:14.822 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 18:55:14.824 +03:00 [INF] Hosting environment: Development
2022-04-30 18:55:14.825 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-30 18:55:49.638 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:55:49.776 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:55:49.838 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 202.2980ms
2022-04-30 18:55:49.857 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:55:49.868 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:55:49.920 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 62.6745ms
2022-04-30 18:55:52.001 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=GR0SnROWnPw58JZ8huJb1Q&code_challenge=CGvT5XidD6QEtNiynTHLMdx2skz279U2_zw-3BM3M08&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:55:52.172 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 18:55:52.314 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 18:55:52.323 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=GR0SnROWnPw58JZ8huJb1Q&code_challenge=CGvT5XidD6QEtNiynTHLMdx2skz279U2_zw-3BM3M08&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 321.8214ms
2022-04-30 18:55:52.326 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DGR0SnROWnPw58JZ8huJb1Q%26code_challenge%3DCGvT5XidD6QEtNiynTHLMdx2skz279U2_zw-3BM3M08%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 18:55:52.339 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:55:52.368 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:55:52.399 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 18:55:52.497 +03:00 [INF] Executed ViewResult - view Login executed in 97.5182ms.
2022-04-30 18:55:52.501 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 127.2087ms
2022-04-30 18:55:52.503 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:55:52.507 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DGR0SnROWnPw58JZ8huJb1Q%26code_challenge%3DCGvT5XidD6QEtNiynTHLMdx2skz279U2_zw-3BM3M08%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 180.5438ms
2022-04-30 18:55:52.562 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 18:55:52.566 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 3.8925ms
2022-04-30 18:55:59.447 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 18:55:59.454 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:55:59.456 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:55:59.468 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:55:59.516 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:56:00.020 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:56:00.113 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:56:00.218 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 18:56:00.256 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 18:56:00.267 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:56:00.270 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=GR0SnROWnPw58JZ8huJb1Q&code_challenge=CGvT5XidD6QEtNiynTHLMdx2skz279U2_zw-3BM3M08&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 18:56:00.273 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 802.016ms
2022-04-30 18:56:00.274 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:56:00.276 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 828.9819ms
2022-04-30 18:56:00.278 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=GR0SnROWnPw58JZ8huJb1Q&code_challenge=CGvT5XidD6QEtNiynTHLMdx2skz279U2_zw-3BM3M08&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:56:00.291 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 18:56:00.443 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:56:00.446 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=GR0SnROWnPw58JZ8huJb1Q&code_challenge=CGvT5XidD6QEtNiynTHLMdx2skz279U2_zw-3BM3M08&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 167.4830ms
2022-04-30 18:56:00.565 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:56:00.569 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:56:00.579 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 14.2087ms
2022-04-30 18:56:00.585 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:56:00.587 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:56:00.590 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.8853ms
2022-04-30 18:56:00.617 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 18:56:00.620 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 18:56:00.677 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****9872","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"25BF24A0FE8350DAC4D25921FBBAD5DF1247650AB193B3621079B4EC72119872","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"23kfME8GrGM877NojInKI1MGlcCbqJHzf1VE7Jk_geg","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 18:56:00.752 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:56:00.766 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:56:01.011 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 394.0839ms
2022-04-30 18:56:01.038 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:56:01.048 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:56:01.051 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 13.0681ms
2022-04-30 18:56:01.052 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:56:01.054 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:56:01.055 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.2184ms
2022-04-30 18:56:01.063 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 18:56:01.065 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 18:56:01.140 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:56:01.146 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:56:01.148 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 18:56:01.150 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 87.3158ms
2022-04-30 18:56:01.846 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:56:01.850 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:56:01.853 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 6.9165ms
2022-04-30 18:56:02.027 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:56:02.028 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:56:02.030 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.0000ms
2022-04-30 18:57:26.748 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:57:26.749 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:57:26.752 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.7926ms
2022-04-30 18:57:26.787 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:57:26.789 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:57:26.793 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.8999ms
2022-04-30 18:57:28.314 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=wpXy_IbsOlVQkoh6tF88XA&code_challenge=0CyD3sUVEbzsihnJICQygGulHFc-F7wHqJ8IdeqyrvU&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:57:28.317 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 18:57:28.319 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 18:57:28.321 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=wpXy_IbsOlVQkoh6tF88XA&code_challenge=0CyD3sUVEbzsihnJICQygGulHFc-F7wHqJ8IdeqyrvU&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 6.8725ms
2022-04-30 18:57:28.325 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DwpXy_IbsOlVQkoh6tF88XA%26code_challenge%3D0CyD3sUVEbzsihnJICQygGulHFc-F7wHqJ8IdeqyrvU%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 18:57:28.328 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:57:28.330 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:57:28.334 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 18:57:28.339 +03:00 [INF] Executed ViewResult - view Login executed in 4.8385ms.
2022-04-30 18:57:28.340 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 8.8393ms
2022-04-30 18:57:28.344 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:57:28.348 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DwpXy_IbsOlVQkoh6tF88XA%26code_challenge%3D0CyD3sUVEbzsihnJICQygGulHFc-F7wHqJ8IdeqyrvU%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 23.6776ms
2022-04-30 18:57:28.686 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 18:57:28.687 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 1.8672ms
2022-04-30 18:57:36.422 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 18:57:36.425 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 18:57:36.427 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:57:36.431 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 18:57:36.438 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:57:36.441 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:57:36.449 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 18:57:36.459 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 18:57:36.464 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 18:57:36.467 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:57:36.468 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=wpXy_IbsOlVQkoh6tF88XA&code_challenge=0CyD3sUVEbzsihnJICQygGulHFc-F7wHqJ8IdeqyrvU&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 18:57:36.470 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 33.4077ms
2022-04-30 18:57:36.471 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 18:57:36.473 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 51.1145ms
2022-04-30 18:57:36.479 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=wpXy_IbsOlVQkoh6tF88XA&code_challenge=0CyD3sUVEbzsihnJICQygGulHFc-F7wHqJ8IdeqyrvU&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 18:57:36.483 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 18:57:36.486 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 18:57:36.488 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=wpXy_IbsOlVQkoh6tF88XA&code_challenge=0CyD3sUVEbzsihnJICQygGulHFc-F7wHqJ8IdeqyrvU&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 8.3061ms
2022-04-30 18:57:36.583 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:57:36.585 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:57:36.590 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 7.4984ms
2022-04-30 18:57:36.592 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:57:36.593 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:57:36.596 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.7608ms
2022-04-30 18:57:36.618 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 18:57:36.620 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 18:57:36.622 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****DEE8","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"02B201E85680FF8632372C84419D509CF944A8D5326ABD1DB58E935B1F23DEE8","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"-svh5nsA2bMhC6SYDi_oIr7II_gsUJtqeyJDbY69GpQ","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 18:57:36.636 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:57:36.639 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:57:36.643 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 25.0067ms
2022-04-30 18:57:36.674 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 18:57:36.676 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 18:57:36.678 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.3440ms
2022-04-30 18:57:36.679 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 18:57:36.681 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 18:57:36.682 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.8806ms
2022-04-30 18:57:36.696 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 18:57:36.698 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 18:57:36.700 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 18:57:36.703 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 18:57:36.706 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 18:57:36.707 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 11.1861ms
2022-04-30 19:24:29.020 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 19:24:29.035 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 19:24:29.039 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 19.7760ms
2022-04-30 19:24:29.071 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 19:24:29.073 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 19:24:29.076 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.5803ms
2022-04-30 19:24:33.301 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=PptBTdxF7IA5CN9hm7uiAQ&code_challenge=1MlC0UOLR1NWX9W91hLnU7vfvl54LLvl-x2mtzICpBw&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 19:24:33.311 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 19:24:33.313 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 19:24:33.314 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=PptBTdxF7IA5CN9hm7uiAQ&code_challenge=1MlC0UOLR1NWX9W91hLnU7vfvl54LLvl-x2mtzICpBw&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 13.0036ms
2022-04-30 19:24:33.326 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DPptBTdxF7IA5CN9hm7uiAQ%26code_challenge%3D1MlC0UOLR1NWX9W91hLnU7vfvl54LLvl-x2mtzICpBw%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 19:24:33.330 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 19:24:33.332 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 19:24:33.340 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 19:24:33.344 +03:00 [INF] Executed ViewResult - view Login executed in 6.1659ms.
2022-04-30 19:24:33.346 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 8.5988ms
2022-04-30 19:24:33.349 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 19:24:33.356 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DPptBTdxF7IA5CN9hm7uiAQ%26code_challenge%3D1MlC0UOLR1NWX9W91hLnU7vfvl54LLvl-x2mtzICpBw%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 31.2970ms
2022-04-30 19:24:33.435 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 19:24:33.437 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 1.8946ms
2022-04-30 19:24:43.286 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 19:24:43.289 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 19:24:43.293 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 19:24:43.297 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 19:24:43.303 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 19:24:43.314 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 19:24:43.323 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 19:24:43.339 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 19:24:43.346 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 19:24:43.355 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 19:24:43.357 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=PptBTdxF7IA5CN9hm7uiAQ&code_challenge=1MlC0UOLR1NWX9W91hLnU7vfvl54LLvl-x2mtzICpBw&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 19:24:43.361 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 59.3556ms
2022-04-30 19:24:43.363 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 19:24:43.370 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 83.6528ms
2022-04-30 19:24:43.376 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=PptBTdxF7IA5CN9hm7uiAQ&code_challenge=1MlC0UOLR1NWX9W91hLnU7vfvl54LLvl-x2mtzICpBw&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 19:24:43.389 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 19:24:43.394 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 19:24:43.397 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=PptBTdxF7IA5CN9hm7uiAQ&code_challenge=1MlC0UOLR1NWX9W91hLnU7vfvl54LLvl-x2mtzICpBw&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 21.1687ms
2022-04-30 19:24:43.535 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 19:24:43.537 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 19:24:43.544 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 8.2405ms
2022-04-30 19:24:43.547 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 19:24:43.549 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 19:24:43.552 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.3574ms
2022-04-30 19:24:43.574 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 19:24:43.595 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 19:24:43.600 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****E111","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"E780266DA63AABBA81743FD2ACC824E6078568D429CD6ABC9838BE13FB63E111","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"ulqmyejz5p-LioZho7ceU96cZ1Lz9vvz4n-sO3mTQyw","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 19:24:43.626 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 19:24:43.631 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 19:24:43.641 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 67.0377ms
2022-04-30 19:24:43.688 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 19:24:43.691 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 19:24:43.694 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 5.6391ms
2022-04-30 19:24:43.696 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 19:24:43.697 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 19:24:43.700 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.1006ms
2022-04-30 19:24:43.721 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 19:24:43.730 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 19:24:43.734 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 19:24:43.738 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 19:24:43.744 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 19:24:43.746 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 24.8475ms
2022-04-30 19:33:31.799 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 19:33:31.804 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 19:33:31.811 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 12.0965ms
2022-04-30 19:33:32.135 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 19:33:32.137 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 19:33:32.139 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.7811ms
2022-04-30 19:37:24.497 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 19:37:24.872 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 19:37:24.882 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-30 19:37:24.887 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-30 19:37:24.894 +03:00 [INF] Initialization DB done
2022-04-30 19:37:24.973 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-30 19:37:25.077 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-30 19:37:25.090 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-30 19:37:25.103 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-30 19:37:25.535 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-30 19:37:25.536 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-30 19:37:25.539 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-30 19:37:25.540 +03:00 [INF] Hosting environment: Development
2022-04-30 19:37:25.542 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-30 19:37:30.729 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 19:37:30.862 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 19:37:30.988 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 262.0101ms
2022-04-30 19:37:31.325 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 19:37:31.334 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 19:37:31.420 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 95.5590ms
2022-04-30 19:48:52.670 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 19:48:52.688 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 19:48:52.692 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 21.7729ms
2022-04-30 19:48:53.038 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 19:48:53.058 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 19:48:53.069 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 30.5885ms
2022-04-30 20:15:21.799 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 20:15:21.817 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 20:15:21.819 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 19.7129ms
2022-04-30 20:15:21.847 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 20:15:21.849 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 20:15:21.852 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.7095ms
2022-04-30 20:15:24.896 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=EtTMS4X8fd-ddxIFTK3nVQ&code_challenge=nxIWQpXY8HV3__qbyQZVq4RpJKLSZUjMC9DNVpBxmbg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 20:15:24.978 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 20:15:25.235 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 20:15:25.247 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=EtTMS4X8fd-ddxIFTK3nVQ&code_challenge=nxIWQpXY8HV3__qbyQZVq4RpJKLSZUjMC9DNVpBxmbg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 351.7046ms
2022-04-30 20:15:25.252 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DEtTMS4X8fd-ddxIFTK3nVQ%26code_challenge%3DnxIWQpXY8HV3__qbyQZVq4RpJKLSZUjMC9DNVpBxmbg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 20:15:25.263 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 20:15:25.288 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 20:15:25.323 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 20:15:25.422 +03:00 [INF] Executed ViewResult - view Login executed in 101.3516ms.
2022-04-30 20:15:25.426 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 132.1402ms
2022-04-30 20:15:25.428 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 20:15:25.434 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3DEtTMS4X8fd-ddxIFTK3nVQ%26code_challenge%3DnxIWQpXY8HV3__qbyQZVq4RpJKLSZUjMC9DNVpBxmbg%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 182.1342ms
2022-04-30 20:15:25.502 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 20:15:25.507 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 5.6365ms
2022-04-30 20:15:37.167 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 20:15:37.175 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 20:15:37.177 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 20:15:37.190 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 20:15:37.297 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 20:15:37.792 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 20:15:37.871 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 20:15:37.943 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 20:15:37.982 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 20:15:37.995 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 20:15:37.997 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=EtTMS4X8fd-ddxIFTK3nVQ&code_challenge=nxIWQpXY8HV3__qbyQZVq4RpJKLSZUjMC9DNVpBxmbg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 20:15:38.000 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 806.1193ms
2022-04-30 20:15:38.001 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 20:15:38.003 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 836.1979ms
2022-04-30 20:15:38.005 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=EtTMS4X8fd-ddxIFTK3nVQ&code_challenge=nxIWQpXY8HV3__qbyQZVq4RpJKLSZUjMC9DNVpBxmbg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 20:15:38.013 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 20:15:38.168 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 20:15:38.171 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=EtTMS4X8fd-ddxIFTK3nVQ&code_challenge=nxIWQpXY8HV3__qbyQZVq4RpJKLSZUjMC9DNVpBxmbg&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 166.3165ms
2022-04-30 20:15:38.277 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 20:15:38.279 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 20:15:38.282 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.9685ms
2022-04-30 20:15:38.286 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 20:15:38.289 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 20:15:38.292 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.2964ms
2022-04-30 20:15:38.317 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 20:15:38.321 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 20:15:38.408 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****83AC","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"5DAC1DF4D73274A1D82F317CEA53C2DFE10EBCA7FFA819F6678ECAFB0A8B83AC","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"53HsqncoHteaWlV3KiD6cYM1yCCLSjYugkIX75JJkFk","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 20:15:38.492 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 20:15:38.509 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 20:15:38.653 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 336.4797ms
2022-04-30 20:15:38.686 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 20:15:38.688 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 20:15:38.690 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.0979ms
2022-04-30 20:15:38.692 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 20:15:38.696 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 20:15:38.698 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.9809ms
2022-04-30 20:15:38.712 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 20:15:38.714 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 20:15:38.802 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 20:15:38.807 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 20:15:38.811 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 20:15:38.813 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 101.0675ms
2022-04-30 20:16:20.887 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 20:16:20.889 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 20:16:20.892 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.5389ms
2022-04-30 20:16:20.923 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 20:16:20.925 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 20:16:20.928 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.0352ms
2022-04-30 20:16:24.810 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=p3keUD7sFSnsKD7K1TM0Pg&code_challenge=pVFn29h3T_1Z-OSTlwZiog0R883V4mwuTXiGsIA9B7Y&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 20:16:24.823 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-30 20:16:24.825 +03:00 [INF] Showing login: User is not authenticated
2022-04-30 20:16:24.826 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&state=p3keUD7sFSnsKD7K1TM0Pg&code_challenge=pVFn29h3T_1Z-OSTlwZiog0R883V4mwuTXiGsIA9B7Y&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 16.6491ms
2022-04-30 20:16:24.831 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dp3keUD7sFSnsKD7K1TM0Pg%26code_challenge%3DpVFn29h3T_1Z-OSTlwZiog0R883V4mwuTXiGsIA9B7Y%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - -
2022-04-30 20:16:24.834 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 20:16:24.838 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 20:16:24.847 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-30 20:16:24.854 +03:00 [INF] Executed ViewResult - view Login executed in 7.1757ms.
2022-04-30 20:16:24.864 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 21.3862ms
2022-04-30 20:16:24.872 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 20:16:24.876 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26state%3Dp3keUD7sFSnsKD7K1TM0Pg%26code_challenge%3DpVFn29h3T_1Z-OSTlwZiog0R883V4mwuTXiGsIA9B7Y%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%2520PollSystem.SignalR%2520offline_access%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%252Fsample-wpf-app - - - 200 - text/html;+charset=utf-8 45.6619ms
2022-04-30 20:16:24.934 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-30 20:16:24.936 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 2.3725ms
2022-04-30 20:16:28.820 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590
2022-04-30 20:16:28.834 +03:00 [INF] No CORS policy found for the specified request.
2022-04-30 20:16:28.836 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 20:16:28.843 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-30 20:16:28.848 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 20:16:28.852 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 20:16:28.862 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 9)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-30 20:16:28.876 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-30 20:16:28.887 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-30 20:16:28.892 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 20:16:28.893 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&state=p3keUD7sFSnsKD7K1TM0Pg&code_challenge=pVFn29h3T_1Z-OSTlwZiog0R883V4mwuTXiGsIA9B7Y&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app.
2022-04-30 20:16:28.901 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 54.9964ms
2022-04-30 20:16:28.903 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-30 20:16:28.905 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 590 - 302 0 - 84.8524ms
2022-04-30 20:16:28.908 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=p3keUD7sFSnsKD7K1TM0Pg&code_challenge=pVFn29h3T_1Z-OSTlwZiog0R883V4mwuTXiGsIA9B7Y&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - -
2022-04-30 20:16:28.913 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-30 20:16:28.918 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-30 20:16:28.919 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&state=p3keUD7sFSnsKD7K1TM0Pg&code_challenge=pVFn29h3T_1Z-OSTlwZiog0R883V4mwuTXiGsIA9B7Y&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI%20PollSystem.SignalR%20offline_access&redirect_uri=http%3A%2F%2F127.0.0.1%2Fsample-wpf-app - - - 302 0 - 10.9504ms
2022-04-30 20:16:29.017 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 20:16:29.019 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 20:16:29.024 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 7.4710ms
2022-04-30 20:16:29.027 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 20:16:29.030 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 20:16:29.032 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.2293ms
2022-04-30 20:16:29.056 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228
2022-04-30 20:16:29.057 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-30 20:16:29.059 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****2F28","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"04DC1B78A3B08815A8D44E1BFF56DE2FABC59EBE56B54CA8C70411B930502F28","redirect_uri":"http://127.0.0.1/sample-wpf-app","code_verifier":"P2DVM09H4sAfVfe9v4fmQePilkeN3tm2ty8gGa848No","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-30 20:16:29.075 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 20:16:29.079 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 20:16:29.088 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 228 - 200 - application/json;+charset=UTF-8 31.6158ms
2022-04-30 20:16:29.115 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 20:16:29.117 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 20:16:29.119 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.6494ms
2022-04-30 20:16:29.120 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 20:16:29.121 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 20:16:29.123 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.3884ms
2022-04-30 20:16:29.134 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-30 20:16:29.136 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-30 20:16:29.137 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-30 20:16:29.140 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-30 20:16:29.143 +03:00 [INF] Profile service returned the following claim types: name
2022-04-30 20:16:29.146 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 11.3927ms
2022-04-30 20:16:30.165 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-30 20:16:30.167 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-30 20:16:30.170 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.4287ms
2022-04-30 20:16:30.403 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-30 20:16:30.404 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-30 20:16:30.406 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 2.8863ms
