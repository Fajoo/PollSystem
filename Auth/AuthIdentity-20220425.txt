2022-04-25 18:32:36.908 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 18:32:37.182 +03:00 [INF] Executed DbCommand (120ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2022-04-25 18:32:37.306 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Roles" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Roles" PRIMARY KEY,
    "Name" TEXT NULL,
    "NormalizedName" TEXT NULL,
    "ConcurrencyStamp" TEXT NULL
);
2022-04-25 18:32:37.309 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Users" PRIMARY KEY,
    "FirstName" TEXT NULL,
    "LastName" TEXT NULL,
    "UserName" TEXT NULL,
    "NormalizedUserName" TEXT NULL,
    "Email" TEXT NULL,
    "NormalizedEmail" TEXT NULL,
    "EmailConfirmed" INTEGER NOT NULL,
    "PasswordHash" TEXT NULL,
    "SecurityStamp" TEXT NULL,
    "ConcurrencyStamp" TEXT NULL,
    "PhoneNumber" TEXT NULL,
    "PhoneNumberConfirmed" INTEGER NOT NULL,
    "TwoFactorEnabled" INTEGER NOT NULL,
    "LockoutEnd" TEXT NULL,
    "LockoutEnabled" INTEGER NOT NULL,
    "AccessFailedCount" INTEGER NOT NULL
);
2022-04-25 18:32:37.313 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "RoleClaims" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_RoleClaims" PRIMARY KEY AUTOINCREMENT,
    "RoleId" TEXT NOT NULL,
    "ClaimType" TEXT NULL,
    "ClaimValue" TEXT NULL,
    CONSTRAINT "FK_RoleClaims_Roles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "Roles" ("Id") ON DELETE CASCADE
);
2022-04-25 18:32:37.316 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserClaim" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_UserClaim" PRIMARY KEY AUTOINCREMENT,
    "UserId" TEXT NOT NULL,
    "ClaimType" TEXT NULL,
    "ClaimValue" TEXT NULL,
    CONSTRAINT "FK_UserClaim_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2022-04-25 18:32:37.319 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserLogins" (
    "LoginProvider" TEXT NOT NULL,
    "ProviderKey" TEXT NOT NULL,
    "ProviderDisplayName" TEXT NULL,
    "UserId" TEXT NOT NULL,
    CONSTRAINT "PK_UserLogins" PRIMARY KEY ("LoginProvider", "ProviderKey"),
    CONSTRAINT "FK_UserLogins_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2022-04-25 18:32:37.323 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserRoles" (
    "UserId" TEXT NOT NULL,
    "RoleId" TEXT NOT NULL,
    CONSTRAINT "PK_UserRoles" PRIMARY KEY ("UserId", "RoleId"),
    CONSTRAINT "FK_UserRoles_Roles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "Roles" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_UserRoles_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2022-04-25 18:32:37.327 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserTokens" (
    "UserId" TEXT NOT NULL,
    "LoginProvider" TEXT NOT NULL,
    "Name" TEXT NOT NULL,
    "Value" TEXT NULL,
    CONSTRAINT "PK_UserTokens" PRIMARY KEY ("UserId", "LoginProvider", "Name"),
    CONSTRAINT "FK_UserTokens_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2022-04-25 18:32:37.331 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_RoleClaims_RoleId" ON "RoleClaims" ("RoleId");
2022-04-25 18:32:37.333 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "RoleNameIndex" ON "Roles" ("NormalizedName");
2022-04-25 18:32:37.335 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_UserClaim_UserId" ON "UserClaim" ("UserId");
2022-04-25 18:32:37.338 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_UserLogins_UserId" ON "UserLogins" ("UserId");
2022-04-25 18:32:37.340 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_UserRoles_RoleId" ON "UserRoles" ("RoleId");
2022-04-25 18:32:37.342 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "EmailIndex" ON "Users" ("NormalizedEmail");
2022-04-25 18:32:37.346 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "UserNameIndex" ON "Users" ("NormalizedUserName");
2022-04-25 18:32:37.425 +03:00 [INF] DB successfully created
2022-04-25 18:32:37.427 +03:00 [INF] Initialization DB done
2022-04-25 18:32:37.473 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-25 18:32:37.575 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-25 18:32:37.595 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-25 18:32:37.610 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-25 18:32:37.918 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-25 18:32:37.920 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-25 18:32:37.921 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-25 18:32:37.922 +03:00 [INF] Hosting environment: Development
2022-04-25 18:32:37.923 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-25 18:34:38.010 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 18:34:38.155 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 18:34:38.248 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 241.8378ms
2022-04-25 18:34:38.287 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 18:34:38.296 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 18:34:38.364 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 77.1506ms
2022-04-25 18:34:38.831 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&nonce=hoUJcjQkRPX2okYd4AKDmQ&state=3R5uc9DeSExwa5cI_usUCA&code_challenge=Z2zfjRHxps7ITaBd90iJkb8XYG1GIMqGv6r5yST5LFU&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23907 - -
2022-04-25 18:34:39.006 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-25 18:34:39.112 +03:00 [ERR] Invalid redirect_uri: http://127.0.0.1:23907
{"ClientId":"wpf-app","ClientName":"Auth Web","RedirectUri":null,"AllowedRedirectUris":["http://localhost/sample-wpf-app"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"code","nonce":"hoUJcjQkRPX2okYd4AKDmQ","state":"3R5uc9DeSExwa5cI_usUCA","code_challenge":"Z2zfjRHxps7ITaBd90iJkb8XYG1GIMqGv6r5yST5LFU","code_challenge_method":"S256","client_id":"wpf-app","scope":"openid profile PollSystemAPI","redirect_uri":"http://127.0.0.1:23907"},"$type":"AuthorizeRequestValidationLog"}
2022-04-25 18:34:39.142 +03:00 [ERR] Request validation failed
2022-04-25 18:34:39.144 +03:00 [INF] {"ClientId":"wpf-app","ClientName":"Auth Web","RedirectUri":null,"AllowedRedirectUris":["http://localhost/sample-wpf-app"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"code","nonce":"hoUJcjQkRPX2okYd4AKDmQ","state":"3R5uc9DeSExwa5cI_usUCA","code_challenge":"Z2zfjRHxps7ITaBd90iJkb8XYG1GIMqGv6r5yST5LFU","code_challenge_method":"S256","client_id":"wpf-app","scope":"openid profile PollSystemAPI","redirect_uri":"http://127.0.0.1:23907"},"$type":"AuthorizeRequestValidationLog"}
2022-04-25 18:34:39.197 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&nonce=hoUJcjQkRPX2okYd4AKDmQ&state=3R5uc9DeSExwa5cI_usUCA&code_challenge=Z2zfjRHxps7ITaBd90iJkb8XYG1GIMqGv6r5yST5LFU&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23907 - - - 302 0 - 366.4675ms
2022-04-25 18:34:39.223 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/home/error?errorId=CfDJ8KgbXPqOffFBh3v38e5V22UqQlQQfz8MNGtXNlSDTkaAH3wdt2_YwDTb7aCUcixuO1CUDng4ZaS63jGurxDtxCqKKCp_wkhKwU1X22AlQB-rDxVRd0GCBNe7jRsGyzxwLTpn1gfm8qwct-Y6N6z472ouxAs1aLXC7Fkt6eFJXc93JRQVxieLpOYELnt5b505znDaCaPxf-Jj0Dc-fMAeejCZ7TWeL1vH7Wex4OA1_mi4inf-YuWGAdzyl6a7ocPnim72iGutYiA6gphPnL_Z6Fo9Gcz6-1-mLXOZ0TtCdyxYoOlWMeP1akIVmVct-BhlBBA3VL8yScoz3GyujDEb9xo - -
2022-04-25 18:34:39.227 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/home/error?errorId=CfDJ8KgbXPqOffFBh3v38e5V22UqQlQQfz8MNGtXNlSDTkaAH3wdt2_YwDTb7aCUcixuO1CUDng4ZaS63jGurxDtxCqKKCp_wkhKwU1X22AlQB-rDxVRd0GCBNe7jRsGyzxwLTpn1gfm8qwct-Y6N6z472ouxAs1aLXC7Fkt6eFJXc93JRQVxieLpOYELnt5b505znDaCaPxf-Jj0Dc-fMAeejCZ7TWeL1vH7Wex4OA1_mi4inf-YuWGAdzyl6a7ocPnim72iGutYiA6gphPnL_Z6Fo9Gcz6-1-mLXOZ0TtCdyxYoOlWMeP1akIVmVct-BhlBBA3VL8yScoz3GyujDEb9xo - - - 404 0 - 3.7317ms
2022-04-25 18:36:38.308 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 18:36:38.489 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 18:36:38.502 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 18:36:38.507 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-25 18:36:38.515 +03:00 [INF] Initialization DB done
2022-04-25 18:36:38.567 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-25 18:36:38.644 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-25 18:36:38.657 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-25 18:36:38.667 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-25 18:36:38.911 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-25 18:36:38.912 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-25 18:36:38.913 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-25 18:36:38.915 +03:00 [INF] Hosting environment: Development
2022-04-25 18:36:38.916 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-25 18:36:47.006 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 18:36:47.066 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 18:36:47.116 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 113.6781ms
2022-04-25 18:36:47.148 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 18:36:47.158 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 18:36:47.187 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 38.8558ms
2022-04-25 18:36:47.975 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&nonce=BPa3dlNsiyZD2wAWGYWPyg&state=71KcGJJlTJFrBGjJaKprXA&code_challenge=_HFTTHXRQlz0hLOOpwntTDityzrxoHvkwHZ1bAgkXXA&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920 - -
2022-04-25 18:36:48.007 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-25 18:36:48.072 +03:00 [ERR] Invalid redirect_uri: http://127.0.0.1:23920
{"ClientId":"wpf-app","ClientName":"Auth Web","RedirectUri":null,"AllowedRedirectUris":["http://127.0.0.1:23907/"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"code","nonce":"BPa3dlNsiyZD2wAWGYWPyg","state":"71KcGJJlTJFrBGjJaKprXA","code_challenge":"_HFTTHXRQlz0hLOOpwntTDityzrxoHvkwHZ1bAgkXXA","code_challenge_method":"S256","client_id":"wpf-app","scope":"openid profile PollSystemAPI","redirect_uri":"http://127.0.0.1:23920"},"$type":"AuthorizeRequestValidationLog"}
2022-04-25 18:36:48.101 +03:00 [ERR] Request validation failed
2022-04-25 18:36:48.102 +03:00 [INF] {"ClientId":"wpf-app","ClientName":"Auth Web","RedirectUri":null,"AllowedRedirectUris":["http://127.0.0.1:23907/"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"code","nonce":"BPa3dlNsiyZD2wAWGYWPyg","state":"71KcGJJlTJFrBGjJaKprXA","code_challenge":"_HFTTHXRQlz0hLOOpwntTDityzrxoHvkwHZ1bAgkXXA","code_challenge_method":"S256","client_id":"wpf-app","scope":"openid profile PollSystemAPI","redirect_uri":"http://127.0.0.1:23920"},"$type":"AuthorizeRequestValidationLog"}
2022-04-25 18:36:48.143 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&nonce=BPa3dlNsiyZD2wAWGYWPyg&state=71KcGJJlTJFrBGjJaKprXA&code_challenge=_HFTTHXRQlz0hLOOpwntTDityzrxoHvkwHZ1bAgkXXA&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920 - - - 302 0 - 168.1919ms
2022-04-25 18:36:48.177 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/home/error?errorId=CfDJ8KgbXPqOffFBh3v38e5V22WTKCoMIODuKgZpTfG1UYBBHNYadcgJFikt5UpEnVDj73v_OXlIyQbsoOLLGhGzLNpUzXYBnITCgYaiBtP9d6Y3NUSoEN9d73smQoKLlbnhrP5UAFsq6eaACdP1Lh5qpoVvmHD4mS6HlJhUuEZ71fl5GPbToGZ4-x6m6ktwEL29lBoeyUD-02ynZE_bAgJlqFzJGUx6u0llE2vzuXz26ndrmPbvpMn0cL8LUbBurH_ikGW1s_1nPop-PNUcEo8USKDOLR4LXjM-z_Zw0NYzaUBWva1F4PNL92-uC_Hilif8T7wx_P1kj9FODGcWuHDucAk - -
2022-04-25 18:36:48.181 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/home/error?errorId=CfDJ8KgbXPqOffFBh3v38e5V22WTKCoMIODuKgZpTfG1UYBBHNYadcgJFikt5UpEnVDj73v_OXlIyQbsoOLLGhGzLNpUzXYBnITCgYaiBtP9d6Y3NUSoEN9d73smQoKLlbnhrP5UAFsq6eaACdP1Lh5qpoVvmHD4mS6HlJhUuEZ71fl5GPbToGZ4-x6m6ktwEL29lBoeyUD-02ynZE_bAgJlqFzJGUx6u0llE2vzuXz26ndrmPbvpMn0cL8LUbBurH_ikGW1s_1nPop-PNUcEo8USKDOLR4LXjM-z_Zw0NYzaUBWva1F4PNL92-uC_Hilif8T7wx_P1kj9FODGcWuHDucAk - - - 404 0 - 3.8152ms
2022-04-25 18:39:58.593 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 18:39:58.754 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 18:39:58.764 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 18:39:58.771 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-25 18:39:58.776 +03:00 [INF] Initialization DB done
2022-04-25 18:39:58.821 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-25 18:39:58.905 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-25 18:39:58.922 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-25 18:39:58.935 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-25 18:39:59.148 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-25 18:39:59.149 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-25 18:39:59.152 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-25 18:39:59.154 +03:00 [INF] Hosting environment: Development
2022-04-25 18:39:59.155 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-25 18:40:09.614 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 18:40:09.672 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 18:40:09.718 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 106.3417ms
2022-04-25 18:40:09.737 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 18:40:09.755 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 18:40:09.786 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 49.2077ms
2022-04-25 18:40:10.208 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&nonce=q-29zmITbSWcN_uJUptkyw&state=gpwOQ-5Zw7XyZhkFPI_yTQ&code_challenge=P96bcj6JDmzGpqSAwra7mCFHb12TQKMFjZtNsmEoD8w&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F - -
2022-04-25 18:40:10.240 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-25 18:40:10.296 +03:00 [ERR] Invalid redirect_uri: http://127.0.0.1:23920/
{"ClientId":"wpf-app","ClientName":"Auth Web","RedirectUri":null,"AllowedRedirectUris":["http://127.0.0.1:23907/"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"code","nonce":"q-29zmITbSWcN_uJUptkyw","state":"gpwOQ-5Zw7XyZhkFPI_yTQ","code_challenge":"P96bcj6JDmzGpqSAwra7mCFHb12TQKMFjZtNsmEoD8w","code_challenge_method":"S256","client_id":"wpf-app","scope":"openid profile PollSystemAPI","redirect_uri":"http://127.0.0.1:23920/"},"$type":"AuthorizeRequestValidationLog"}
2022-04-25 18:40:10.327 +03:00 [ERR] Request validation failed
2022-04-25 18:40:10.328 +03:00 [INF] {"ClientId":"wpf-app","ClientName":"Auth Web","RedirectUri":null,"AllowedRedirectUris":["http://127.0.0.1:23907/"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"code","nonce":"q-29zmITbSWcN_uJUptkyw","state":"gpwOQ-5Zw7XyZhkFPI_yTQ","code_challenge":"P96bcj6JDmzGpqSAwra7mCFHb12TQKMFjZtNsmEoD8w","code_challenge_method":"S256","client_id":"wpf-app","scope":"openid profile PollSystemAPI","redirect_uri":"http://127.0.0.1:23920/"},"$type":"AuthorizeRequestValidationLog"}
2022-04-25 18:40:10.374 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&nonce=q-29zmITbSWcN_uJUptkyw&state=gpwOQ-5Zw7XyZhkFPI_yTQ&code_challenge=P96bcj6JDmzGpqSAwra7mCFHb12TQKMFjZtNsmEoD8w&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F - - - 302 0 - 165.4616ms
2022-04-25 18:40:10.428 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/home/error?errorId=CfDJ8KgbXPqOffFBh3v38e5V22UFArbMYVFTMGNZLF7zxc5N-4n3e2Hf1gmE0Ld9HaLPE66otxzYAq4ea0RbVGjKOqQ_m2yG0K53AyLu2AG53KQUibw6VNNm5gnQHQ24QvmyjeupqZZKsE-DPfDKAf9kkZOAcJdZrcUw_IscufC59jC1YSgrDEmXl4vlyf1Wr8OEghg-tNfM0e6yNkFhwsve6u6bIUIiU9BHky_7Ss7ghf723h_ClUkghdPEIAtH7hWitaI5khwpBIf2YVshMlfYR2QbDQTgCvudN0VQZJ1rIfDL1HExbgT8mxZvDOln2rUbJ5pXBPtCL1F7XOrLtxwv-20 - -
2022-04-25 18:40:10.431 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/home/error?errorId=CfDJ8KgbXPqOffFBh3v38e5V22UFArbMYVFTMGNZLF7zxc5N-4n3e2Hf1gmE0Ld9HaLPE66otxzYAq4ea0RbVGjKOqQ_m2yG0K53AyLu2AG53KQUibw6VNNm5gnQHQ24QvmyjeupqZZKsE-DPfDKAf9kkZOAcJdZrcUw_IscufC59jC1YSgrDEmXl4vlyf1Wr8OEghg-tNfM0e6yNkFhwsve6u6bIUIiU9BHky_7Ss7ghf723h_ClUkghdPEIAtH7hWitaI5khwpBIf2YVshMlfYR2QbDQTgCvudN0VQZJ1rIfDL1HExbgT8mxZvDOln2rUbJ5pXBPtCL1F7XOrLtxwv-20 - - - 404 0 - 2.9724ms
2022-04-25 18:40:50.541 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login - -
2022-04-25 18:40:50.551 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-25 18:40:50.790 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-25 18:40:51.270 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-25 18:40:51.514 +03:00 [INF] Executed ViewResult - view Login executed in 283.5205ms.
2022-04-25 18:40:51.517 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 723.7893ms
2022-04-25 18:40:51.519 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-25 18:40:51.524 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login - - - 200 - text/html;+charset=utf-8 982.6589ms
2022-04-25 18:40:51.779 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/favicon.ico - -
2022-04-25 18:40:51.783 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/favicon.ico - - - 404 0 - 4.1442ms
2022-04-25 18:40:55.560 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Register - -
2022-04-25 18:40:55.563 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-25 18:40:55.566 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-25 18:40:55.575 +03:00 [INF] Executing ViewResult, running view Register.
2022-04-25 18:40:55.591 +03:00 [INF] Executed ViewResult - view Register executed in 16.6131ms.
2022-04-25 18:40:55.593 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 23.8559ms
2022-04-25 18:40:55.596 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-25 18:40:55.597 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Register - - - 200 - text/html;+charset=utf-8 37.9705ms
2022-04-25 18:41:16.924 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Register application/x-www-form-urlencoded 250
2022-04-25 18:41:16.931 +03:00 [INF] No CORS policy found for the specified request.
2022-04-25 18:41:16.933 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-25 18:41:16.945 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Auth.Identity.ViewModel.RegisterViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-25 18:41:16.971 +03:00 [INF] Executing ViewResult, running view Register.
2022-04-25 18:41:16.975 +03:00 [INF] Executed ViewResult - view Register executed in 4.1861ms.
2022-04-25 18:41:16.977 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 29.8589ms
2022-04-25 18:41:16.978 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-25 18:41:16.980 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Register application/x-www-form-urlencoded 250 - 200 - text/html;+charset=utf-8 56.2470ms
2022-04-25 18:41:18.993 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login - -
2022-04-25 18:41:18.995 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-25 18:41:18.997 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-25 18:41:19.000 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-25 18:41:19.003 +03:00 [INF] Executed ViewResult - view Login executed in 2.9174ms.
2022-04-25 18:41:19.005 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 4.9824ms
2022-04-25 18:41:19.006 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-25 18:41:19.008 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login - - - 200 - text/html;+charset=utf-8 15.1239ms
2022-04-25 18:41:21.684 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 225
2022-04-25 18:41:21.688 +03:00 [INF] No CORS policy found for the specified request.
2022-04-25 18:41:21.689 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-25 18:41:21.692 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-25 18:41:21.698 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-25 18:41:21.702 +03:00 [INF] Executed ViewResult - view Login executed in 3.4487ms.
2022-04-25 18:41:21.705 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 10.1436ms
2022-04-25 18:41:21.708 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-25 18:41:21.709 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 225 - 200 - text/html;+charset=utf-8 24.9571ms
2022-04-25 18:41:30.579 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 225
2022-04-25 18:41:30.582 +03:00 [INF] No CORS policy found for the specified request.
2022-04-25 18:41:30.585 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-25 18:41:30.587 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-25 18:41:30.590 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-25 18:41:30.591 +03:00 [INF] Executed ViewResult - view Login executed in 1.7151ms.
2022-04-25 18:41:30.593 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 3.8128ms
2022-04-25 18:41:30.594 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-25 18:41:30.595 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 225 - 200 - text/html;+charset=utf-8 16.1058ms
2022-04-25 18:42:13.345 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 18:42:13.347 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 18:42:13.350 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 5.1351ms
2022-04-25 18:42:13.367 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 18:42:13.369 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 18:42:13.370 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.4608ms
2022-04-25 18:42:13.757 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&nonce=joiCrC0S43lgADM4Q6WxXA&state=185nXJIorJDl-QIcAZkO6w&code_challenge=BrgPZAph3TziF_Bkoa4jXs-XOmIwMSBphSdy9l5IzwU&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F - -
2022-04-25 18:42:13.760 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-25 18:42:13.762 +03:00 [ERR] Invalid redirect_uri: http://127.0.0.1:23920/
{"ClientId":"wpf-app","ClientName":"Auth Web","RedirectUri":null,"AllowedRedirectUris":["http://127.0.0.1:23907/"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"code","nonce":"joiCrC0S43lgADM4Q6WxXA","state":"185nXJIorJDl-QIcAZkO6w","code_challenge":"BrgPZAph3TziF_Bkoa4jXs-XOmIwMSBphSdy9l5IzwU","code_challenge_method":"S256","client_id":"wpf-app","scope":"openid profile PollSystemAPI","redirect_uri":"http://127.0.0.1:23920/"},"$type":"AuthorizeRequestValidationLog"}
2022-04-25 18:42:13.788 +03:00 [ERR] Request validation failed
2022-04-25 18:42:13.790 +03:00 [INF] {"ClientId":"wpf-app","ClientName":"Auth Web","RedirectUri":null,"AllowedRedirectUris":["http://127.0.0.1:23907/"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"","MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"response_type":"code","nonce":"joiCrC0S43lgADM4Q6WxXA","state":"185nXJIorJDl-QIcAZkO6w","code_challenge":"BrgPZAph3TziF_Bkoa4jXs-XOmIwMSBphSdy9l5IzwU","code_challenge_method":"S256","client_id":"wpf-app","scope":"openid profile PollSystemAPI","redirect_uri":"http://127.0.0.1:23920/"},"$type":"AuthorizeRequestValidationLog"}
2022-04-25 18:42:13.811 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&nonce=joiCrC0S43lgADM4Q6WxXA&state=185nXJIorJDl-QIcAZkO6w&code_challenge=BrgPZAph3TziF_Bkoa4jXs-XOmIwMSBphSdy9l5IzwU&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F - - - 302 0 - 54.1122ms
2022-04-25 18:42:13.845 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/home/error?errorId=CfDJ8KgbXPqOffFBh3v38e5V22VUZBjOhjVPdYisz99c06hAOXjSheZEpQZzdsVhONSpfcHzgHR6hEuJ7hnHGDS54TZgBfs8MIVGjMIXqW2q4NBcYfCEgENlGoA1Sa6jwja3xZiQCFp9y2ST-qr44JiMqZY4CvQQajjYTeeTzFD7e_29q7PldKp_HNzTuzTXLfCLG6M8W12cofA4XTu-dL9LesYkYXXhzyxWLbhI6N19lXmfgu2Kh3C2UmYBb5Z7UxDOSodXQFGF_6856e7thXFdYdkN2V35ltFF1X1kZAnHh03tu5bb905ozK5aRf0bHGcdbI0sacGUpw6W603W7L9-0fU - -
2022-04-25 18:42:13.849 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/home/error?errorId=CfDJ8KgbXPqOffFBh3v38e5V22VUZBjOhjVPdYisz99c06hAOXjSheZEpQZzdsVhONSpfcHzgHR6hEuJ7hnHGDS54TZgBfs8MIVGjMIXqW2q4NBcYfCEgENlGoA1Sa6jwja3xZiQCFp9y2ST-qr44JiMqZY4CvQQajjYTeeTzFD7e_29q7PldKp_HNzTuzTXLfCLG6M8W12cofA4XTu-dL9LesYkYXXhzyxWLbhI6N19lXmfgu2Kh3C2UmYBb5Z7UxDOSodXQFGF_6856e7thXFdYdkN2V35ltFF1X1kZAnHh03tu5bb905ozK5aRf0bHGcdbI0sacGUpw6W603W7L9-0fU - - - 404 0 - 3.3201ms
2022-04-25 18:43:56.325 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 18:43:56.487 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 18:43:56.502 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 18:43:56.507 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-25 18:43:56.514 +03:00 [INF] Initialization DB done
2022-04-25 18:43:56.561 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-25 18:43:56.642 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-25 18:43:56.655 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-25 18:43:56.667 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-25 18:43:56.900 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-25 18:43:56.901 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-25 18:43:56.903 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-25 18:43:56.904 +03:00 [INF] Hosting environment: Development
2022-04-25 18:43:56.906 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-25 18:44:14.300 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 18:44:14.366 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 18:44:14.413 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 116.6094ms
2022-04-25 18:44:14.443 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 18:44:14.450 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 18:44:14.479 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 36.0506ms
2022-04-25 18:44:15.213 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&nonce=mij_ianjESVzcN51vvU-8w&state=5d0e10ZopNIoODml5KUXHg&code_challenge=rrHqd_-_hjQbEvgdnFbEnvVRplG1PqgqHs8hmVrC0Uk&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F - -
2022-04-25 18:44:15.261 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-25 18:44:15.389 +03:00 [INF] Showing login: User is not authenticated
2022-04-25 18:44:15.401 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&nonce=mij_ianjESVzcN51vvU-8w&state=5d0e10ZopNIoODml5KUXHg&code_challenge=rrHqd_-_hjQbEvgdnFbEnvVRplG1PqgqHs8hmVrC0Uk&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F - - - 302 0 - 188.2878ms
2022-04-25 18:44:15.431 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26nonce%3Dmij_ianjESVzcN51vvU-8w%26state%3D5d0e10ZopNIoODml5KUXHg%26code_challenge%3DrrHqd_-_hjQbEvgdnFbEnvVRplG1PqgqHs8hmVrC0Uk%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%253A23920%252F - -
2022-04-25 18:44:15.440 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-25 18:44:15.460 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-25 18:44:15.485 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-25 18:44:15.574 +03:00 [INF] Executed ViewResult - view Login executed in 88.6063ms.
2022-04-25 18:44:15.577 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 112.8197ms
2022-04-25 18:44:15.578 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-25 18:44:15.583 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?ReturnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26nonce%3Dmij_ianjESVzcN51vvU-8w%26state%3D5d0e10ZopNIoODml5KUXHg%26code_challenge%3DrrHqd_-_hjQbEvgdnFbEnvVRplG1PqgqHs8hmVrC0Uk%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%253A23920%252F - - - 200 - text/html;+charset=utf-8 151.4983ms
2022-04-25 18:44:26.150 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 570
2022-04-25 18:44:26.157 +03:00 [INF] No CORS policy found for the specified request.
2022-04-25 18:44:26.160 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-25 18:44:26.171 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-25 18:44:26.221 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 18:44:26.576 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedUserName_0='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-25 18:44:26.586 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-25 18:44:26.589 +03:00 [INF] Executed ViewResult - view Login executed in 3.4465ms.
2022-04-25 18:44:26.592 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 417.5869ms
2022-04-25 18:44:26.593 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-25 18:44:26.596 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 570 - 200 - text/html;+charset=utf-8 445.2858ms
2022-04-25 18:44:44.857 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26nonce%3Dmij_ianjESVzcN51vvU-8w%26state%3D5d0e10ZopNIoODml5KUXHg%26code_challenge%3DrrHqd_-_hjQbEvgdnFbEnvVRplG1PqgqHs8hmVrC0Uk%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%253A23920%252F - -
2022-04-25 18:44:44.862 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-25 18:44:44.865 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-25 18:44:44.879 +03:00 [INF] Executing ViewResult, running view Register.
2022-04-25 18:44:44.893 +03:00 [INF] Executed ViewResult - view Register executed in 14.0278ms.
2022-04-25 18:44:44.896 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 27.6152ms
2022-04-25 18:44:44.898 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-25 18:44:44.900 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26nonce%3Dmij_ianjESVzcN51vvU-8w%26state%3D5d0e10ZopNIoODml5KUXHg%26code_challenge%3DrrHqd_-_hjQbEvgdnFbEnvVRplG1PqgqHs8hmVrC0Uk%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%253A23920%252F - - - 200 - text/html;+charset=utf-8 43.2746ms
2022-04-25 18:45:05.910 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Register application/x-www-form-urlencoded 594
2022-04-25 18:45:05.913 +03:00 [INF] No CORS policy found for the specified request.
2022-04-25 18:45:05.914 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-25 18:45:05.921 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Auth.Identity.ViewModel.RegisterViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-25 18:45:06.009 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 18:45:06.016 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-25 18:45:06.213 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 36), @p1='?' (DbType = Int32), @p2='?' (Size = 36), @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?', @p10='?' (Size = 4), @p11='?' (Size = 84), @p12='?', @p13='?' (DbType = Boolean), @p14='?' (Size = 32), @p15='?' (DbType = Boolean), @p16='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "AccessFailedCount", "ConcurrencyStamp", "Email", "EmailConfirmed", "FirstName", "LastName", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "PhoneNumber", "PhoneNumberConfirmed", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2022-04-25 18:45:06.333 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-25 18:45:06.364 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-25 18:45:06.378 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-25 18:45:06.381 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&nonce=mij_ianjESVzcN51vvU-8w&state=5d0e10ZopNIoODml5KUXHg&code_challenge=rrHqd_-_hjQbEvgdnFbEnvVRplG1PqgqHs8hmVrC0Uk&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F.
2022-04-25 18:45:06.383 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 459.5791ms
2022-04-25 18:45:06.384 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-25 18:45:06.385 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Register application/x-www-form-urlencoded 594 - 302 0 - 475.6288ms
2022-04-25 18:45:06.411 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&nonce=mij_ianjESVzcN51vvU-8w&state=5d0e10ZopNIoODml5KUXHg&code_challenge=rrHqd_-_hjQbEvgdnFbEnvVRplG1PqgqHs8hmVrC0Uk&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F - -
2022-04-25 18:45:06.417 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-25 18:45:06.492 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-25 18:45:06.495 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&nonce=mij_ianjESVzcN51vvU-8w&state=5d0e10ZopNIoODml5KUXHg&code_challenge=rrHqd_-_hjQbEvgdnFbEnvVRplG1PqgqHs8hmVrC0Uk&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F - - - 302 0 - 84.2307ms
2022-04-25 18:46:15.123 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26nonce%3Dmij_ianjESVzcN51vvU-8w%26state%3D5d0e10ZopNIoODml5KUXHg%26code_challenge%3DrrHqd_-_hjQbEvgdnFbEnvVRplG1PqgqHs8hmVrC0Uk%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%253A23920%252F - -
2022-04-25 18:46:15.137 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-25 18:46:15.138 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-25 18:46:15.142 +03:00 [INF] Executing ViewResult, running view Register.
2022-04-25 18:46:15.144 +03:00 [INF] Executed ViewResult - view Register executed in 2.2158ms.
2022-04-25 18:46:15.146 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Register (Auth.Identity) in 4.1177ms
2022-04-25 18:46:15.149 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Register (Auth.Identity)'
2022-04-25 18:46:15.151 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Register?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26nonce%3Dmij_ianjESVzcN51vvU-8w%26state%3D5d0e10ZopNIoODml5KUXHg%26code_challenge%3DrrHqd_-_hjQbEvgdnFbEnvVRplG1PqgqHs8hmVrC0Uk%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%253A23920%252F - - - 200 - text/html;+charset=utf-8 27.7553ms
2022-04-25 18:46:18.870 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/Auth/Login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26nonce%3Dmij_ianjESVzcN51vvU-8w%26state%3D5d0e10ZopNIoODml5KUXHg%26code_challenge%3DrrHqd_-_hjQbEvgdnFbEnvVRplG1PqgqHs8hmVrC0Uk%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%253A23920%252F - -
2022-04-25 18:46:18.878 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-25 18:46:18.883 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Login(System.String) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-25 18:46:18.887 +03:00 [INF] Executing ViewResult, running view Login.
2022-04-25 18:46:18.890 +03:00 [INF] Executed ViewResult - view Login executed in 2.7535ms.
2022-04-25 18:46:18.893 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 6.854ms
2022-04-25 18:46:18.895 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-25 18:46:18.898 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/Auth/Login?returnUrl=%2Fconnect%2Fauthorize%2Fcallback%3Fresponse_type%3Dcode%26nonce%3Dmij_ianjESVzcN51vvU-8w%26state%3D5d0e10ZopNIoODml5KUXHg%26code_challenge%3DrrHqd_-_hjQbEvgdnFbEnvVRplG1PqgqHs8hmVrC0Uk%26code_challenge_method%3DS256%26client_id%3Dwpf-app%26scope%3Dopenid%2520profile%2520PollSystemAPI%26redirect_uri%3Dhttp%253A%252F%252F127.0.0.1%253A23920%252F - - - 200 - text/html;+charset=utf-8 27.3813ms
2022-04-25 18:46:21.697 +03:00 [INF] Request starting HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 613
2022-04-25 18:46:21.700 +03:00 [INF] No CORS policy found for the specified request.
2022-04-25 18:46:21.703 +03:00 [INF] Executing endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-25 18:46:21.705 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Auth.Identity.ViewModel.LoginViewModel) on controller Auth.Identity.Controllers.AuthController (Auth.Identity).
2022-04-25 18:46:21.709 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 18:46:21.712 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-25 18:46:21.724 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 4)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2022-04-25 18:46:21.746 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-25 18:46:21.754 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-25 18:46:21.760 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-25 18:46:21.762 +03:00 [INF] Executing RedirectResult, redirecting to /connect/authorize/callback?response_type=code&nonce=mij_ianjESVzcN51vvU-8w&state=5d0e10ZopNIoODml5KUXHg&code_challenge=rrHqd_-_hjQbEvgdnFbEnvVRplG1PqgqHs8hmVrC0Uk&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F.
2022-04-25 18:46:21.768 +03:00 [INF] Executed action Auth.Identity.Controllers.AuthController.Login (Auth.Identity) in 59.8456ms
2022-04-25 18:46:21.771 +03:00 [INF] Executed endpoint 'Auth.Identity.Controllers.AuthController.Login (Auth.Identity)'
2022-04-25 18:46:21.775 +03:00 [INF] Request finished HTTP/2 POST https://localhost:1001/Auth/Login application/x-www-form-urlencoded 613 - 302 0 - 77.8187ms
2022-04-25 18:46:21.795 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&nonce=mij_ianjESVzcN51vvU-8w&state=5d0e10ZopNIoODml5KUXHg&code_challenge=rrHqd_-_hjQbEvgdnFbEnvVRplG1PqgqHs8hmVrC0Uk&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F - -
2022-04-25 18:46:21.800 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2022-04-25 18:46:21.803 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2022-04-25 18:46:21.804 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize/callback?response_type=code&nonce=mij_ianjESVzcN51vvU-8w&state=5d0e10ZopNIoODml5KUXHg&code_challenge=rrHqd_-_hjQbEvgdnFbEnvVRplG1PqgqHs8hmVrC0Uk&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F - - - 302 0 - 9.2667ms
2022-04-25 18:47:29.608 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 18:47:29.806 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 18:47:29.823 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 18:47:29.829 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-25 18:47:29.835 +03:00 [INF] Initialization DB done
2022-04-25 18:47:29.878 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-25 18:47:29.958 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-25 18:47:29.972 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-25 18:47:29.983 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-25 18:47:30.196 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-25 18:47:30.198 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-25 18:47:30.200 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-25 18:47:30.201 +03:00 [INF] Hosting environment: Development
2022-04-25 18:47:30.202 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-25 18:47:37.683 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 18:47:37.744 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 18:47:37.796 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 114.6506ms
2022-04-25 18:47:37.816 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 18:47:37.821 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 18:47:37.854 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 37.8740ms
2022-04-25 18:47:38.266 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&nonce=lITNModTyA37vt9ClECl-Q&state=2Y92J-QzHroj5VIYxWmw_Q&code_challenge=rd0JMnIJJUqMz9mPphdTPpuof8ZVHlFI7DgMX2ewFJ4&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F - -
2022-04-25 18:47:38.299 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-25 18:47:38.450 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&nonce=lITNModTyA37vt9ClECl-Q&state=2Y92J-QzHroj5VIYxWmw_Q&code_challenge=rd0JMnIJJUqMz9mPphdTPpuof8ZVHlFI7DgMX2ewFJ4&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F - - - 302 0 - 183.8529ms
2022-04-25 18:47:38.537 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 18:47:38.551 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 18:47:38.554 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 16.8059ms
2022-04-25 18:47:38.556 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 18:47:38.558 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 18:47:38.562 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.7728ms
2022-04-25 18:47:38.591 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 222
2022-04-25 18:47:38.599 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-25 18:47:38.715 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****9C7B","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"4917BE81252EBEC9650F64D7850060C3DBCF5B9B4C9951EE5AE560DFA2AB9C7B","redirect_uri":"http://127.0.0.1:23920/","code_verifier":"Mq_GnySnb-1rOZ2RbwcBaxsSAhO_tNM7lsQjUTmRyZk","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-25 18:47:38.762 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 18:47:39.024 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-25 18:47:39.327 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 222 - 200 - application/json;+charset=UTF-8 735.8566ms
2022-04-25 18:47:39.351 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 18:47:39.361 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 18:47:39.363 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 12.8728ms
2022-04-25 18:47:39.365 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 18:47:39.367 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 18:47:39.368 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.2674ms
2022-04-25 18:47:39.374 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-25 18:47:39.377 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-25 18:47:39.511 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 18:47:39.517 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-25 18:47:39.520 +03:00 [INF] Profile service returned the following claim types: name
2022-04-25 18:47:39.522 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 147.4386ms
2022-04-25 18:48:43.927 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 18:48:44.091 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 18:48:44.102 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 18:48:44.108 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-25 18:48:44.114 +03:00 [INF] Initialization DB done
2022-04-25 18:48:44.158 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-25 18:48:44.240 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-25 18:48:44.255 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-25 18:48:44.265 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-25 18:48:44.485 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-25 18:48:44.486 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-25 18:48:44.487 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-25 18:48:44.488 +03:00 [INF] Hosting environment: Development
2022-04-25 18:48:44.490 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-25 18:50:42.899 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 18:50:43.294 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 18:50:43.358 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 461.1407ms
2022-04-25 18:50:43.575 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 18:50:43.584 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 18:50:43.644 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 69.1919ms
2022-04-25 21:22:23.034 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 21:22:23.481 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 21:22:23.492 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 21:22:23.499 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-25 21:22:23.504 +03:00 [INF] Initialization DB done
2022-04-25 21:22:23.602 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-25 21:22:23.894 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-25 21:22:23.928 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-25 21:22:23.954 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-25 21:22:24.468 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-25 21:22:24.570 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-25 21:22:24.572 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-25 21:22:24.573 +03:00 [INF] Hosting environment: Development
2022-04-25 21:22:24.574 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-25 21:22:27.867 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 21:22:27.953 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 21:22:28.041 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 177.2960ms
2022-04-25 21:22:28.082 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 21:22:28.084 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 21:22:28.221 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 139.0968ms
2022-04-25 21:22:29.019 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&nonce=tDAX81ws_wluuRLfPp-UYg&state=IQLNJZ12RJmVAC_K20rA_w&code_challenge=pacV3tHakuYvuWUxQ17sWkM5dRLYRl3e1A-9O86_YVk&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F - -
2022-04-25 21:22:29.046 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 21:22:29.381 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-25 21:22:29.491 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-25 21:22:29.514 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-25 21:22:29.660 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-25 21:22:29.846 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&nonce=tDAX81ws_wluuRLfPp-UYg&state=IQLNJZ12RJmVAC_K20rA_w&code_challenge=pacV3tHakuYvuWUxQ17sWkM5dRLYRl3e1A-9O86_YVk&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F - - - 302 0 - 827.2958ms
2022-04-25 21:22:29.985 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 21:22:29.987 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 21:22:29.992 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 7.4002ms
2022-04-25 21:22:29.996 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 21:22:29.998 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 21:22:30.002 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.6493ms
2022-04-25 21:22:30.173 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 222
2022-04-25 21:22:30.177 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-25 21:22:30.249 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****EB93","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"FCBCFC935A4A9AD30A7F6D45C2707B02C140B4754FC0D737A2FA4D2F4D1BEB93","redirect_uri":"http://127.0.0.1:23920/","code_verifier":"nMSd2A8GHf-mNqlBvw61L4KDr_LDhQCFkScYuqvMmmg","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-25 21:22:30.352 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 21:22:30.357 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-25 21:22:30.562 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 222 - 200 - application/json;+charset=UTF-8 388.8822ms
2022-04-25 21:22:30.590 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 21:22:30.601 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 21:22:30.604 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 14.5238ms
2022-04-25 21:22:30.606 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 21:22:30.608 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 21:22:30.609 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.4021ms
2022-04-25 21:22:30.617 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-25 21:22:30.618 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-25 21:22:30.688 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 21:22:30.694 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-25 21:22:30.697 +03:00 [INF] Profile service returned the following claim types: name
2022-04-25 21:22:30.698 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 81.5611ms
2022-04-25 21:26:02.689 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 21:26:02.999 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 21:26:03.010 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 21:26:03.018 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-25 21:26:03.024 +03:00 [INF] Initialization DB done
2022-04-25 21:26:03.064 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-25 21:26:03.150 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-25 21:26:03.175 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-25 21:26:03.187 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-25 21:26:03.423 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-25 21:26:03.425 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-25 21:26:03.427 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-25 21:26:03.428 +03:00 [INF] Hosting environment: Development
2022-04-25 21:26:03.429 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-25 21:28:25.899 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 21:28:26.067 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 21:28:26.081 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 21:28:26.087 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-25 21:28:26.095 +03:00 [INF] Initialization DB done
2022-04-25 21:28:26.143 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-25 21:28:26.229 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-25 21:28:26.243 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-25 21:28:26.253 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-25 21:28:26.473 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-25 21:28:26.474 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-25 21:28:26.475 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-25 21:28:26.476 +03:00 [INF] Hosting environment: Development
2022-04-25 21:28:26.478 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-25 21:28:55.179 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 21:28:55.307 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 21:28:55.365 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 188.3580ms
2022-04-25 21:28:55.562 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 21:28:55.577 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 21:28:55.657 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 95.1583ms
2022-04-25 21:32:27.020 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 21:32:27.035 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 21:32:27.049 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 29.1801ms
2022-04-25 21:32:27.262 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 21:32:27.265 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 21:32:27.266 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.4256ms
2022-04-25 21:35:55.586 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 21:35:55.598 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 21:35:55.600 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 14.0656ms
2022-04-25 21:35:55.754 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 21:35:55.756 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 21:35:55.758 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.8296ms
2022-04-25 21:45:20.850 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 21:45:20.852 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 21:45:20.855 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.4490ms
2022-04-25 21:45:21.019 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 21:45:21.021 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 21:45:21.024 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.6132ms
2022-04-25 21:47:56.068 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 21:47:56.070 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 21:47:56.073 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 5.3105ms
2022-04-25 21:47:56.249 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 21:47:56.251 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 21:47:56.254 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.5018ms
2022-04-25 22:55:51.833 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 22:55:52.074 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 22:55:52.086 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 22:55:52.094 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-25 22:55:52.099 +03:00 [INF] Initialization DB done
2022-04-25 22:55:52.137 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-25 22:55:52.224 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-25 22:55:52.244 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-25 22:55:52.257 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-25 22:55:52.508 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-25 22:55:52.509 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-25 22:55:52.511 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-25 22:55:52.512 +03:00 [INF] Hosting environment: Development
2022-04-25 22:55:52.513 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-25 22:56:03.387 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 22:56:03.604 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 22:56:03.614 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2022-04-25 22:56:03.620 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2022-04-25 22:56:03.625 +03:00 [INF] Initialization DB done
2022-04-25 22:56:03.666 +03:00 [INF] User profile is available. Using 'C:\Users\dimas\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-25 22:56:03.747 +03:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-25 22:56:03.761 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2022-04-25 22:56:03.774 +03:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2022-04-25 22:56:03.997 +03:00 [INF] Now listening on: https://localhost:1001
2022-04-25 22:56:03.998 +03:00 [INF] Now listening on: http://localhost:1000
2022-04-25 22:56:04.000 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-25 22:56:04.001 +03:00 [INF] Hosting environment: Development
2022-04-25 22:56:04.002 +03:00 [INF] Content root path: D:\src\PollSystem\Auth
2022-04-25 22:56:30.467 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 22:56:30.541 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 22:56:30.601 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 136.4530ms
2022-04-25 22:56:30.642 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 22:56:30.656 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 22:56:30.696 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 53.4844ms
2022-04-25 22:56:31.814 +03:00 [INF] Request starting HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&nonce=WHeo5MnWBx4u82lo0iEs5g&state=1WoVlmXzAPvfU6Ow9ibXgw&code_challenge=yiKFbgSmrFvupwIOONaZwJsvkFPQOdJhivtPsBI_Qqw&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F - -
2022-04-25 22:56:31.861 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 22:56:32.276 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-25 22:56:32.417 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."ClaimType", "u"."ClaimValue", "u"."UserId"
FROM "UserClaim" AS "u"
WHERE "u"."UserId" = @__user_Id_0
2022-04-25 22:56:32.462 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Name"
FROM "UserRoles" AS "u"
INNER JOIN "Roles" AS "r" ON "u"."RoleId" = "r"."Id"
WHERE "u"."UserId" = @__userId_0
2022-04-25 22:56:32.489 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2022-04-25 22:56:32.668 +03:00 [INF] Request finished HTTP/2 GET https://localhost:1001/connect/authorize?response_type=code&nonce=WHeo5MnWBx4u82lo0iEs5g&state=1WoVlmXzAPvfU6Ow9ibXgw&code_challenge=yiKFbgSmrFvupwIOONaZwJsvkFPQOdJhivtPsBI_Qqw&code_challenge_method=S256&client_id=wpf-app&scope=openid%20profile%20PollSystemAPI&redirect_uri=http%3A%2F%2F127.0.0.1%3A23920%2F - - - 302 0 - 853.6884ms
2022-04-25 22:56:32.788 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 22:56:32.790 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 22:56:32.792 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 3.8957ms
2022-04-25 22:56:32.797 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 22:56:32.798 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 22:56:32.801 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 4.1202ms
2022-04-25 22:56:32.822 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 222
2022-04-25 22:56:32.825 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2022-04-25 22:56:32.887 +03:00 [INF] Token request validation success, {"ClientId":"wpf-app","ClientName":"Auth Web","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"****19F7","RefreshToken":"********","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"authorization_code","code":"103BA15136B91C5FC1093CDD4AAF291F4FA04680BE5654FB20B6395AB11619F7","redirect_uri":"http://127.0.0.1:23920/","code_verifier":"gGrsjMutfJNuDDt6jrJi9ZP2x_V74WkmDfSxLuHmadY","client_id":"wpf-app"},"$type":"TokenRequestValidationLog"}
2022-04-25 22:56:33.000 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 22:56:33.006 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-25 22:56:33.118 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:1001/connect/token application/x-www-form-urlencoded 222 - 200 - application/json;+charset=UTF-8 296.4103ms
2022-04-25 22:56:33.147 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 22:56:33.159 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 22:56:33.161 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 13.9563ms
2022-04-25 22:56:33.163 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 22:56:33.165 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 22:56:33.167 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 3.9965ms
2022-04-25 22:56:33.177 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/connect/userinfo - -
2022-04-25 22:56:33.179 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2022-04-25 22:56:33.240 +03:00 [INF] Entity Framework Core 6.0.1 initialized 'AuthDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:6.0.1' with options: None
2022-04-25 22:56:33.244 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 36)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."AccessFailedCount", "u"."ConcurrencyStamp", "u"."Email", "u"."EmailConfirmed", "u"."FirstName", "u"."LastName", "u"."LockoutEnabled", "u"."LockoutEnd", "u"."NormalizedEmail", "u"."NormalizedUserName", "u"."PasswordHash", "u"."PhoneNumber", "u"."PhoneNumberConfirmed", "u"."SecurityStamp", "u"."TwoFactorEnabled", "u"."UserName"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2022-04-25 22:56:33.247 +03:00 [INF] Profile service returned the following claim types: name
2022-04-25 22:56:33.250 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/connect/userinfo - - - 200 - application/json;+charset=UTF-8 72.4685ms
2022-04-25 22:58:00.476 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - -
2022-04-25 22:58:00.478 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2022-04-25 22:58:00.480 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration - - - 200 - application/json;+charset=UTF-8 4.1857ms
2022-04-25 22:58:00.719 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - -
2022-04-25 22:58:00.721 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2022-04-25 22:58:00.725 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:1001/.well-known/openid-configuration/jwks - - - 200 - application/json;+charset=UTF-8 5.7809ms
